import{h as Yt,j as e,ae as Ut,af as Qt,r as o,aw as _n,b4 as kn,aa as Jt,a4 as Zt,ab as ke,M as Dn,V as Ke,N as Qe,J as Rn,a6 as An,a7 as It,a8 as zt,Z as ie,a2 as en,G as O,T as J,ac as En,I as Ht,B as mt}from"./index-ODiMIL8c.js";import{d as Nn}from"./Add-jDuvICD4.js";import{p as In,b as tn,e as Hn,f as Mn,h as On,c as Bn}from"./billService-BZdD24Q0.js";import{g as Ln,d as Wn}from"./request-CC2wnMWl.js";import{B as Nt}from"./react-toastify.esm-7DHR6V1D.js";import{N as $t}from"./notification-B40vY8uZ.js";import{g as Fn}from"./couponsService-Hrv3-TA3.js";import{f as Gn,e as Vn}from"./customerService-DLX4K4K2.js";import{g as nn,f as an,c as rn,d as sn,a as zn,e as $n}from"./serialUtil-Ud-fd3k5.js";import{f as qn,a as qt,b as Kt,c as Kn,g as Xn}from"./index-CBIgrD7a.js";import{d as Yn,S as Ie}from"./ImportProduct-C9i_h4DW.js";import{T as Je,a as Ze,b as et,c as De,d as tt}from"./TableRow-CiYyoDmn.js";import{T as g}from"./TableCell-CvT0UNUt.js";import{a as Ye,c as Ue,b as it,D as lt}from"./DialogTitle-UPTmzQrS.js";import{B as xt}from"./Box-PW3RriZK.js";import{C as yt}from"./Checkbox-CZLLfLAq.js";import{P as Mt}from"./Pagination-BfakT0Tw.js";import{S as Un}from"./Switch-DjHcYET7.js";import{S as Qn,A as Jn}from"./Snackbar-cwqFnrZx.js";import{T as Zn,a as Xt}from"./Tabs-BadM-OuN.js";import"./MenuItem-9SXJ4cuB.js";import"./xlsx-ChUIJHMt.js";import"./sanPham-CD8W00Ub.js";import"./back-end-vuWvP0DO.js";import"./LastPage-BI26Cmhz.js";import"./Close-BVp8FVaf.js";import"./KeyboardArrowRight-DRQYp2Cc.js";const ea=Yt(e.jsx("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutline"),ta=Yt(e.jsx("path",{d:"M7 11v2h10v-2zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"RemoveCircleOutline");var Ot={},na=Qt;Object.defineProperty(Ot,"__esModule",{value:!0});var on=Ot.default=void 0,aa=na(Ut()),ra=e;on=Ot.default=(0,aa.default)((0,ra.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var Bt={},sa=Qt;Object.defineProperty(Bt,"__esModule",{value:!0});var ln=Bt.default=void 0,oa=sa(Ut()),ia=e;ln=Bt.default=(0,oa.default)((0,ia.jsx)("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2M1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2"}),"ShoppingCart");const la=async()=>{try{return await Ln("sell/bill-codes")}catch(re){throw console.error("Error fetching sell get bill codes:",re),re}},ca=async re=>{try{return await Wn(`sell/delete/${re}`)}catch(He){throw console.error("Error delete bill by code:",He),He}};var da={exports:{}};(function(re,He){(function(We,P){re.exports=P(o,_n)})(typeof self<"u"?self:kn,function(We,P){return function(){var Ce={328:function(S,y,v){Object.defineProperty(y,"__esModule",{value:!0}),y.PrintContextConsumer=y.PrintContext=void 0;var D=v(496),H=Object.prototype.hasOwnProperty.call(D,"createContext");y.PrintContext=H?D.createContext({}):null,y.PrintContextConsumer=y.PrintContext?y.PrintContext.Consumer:function(){return null}},428:function(S,y,v){Object.defineProperty(y,"__esModule",{value:!0}),y.ReactToPrint=void 0;var D=v(316),H=v(496),x=v(190),A=v(328),K=v(940),Z=function(ue){function he(){var d=ue.apply(this,D.__spreadArray([],D.__read(arguments),!1))||this;return d.startPrint=function(b){var T=d.props,M=T.onAfterPrint,ne=T.onPrintError,X=T.print,L=T.documentTitle;setTimeout(function(){var ae,Y;if(b.contentWindow)if(b.contentWindow.focus(),X)X(b).then(function(){return M==null?void 0:M()}).then(function(){return d.handleRemoveIframe()}).catch(function(be){ne?ne("print",be):d.logMessages(["An error was thrown by the specified `print` function"])});else{if(b.contentWindow.print){var se=(Y=(ae=b.contentDocument)===null||ae===void 0?void 0:ae.title)!==null&&Y!==void 0?Y:"",E=b.ownerDocument.title;L&&(b.ownerDocument.title=L,b.contentDocument&&(b.contentDocument.title=L)),b.contentWindow.print(),L&&(b.ownerDocument.title=E,b.contentDocument&&(b.contentDocument.title=se))}else d.logMessages(["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."]);M==null||M(),d.handleRemoveIframe()}else d.logMessages(["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/gregnb/react-to-print/issues/"])},500)},d.triggerPrint=function(b){var T=d.props,M=T.onBeforePrint,ne=T.onPrintError;if(M){var X=M();X&&typeof X.then=="function"?X.then(function(){d.startPrint(b)}).catch(function(L){ne&&ne("onBeforePrint",L)}):d.startPrint(b)}else d.startPrint(b)},d.handlePrint=function(b){var T=d.props,M=T.bodyClass,ne=T.content,X=T.copyStyles,L=T.fonts,ae=T.pageStyle,Y=T.nonce,se=typeof b=="function"?b():null;if(se&&typeof ne=="function"&&d.logMessages(['"react-to-print" received a `content` prop and a content param passed the callback return by `useReactToPrint. The `content` prop will be ignored.'],"warning"),se||typeof ne!="function"||(se=ne()),se!==void 0)if(se!==null){var E=document.createElement("iframe");E.width="".concat(document.documentElement.clientWidth,"px"),E.height="".concat(document.documentElement.clientHeight,"px"),E.style.position="absolute",E.style.top="-".concat(document.documentElement.clientHeight+100,"px"),E.style.left="-".concat(document.documentElement.clientWidth+100,"px"),E.id="printWindow",E.srcdoc="<!DOCTYPE html>";var be=(0,x.findDOMNode)(se);if(be){var ye=be.cloneNode(!0),Re=ye instanceof Text,Ge=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),we=Re?[]:ye.querySelectorAll("img"),ve=Re?[]:ye.querySelectorAll("video"),Ae=L?L.length:0;d.numResourcesToLoad=Ge.length+we.length+ve.length+Ae,d.resourcesLoaded=[],d.resourcesErrored=[];var W=function(pe,je){d.resourcesLoaded.includes(pe)?d.logMessages(["Tried to mark a resource that has already been handled",pe],"debug"):(je?(d.logMessages(D.__spreadArray(['"react-to-print" was unable to load a resource but will continue attempting to print the page'],D.__read(je),!1)),d.resourcesErrored.push(pe)):d.resourcesLoaded.push(pe),d.resourcesLoaded.length+d.resourcesErrored.length===d.numResourcesToLoad&&d.triggerPrint(E))};E.onload=function(){var pe,je,Pe,Se;E.onload=null;var F=E.contentDocument||((je=E.contentWindow)===null||je===void 0?void 0:je.document);if(F){F.body.appendChild(ye),L&&(!((Pe=E.contentDocument)===null||Pe===void 0)&&Pe.fonts&&(!((Se=E.contentWindow)===null||Se===void 0)&&Se.FontFace)?L.forEach(function(te){var C=new FontFace(te.family,te.source,{weight:te.weight,style:te.style});E.contentDocument.fonts.add(C),C.loaded.then(function(){W(C)}).catch(function(N){W(C,["Failed loading the font:",C,"Load error:",N])})}):(L.forEach(function(te){return W(te)}),d.logMessages(['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'])));var Me=typeof ae=="function"?ae():ae;if(typeof Me!="string")d.logMessages(['"react-to-print" expected a "string" from `pageStyle` but received "'.concat(typeof Me,'". Styles from `pageStyle` will not be applied.')]);else{var Ee=F.createElement("style");Y&&(Ee.setAttribute("nonce",Y),F.head.setAttribute("nonce",Y)),Ee.appendChild(F.createTextNode(Me)),F.head.appendChild(Ee)}if(M&&(pe=F.body.classList).add.apply(pe,D.__spreadArray([],D.__read(M.split(" ")),!1)),!Re){for(var n=Re?[]:be.querySelectorAll("canvas"),a=F.querySelectorAll("canvas"),r=0;r<n.length;++r){var s=n[r],i=a[r].getContext("2d");i&&i.drawImage(s,0,0)}var f=function(te){var C=we[te],N=C.getAttribute("src");if(N){var ge=new Image;ge.onload=function(){return W(C)},ge.onerror=function(Te,Ne,B,oe,w){return W(C,["Error loading <img>",C,"Error",w])},ge.src=N}else W(C,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it. The <img> is:',C])};for(r=0;r<we.length;r++)f(r);var u=function(te){var C=ve[te];C.preload="auto";var N=C.getAttribute("poster");if(N){var ge=new Image;ge.onload=function(){return W(C)},ge.onerror=function(Te,Ne,B,oe,w){return W(C,["Error loading video poster",N,"for video",C,"Error:",w])},ge.src=N}else C.readyState>=2?W(C):(C.onloadeddata=function(){return W(C)},C.onerror=function(Te,Ne,B,oe,w){return W(C,["Error loading video",C,"Error",w])},C.onstalled=function(){return W(C,["Loading video stalled, skipping",C])})};for(r=0;r<ve.length;r++)u(r);var j="input",G=be.querySelectorAll(j),V=F.querySelectorAll(j);for(r=0;r<G.length;r++)V[r].value=G[r].value;var p="input[type=checkbox],input[type=radio]",_=be.querySelectorAll(p),ee=F.querySelectorAll(p);for(r=0;r<_.length;r++)ee[r].checked=_[r].checked;var U="select",le=be.querySelectorAll(U),fe=F.querySelectorAll(U);for(r=0;r<le.length;r++)fe[r].value=le[r].value}if(X)for(var ce=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']"),de=function(te,C){var N=ce[te];if(N.tagName.toLowerCase()==="style"){var ge=F.createElement(N.tagName),Te=N.sheet;if(Te){var Ne="";try{for(var B=Te.cssRules.length,oe=0;oe<B;++oe)typeof Te.cssRules[oe].cssText=="string"&&(Ne+="".concat(Te.cssRules[oe].cssText,`\r
`))}catch{d.logMessages(["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/gregnb/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",N],"warning")}ge.setAttribute("id","react-to-print-".concat(te)),Y&&ge.setAttribute("nonce",Y),ge.appendChild(F.createTextNode(Ne)),F.head.appendChild(ge)}}else if(N.getAttribute("href"))if(N.hasAttribute("disabled"))d.logMessages(["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",N],"warning"),W(N);else{for(var w=F.createElement(N.tagName),ct=(oe=0,N.attributes.length);oe<ct;++oe){var z=N.attributes[oe];z&&w.setAttribute(z.nodeName,z.nodeValue||"")}w.onload=function(){return W(w)},w.onerror=function(ze,nt,Ve,dt,$e){return W(w,["Failed to load",w,"Error:",$e])},Y&&w.setAttribute("nonce",Y),F.head.appendChild(w)}else d.logMessages(["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",N],"warning"),W(N)},Oe=(r=0,ce.length);r<Oe;++r)de(r)}d.numResourcesToLoad!==0&&X||d.triggerPrint(E)},d.handleRemoveIframe(!0),document.body.appendChild(E)}else d.logMessages(['"react-to-print" could not locate the DOM node corresponding with the `content` prop'])}else d.logMessages(['There is nothing to print because the "content" prop returned "null". Please ensure "content" is renderable before allowing "react-to-print" to be called.']);else d.logMessages(["To print a functional component ensure it is wrapped with `React.forwardRef`, and ensure the forwarded ref is used. See the README for an example: https://github.com/gregnb/react-to-print#examples"])},d.handleRemoveIframe=function(b){var T=d.props.removeAfterPrint;if(b||T){var M=document.getElementById("printWindow");M&&document.body.removeChild(M)}},d.logMessages=function(b,T){T===void 0&&(T="error"),d.props.suppressErrors||(T==="error"?console.error(b):T==="warning"?console.warn(b):T==="debug"&&console.debug(b))},d}return D.__extends(he,ue),he.prototype.handleClick=function(d,b){var T=this,M=this.props,ne=M.onBeforeGetContent,X=M.onPrintError;if(ne){var L=ne();L&&typeof L.then=="function"?L.then(function(){return T.handlePrint(b)}).catch(function(ae){X&&X("onBeforeGetContent",ae)}):this.handlePrint(b)}else this.handlePrint(b)},he.prototype.render=function(){var d=this.props,b=d.children,T=d.trigger;if(T)return H.cloneElement(T(),{onClick:this.handleClick.bind(this)});if(!A.PrintContext)return this.logMessages(['"react-to-print" requires React ^16.3.0 to be able to use "PrintContext"']),null;var M={handlePrint:this.handleClick.bind(this)};return H.createElement(A.PrintContext.Provider,{value:M},b)},he.defaultProps=K.defaultProps,he}(H.Component);y.ReactToPrint=Z},940:function(S,y){Object.defineProperty(y,"__esModule",{value:!0}),y.defaultProps=void 0,y.defaultProps={copyStyles:!0,pageStyle:`
        @page {
            /* Remove browser default header (title) and footer (url) */
            margin: 0;
        }
        @media print {
            body {
                /* Tell browsers to print background colors */
                -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
                color-adjust: exact; /* Firefox */
            }
        }
    `,removeAfterPrint:!1,suppressErrors:!1}},892:function(S,y,v){Object.defineProperty(y,"__esModule",{value:!0}),y.useReactToPrint=void 0;var D=v(316),H=v(496),x=v(428),A=v(940),K=v(860),Z=Object.prototype.hasOwnProperty.call(H,"useMemo")&&Object.prototype.hasOwnProperty.call(H,"useCallback");y.useReactToPrint=function(ue){if(!Z)return ue.suppressErrors||console.error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"'),function(){throw new Error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"')};var he=H.useMemo(function(){return new x.ReactToPrint(D.__assign(D.__assign({},A.defaultProps),ue))},[ue]);return H.useCallback(function(d,b){return(0,K.wrapCallbackWithArgs)(he,he.handleClick,b)(d)},[he])}},860:function(S,y,v){Object.defineProperty(y,"__esModule",{value:!0}),y.wrapCallbackWithArgs=void 0;var D=v(316);y.wrapCallbackWithArgs=function(H,x){for(var A=[],K=2;K<arguments.length;K++)A[K-2]=arguments[K];return function(){for(var Z=[],ue=0;ue<arguments.length;ue++)Z[ue]=arguments[ue];return x.apply(H,D.__spreadArray(D.__spreadArray([],D.__read(Z),!1),D.__read(A),!1))}}},496:function(S){S.exports=We},190:function(S){S.exports=P},316:function(S,y,v){v.r(y),v.d(y,{__addDisposableResource:function(){return F},__assign:function(){return x},__asyncDelegator:function(){return Ge},__asyncGenerator:function(){return Re},__asyncValues:function(){return we},__await:function(){return ye},__awaiter:function(){return M},__classPrivateFieldGet:function(){return je},__classPrivateFieldIn:function(){return Se},__classPrivateFieldSet:function(){return Pe},__createBinding:function(){return X},__decorate:function(){return K},__disposeResources:function(){return Ee},__esDecorate:function(){return ue},__exportStar:function(){return L},__extends:function(){return H},__generator:function(){return ne},__importDefault:function(){return pe},__importStar:function(){return W},__makeTemplateObject:function(){return ve},__metadata:function(){return T},__param:function(){return Z},__propKey:function(){return d},__read:function(){return Y},__rest:function(){return A},__runInitializers:function(){return he},__setFunctionName:function(){return b},__spread:function(){return se},__spreadArray:function(){return be},__spreadArrays:function(){return E},__values:function(){return ae}});var D=function(n,a){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},D(n,a)};function H(n,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function r(){this.constructor=n}D(n,a),n.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}var x=function(){return x=Object.assign||function(n){for(var a,r=1,s=arguments.length;r<s;r++)for(var i in a=arguments[r])Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i]);return n},x.apply(this,arguments)};function A(n,a){var r={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&a.indexOf(s)<0&&(r[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(s=Object.getOwnPropertySymbols(n);i<s.length;i++)a.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(r[s[i]]=n[s[i]])}return r}function K(n,a,r,s){var i,f=arguments.length,u=f<3?a:s===null?s=Object.getOwnPropertyDescriptor(a,r):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,a,r,s);else for(var j=n.length-1;j>=0;j--)(i=n[j])&&(u=(f<3?i(u):f>3?i(a,r,u):i(a,r))||u);return f>3&&u&&Object.defineProperty(a,r,u),u}function Z(n,a){return function(r,s){a(r,s,n)}}function ue(n,a,r,s,i,f){function u(de){if(de!==void 0&&typeof de!="function")throw new TypeError("Function expected");return de}for(var j,G=s.kind,V=G==="getter"?"get":G==="setter"?"set":"value",p=!a&&n?s.static?n:n.prototype:null,_=a||(p?Object.getOwnPropertyDescriptor(p,s.name):{}),ee=!1,U=r.length-1;U>=0;U--){var le={};for(var fe in s)le[fe]=fe==="access"?{}:s[fe];for(var fe in s.access)le.access[fe]=s.access[fe];le.addInitializer=function(de){if(ee)throw new TypeError("Cannot add initializers after decoration has completed");f.push(u(de||null))};var ce=(0,r[U])(G==="accessor"?{get:_.get,set:_.set}:_[V],le);if(G==="accessor"){if(ce===void 0)continue;if(ce===null||typeof ce!="object")throw new TypeError("Object expected");(j=u(ce.get))&&(_.get=j),(j=u(ce.set))&&(_.set=j),(j=u(ce.init))&&i.unshift(j)}else(j=u(ce))&&(G==="field"?i.unshift(j):_[V]=j)}p&&Object.defineProperty(p,s.name,_),ee=!0}function he(n,a,r){for(var s=arguments.length>2,i=0;i<a.length;i++)r=s?a[i].call(n,r):a[i].call(n);return s?r:void 0}function d(n){return typeof n=="symbol"?n:"".concat(n)}function b(n,a,r){return typeof a=="symbol"&&(a=a.description?"[".concat(a.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:r?"".concat(r," ",a):a})}function T(n,a){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,a)}function M(n,a,r,s){return new(r||(r=Promise))(function(i,f){function u(V){try{G(s.next(V))}catch(p){f(p)}}function j(V){try{G(s.throw(V))}catch(p){f(p)}}function G(V){var p;V.done?i(V.value):(p=V.value,p instanceof r?p:new r(function(_){_(p)})).then(u,j)}G((s=s.apply(n,a||[])).next())})}function ne(n,a){var r,s,i,f,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return f={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function j(G){return function(V){return function(p){if(r)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(u=0)),u;)try{if(r=1,s&&(i=2&p[0]?s.return:p[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,p[1])).done)return i;switch(s=0,i&&(p=[2&p[0],i.value]),p[0]){case 0:case 1:i=p;break;case 4:return u.label++,{value:p[1],done:!1};case 5:u.label++,s=p[1],p=[0];continue;case 7:p=u.ops.pop(),u.trys.pop();continue;default:if(!((i=(i=u.trys).length>0&&i[i.length-1])||p[0]!==6&&p[0]!==2)){u=0;continue}if(p[0]===3&&(!i||p[1]>i[0]&&p[1]<i[3])){u.label=p[1];break}if(p[0]===6&&u.label<i[1]){u.label=i[1],i=p;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(p);break}i[2]&&u.ops.pop(),u.trys.pop();continue}p=a.call(n,u)}catch(_){p=[6,_],s=0}finally{r=i=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([G,V])}}}var X=Object.create?function(n,a,r,s){s===void 0&&(s=r);var i=Object.getOwnPropertyDescriptor(a,r);i&&!("get"in i?!a.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return a[r]}}),Object.defineProperty(n,s,i)}:function(n,a,r,s){s===void 0&&(s=r),n[s]=a[r]};function L(n,a){for(var r in n)r==="default"||Object.prototype.hasOwnProperty.call(a,r)||X(a,n,r)}function ae(n){var a=typeof Symbol=="function"&&Symbol.iterator,r=a&&n[a],s=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y(n,a){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var s,i,f=r.call(n),u=[];try{for(;(a===void 0||a-- >0)&&!(s=f.next()).done;)u.push(s.value)}catch(j){i={error:j}}finally{try{s&&!s.done&&(r=f.return)&&r.call(f)}finally{if(i)throw i.error}}return u}function se(){for(var n=[],a=0;a<arguments.length;a++)n=n.concat(Y(arguments[a]));return n}function E(){for(var n=0,a=0,r=arguments.length;a<r;a++)n+=arguments[a].length;var s=Array(n),i=0;for(a=0;a<r;a++)for(var f=arguments[a],u=0,j=f.length;u<j;u++,i++)s[i]=f[u];return s}function be(n,a,r){if(r||arguments.length===2)for(var s,i=0,f=a.length;i<f;i++)!s&&i in a||(s||(s=Array.prototype.slice.call(a,0,i)),s[i]=a[i]);return n.concat(s||Array.prototype.slice.call(a))}function ye(n){return this instanceof ye?(this.v=n,this):new ye(n)}function Re(n,a,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=r.apply(n,a||[]),f=[];return s={},u("next"),u("throw"),u("return"),s[Symbol.asyncIterator]=function(){return this},s;function u(_){i[_]&&(s[_]=function(ee){return new Promise(function(U,le){f.push([_,ee,U,le])>1||j(_,ee)})})}function j(_,ee){try{(U=i[_](ee)).value instanceof ye?Promise.resolve(U.value.v).then(G,V):p(f[0][2],U)}catch(le){p(f[0][3],le)}var U}function G(_){j("next",_)}function V(_){j("throw",_)}function p(_,ee){_(ee),f.shift(),f.length&&j(f[0][0],f[0][1])}}function Ge(n){var a,r;return a={},s("next"),s("throw",function(i){throw i}),s("return"),a[Symbol.iterator]=function(){return this},a;function s(i,f){a[i]=n[i]?function(u){return(r=!r)?{value:ye(n[i](u)),done:!1}:f?f(u):u}:f}}function we(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,r=n[Symbol.asyncIterator];return r?r.call(n):(n=ae(n),a={},s("next"),s("throw"),s("return"),a[Symbol.asyncIterator]=function(){return this},a);function s(i){a[i]=n[i]&&function(f){return new Promise(function(u,j){(function(G,V,p,_){Promise.resolve(_).then(function(ee){G({value:ee,done:p})},V)})(u,j,(f=n[i](f)).done,f.value)})}}}function ve(n,a){return Object.defineProperty?Object.defineProperty(n,"raw",{value:a}):n.raw=a,n}var Ae=Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a};function W(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var r in n)r!=="default"&&Object.prototype.hasOwnProperty.call(n,r)&&X(a,n,r);return Ae(a,n),a}function pe(n){return n&&n.__esModule?n:{default:n}}function je(n,a,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof a=="function"?n!==a||!s:!a.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(n):s?s.value:a.get(n)}function Pe(n,a,r,s,i){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof a=="function"?n!==a||!i:!a.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?i.call(n,r):i?i.value=r:a.set(n,r),r}function Se(n,a){if(a===null||typeof a!="object"&&typeof a!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?a===n:n.has(a)}function F(n,a,r){if(a!=null){if(typeof a!="object"&&typeof a!="function")throw new TypeError("Object expected.");var s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=a[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=a[Symbol.dispose]}if(typeof s!="function")throw new TypeError("Object not disposable.");n.stack.push({value:a,dispose:s,async:r})}else r&&n.stack.push({async:!0});return a}var Me=typeof SuppressedError=="function"?SuppressedError:function(n,a,r){var s=new Error(r);return s.name="SuppressedError",s.error=n,s.suppressed=a,s};function Ee(n){function a(r){n.error=n.hasError?new Me(r,n.error,"An error was suppressed during disposal."):r,n.hasError=!0}return function r(){for(;n.stack.length;){var s=n.stack.pop();try{var i=s.dispose&&s.dispose.call(s.value);if(s.async)return Promise.resolve(i).then(r,function(f){return a(f),r()})}catch(f){a(f)}}if(n.hasError)throw n.error}()}y.default={__extends:H,__assign:x,__rest:A,__decorate:K,__param:Z,__metadata:T,__awaiter:M,__generator:ne,__createBinding:X,__exportStar:L,__values:ae,__read:Y,__spread:se,__spreadArrays:E,__spreadArray:be,__await:ye,__asyncGenerator:Re,__asyncDelegator:Ge,__asyncValues:we,__makeTemplateObject:ve,__importStar:W,__importDefault:pe,__classPrivateFieldGet:je,__classPrivateFieldSet:Pe,__classPrivateFieldIn:Se,__addDisposableResource:F,__disposeResources:Ee}}},k={};function q(S){var y=k[S];if(y!==void 0)return y.exports;var v=k[S]={exports:{}};return Ce[S](v,v.exports,q),v.exports}q.d=function(S,y){for(var v in y)q.o(y,v)&&!q.o(S,v)&&Object.defineProperty(S,v,{enumerable:!0,get:y[v]})},q.o=function(S,y){return Object.prototype.hasOwnProperty.call(S,y)},q.r=function(S){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})};var Fe={};return function(){var S=Fe;Object.defineProperty(S,"__esModule",{value:!0}),S.useReactToPrint=S.ReactToPrint=S.PrintContextConsumer=void 0;var y=q(328);Object.defineProperty(S,"PrintContextConsumer",{enumerable:!0,get:function(){return y.PrintContextConsumer}});var v=q(428);Object.defineProperty(S,"ReactToPrint",{enumerable:!0,get:function(){return v.ReactToPrint}});var D=q(892);Object.defineProperty(S,"useReactToPrint",{enumerable:!0,get:function(){return D.useReactToPrint}});var H=q(428);S.default=H.ReactToPrint}(),Fe}()})})(da);const ua=re=>{const{id:He}=Jt(),{onLoading:We}=re;Zt();const[P,Ce]=o.useState("0"),k=c=>{const h=c.target.value;Ce(h),h==="0"?x($=>({...$,tenSP:H.ma,ma:""})):h==="1"&&x($=>({...$,ma:H.tenSP,tenSP:""}))},[q,Fe]=o.useState(0),S=()=>{W([]),je([]),le([]),Se([]),n([]),r([]),G([]),ee([]),i([]),p([]),u([]),Me([]),Ce("0"),x(c=>({...c,tenSP:"",ma:""})),Fe(c=>c+1)},y="http://localhost:8080/api/san-pham-chi-tiet/find/filter?",[v,D]=o.useState([]),[H,x]=o.useState({tenSP:"",maSP:"",maSPCT:"",ngayTaoTruoc:"",ngayTaoSau:"",ngaySuaTruoc:"",ngaySuaSau:"",trangThai:"",nhuCau:"",thuongHieu:"",ram:"",mauSac:"",cpu:"",vga:"",webcam:"",oCung:"",manHinh:"",heDieuHanh:"",banPhim:""}),[A,K]=o.useState([]),[Z,ue]=o.useState([]),[he,d]=o.useState([]),[b,T]=o.useState([]),[M,ne]=o.useState([]),[X,L]=o.useState([]),[ae,Y]=o.useState([]),[se,E]=o.useState([]),[be,ye]=o.useState([]),[Re,Ge]=o.useState([]),[we,ve]=o.useState([]);o.useState([{id:1,ten:"Hoạt động"},{id:0,ten:"Đã tắt"}]);const[Ae,W]=o.useState([]),[pe,je]=o.useState([]),[Pe,Se]=o.useState([]),[F,Me]=o.useState([]),[Ee,n]=o.useState([]),[a,r]=o.useState([]),[s,i]=o.useState([]),[f,u]=o.useState([]),[j,G]=o.useState([]),[V,p]=o.useState([]),[_,ee]=o.useState([]),[U,le]=o.useState([]),[fe,ce]=o.useState(!1),[de,Oe]=o.useState([]),[te,C]=o.useState([]),[N,ge]=o.useState([]),[Te,Ne]=o.useState(null),[B,oe]=o.useState(1),[w,ct]=o.useState(5),[z,ze]=o.useState(0),[nt,Ve]=o.useState(""),[dt,$e]=o.useState(""),[at,bt]=o.useState("success"),[Lt,ut]=o.useState(!1),Xe=()=>{Ve(""),ce(!1),Oe([]),C([]),oe(1),Ne(null)},jt=async()=>{const c=await sn(He);if(c.status_code===200){const h=c.data.flatMap($=>$.serialNumbers.map(I=>I.serialNumberId));C(h),Oe(h)}},qe=c=>{Ne(c),jt(),Be(c,nt,B,5),ce(!0)},Be=async(c,h,$,I)=>{const me=await an(c,h||"",$-1,I);me.status_code===200&&(ge(me.data.result),ze(me.data.meta.total),oe(me.data.meta.page+1))},vt=c=>{Oe(de),oe(c),Be(Te,nt,c,w)},R=c=>{const h=c.target.value;Ve(h.trim()),Be(Te,h,B,w)},_e=async()=>{(await rn({billCode:He,listSerialNumberId:de})).status_code===201&&($e("Cập nhập số lượng thành công"),bt("success"),ut(!0),ce(!1),Oe([]),Ve(""),oe(1),Ne(null),We())},Le=c=>{Oe(h=>h.includes(c)?h.filter($=>$!==c):[...h,c])};o.useEffect(()=>{rt(),pt()},[]),o.useEffect(()=>{const c=U.join(",");x(h=>({...h,trangThai:c}))},[U]),o.useEffect(()=>{const c=Ae.join(",");x(h=>({...h,nhuCau:c}))},[Ae]),o.useEffect(()=>{const c=pe.join(",");x(h=>({...h,thuongHieu:c}))},[pe]),o.useEffect(()=>{const c=Pe.join(",");x(h=>({...h,ram:c}))},[Pe]),o.useEffect(()=>{const c=Ee.join(",");x(h=>({...h,cpu:c}))},[Ee]),o.useEffect(()=>{const c=a.join(",");x(h=>({...h,vga:c}))},[a]),o.useEffect(()=>{const c=_.join(",");x(h=>({...h,banPhim:c}))},[_]),o.useEffect(()=>{const c=j.join(",");x(h=>({...h,manHinh:c}))},[j]),o.useEffect(()=>{const c=s.join(",");x(h=>({...h,webcam:c}))},[s]),o.useEffect(()=>{const c=V.join(",");x(h=>({...h,heDieuHanh:c}))},[V]),o.useEffect(()=>{const c=F.join(",");x(h=>({...h,mauSac:c}))},[F]),o.useEffect(()=>{const c=f.join(",");x(h=>({...h,oCung:c}))},[f]);const St=c=>{const h=c.target.value.toString().trim();P==="0"?x($=>({...$,tenSP:h,maSP:""})):P==="1"&&x($=>({...$,maSP:h,tenSP:""}))},[Ct,ht]=o.useState(0);o.useEffect(()=>{rt()},[H]);const rt=async()=>{const c=Object.entries(H).filter(([I,me])=>me!=="").map(([I,me])=>`${I}=${me}`).join("&"),h=y+c,$=await ke.get(h);D($.data.data),ht(parseInt($.data.totalElement))},pt=async()=>{const c=await ke.get("http://localhost:8080/api/nhu-cau/all-list"),h=await ke.get("http://localhost:8080/api/thuong-hieu/all-list"),$=await ke.get("http://localhost:8080/api/ram/all-list"),I=await ke.get("http://localhost:8080/api/mau-sac/all-list"),me=await ke.get("http://localhost:8080/api/cpu/all-list"),wt=await ke.get("http://localhost:8080/api/vga/all-list"),Pt=await ke.get("http://localhost:8080/api/webcam/all-list"),Tt=await ke.get("http://localhost:8080/api/o-cung/all-list"),st=await ke.get("http://localhost:8080/api/man-hinh/all-list"),_t=await ke.get("http://localhost:8080/api/he-dieu-hanh/all-list"),kt=await ke.get("http://localhost:8080/api/ban-phim/all-list");K(c.data.data),ue(h.data.data),d($.data.data),T(I.data.data),ne(me.data.data),L(wt.data.data),Y(Pt.data.data),E(Tt.data.data),ye(st.data.data),Ge(_t.data.data),ve(kt.data.data)};function ft(c){return String(c||"").replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,".")}const gt=[{id:"ma",label:"Mã",minWidth:70},{id:"sanPham",label:"Tên",minWidth:150},{id:"giaBan",label:"Giá bán",minWidth:100,align:"left",format:c=>ft(c)},{id:"hanhDong",label:"Hành động",minWidth:30,align:"center"}];return e.jsxs(e.Fragment,{children:[e.jsxs(Dn,{label:"Danh sách sản phẩm",children:[e.jsx("div",{style:{marginBottom:30},children:e.jsxs(Ke,{children:[e.jsxs("div",{style:{display:"flex",padding:10,paddingTop:20},children:[e.jsx(Qe,{sx:{maxHeight:"10px"},color:"secondary",onChange:St,id:"outlined-basic",label:"Nhập từ khóa",variant:"outlined"}),e.jsx("div",{style:{marginLeft:10,display:"flex",alignItems:"center"},children:e.jsx(Rn,{children:e.jsxs(An,{"aria-labelledby":"demo-controlled-radio-buttons-group",name:"controlled-radio-buttons-group",value:P,row:!0,onChange:k,children:[e.jsx(It,{value:"0",control:e.jsx(zt,{color:"secondary",size:"small"}),label:"Tên"}),e.jsx(It,{value:"1",control:e.jsx(zt,{color:"secondary",size:"small"}),label:"Mã"})]})})}),e.jsx("div",{onClick:S,style:{marginLeft:20,marginTop:10,marginRight:20},children:e.jsx(Yn,{color:"secondary",fontSize:"large"})})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap"},children:[e.jsx(Ie,{list:A,setListChecked:W,nameDropDown:"Nhu cầu"}),e.jsx(Ie,{list:Z,setListChecked:je,nameDropDown:"Thương hiệu"}),e.jsx(Ie,{list:he,setListChecked:Se,nameDropDown:"RAM"}),e.jsx(Ie,{list:M,setListChecked:n,nameDropDown:"CPU"}),e.jsx(Ie,{list:X,setListChecked:r,nameDropDown:"VGA"}),e.jsx(Ie,{list:be,setListChecked:G,nameDropDown:"Màn hình"}),e.jsx(Ie,{list:we,setListChecked:ee,nameDropDown:"Bàn phím"}),e.jsx(Ie,{list:se,setListChecked:u,nameDropDown:"Ổ cứng"}),e.jsx(Ie,{list:b,setListChecked:Me,nameDropDown:"Màu sắc"}),e.jsx(Ie,{list:Re,setListChecked:p,nameDropDown:"Hệ điều hành"}),e.jsx(Ie,{list:ae,setListChecked:i,nameDropDown:"Webcam"})]})]})},q),e.jsx(Ke,{sx:{width:"100%",overflow:"hidden"},children:e.jsx(Je,{sx:{maxHeight:440},children:e.jsxs(Ze,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(et,{children:e.jsxs(De,{children:[e.jsx(g,{style:{fontWeight:700},children:"STT"}),gt.map(c=>e.jsx(g,{align:c.align,style:{minWidth:c.minWidth,fontWeight:700},children:c.label},c.id))]})}),e.jsx(tt,{children:v.map((c,h)=>{const $=h+1;return e.jsxs(De,{hover:!0,role:"checkbox",tabIndex:-1,children:[e.jsx(g,{align:"center",children:$}),gt.map(I=>{const me=c[I.id];return I.id==="hanhDong"?(c.trangThai,e.jsx(g,{align:I.align,children:e.jsx(ie,{variant:"contained",color:"primary",onClick:()=>qe(c.id),children:"Chọn serial"})},I.id)):e.jsx(g,{align:I.align,children:I.id==="sanPham"?e.jsx(e.Fragment,{children:`${c.sanPham} [ ${c.ram} - ${c.cpu} - ${c.ocung} -  ${c.mauSac} ]`}):I.format?e.jsx(e.Fragment,{children:e.jsxs("strong",{children:[e.jsxs("span",{style:{color:"red"},children:[I.format(me)," "]})," VNĐ"]})}):me},I.id)})]},c.id)})})]})})})]}),e.jsxs(Ye,{open:fe,onClose:Xe,PaperProps:{style:{width:"700px"}},children:[e.jsx(Ue,{children:e.jsxs(xt,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx("span",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:"Danh sách serial"}),e.jsx(Qe,{variant:"outlined",size:"small",label:"Tìm kiếm",style:{marginRight:"16px"},onChange:R})]})}),e.jsxs(it,{children:[e.jsx(Je,{component:Ke,children:e.jsxs(Ze,{children:[e.jsx(et,{children:e.jsxs(De,{children:[e.jsx(g,{children:"Chọn"}),e.jsx(g,{children:"Mã"}),e.jsx(g,{children:"Trạng thái"})]})}),e.jsx(tt,{children:N.map(c=>e.jsxs(De,{children:[e.jsx(yt,{checked:de.includes(c.id),onChange:()=>Le(c.id),disabled:c.trangThai===1&&!de.includes(c.id)&&!te.includes(c.id)}),e.jsx(g,{children:c.ma}),e.jsx(g,{children:e.jsx(en,{label:c.trangThai==0?"Chưa bán":c.trangThai==1?"Đã bán":"Hủy",style:{backgroundColor:nn(c.trangThai),color:"#fff"},size:"small"})})]},c.id))})]})}),e.jsx(Mt,{sx:{marginTop:"10px",textAlign:"center"},count:Math.ceil(z/w),page:B,onChange:(c,h)=>vt(h)})]}),e.jsxs(lt,{children:[e.jsx(ie,{onClick:Xe,children:"Hủy"}),e.jsx(ie,{onClick:()=>{_e()},variant:"contained",color:"primary",children:"Xác nhận"})]})]})]})};function ha(re){const{bill:He,onReload:We}=re,{id:P}=Jt(),Ce=o.useRef(null),[k,q]=o.useState({}),[Fe,S]=o.useState(!1),[y,v]=o.useState(!1);o.useState([]);const[D,H]=o.useState([]),[x,A]=o.useState([]),[K,Z]=o.useState(!1),[ue,he]=o.useState(null),[d,b]=o.useState([]),[T,M]=o.useState([]),[ne,X]=o.useState([]),[L,ae]=o.useState(null),[Y,se]=o.useState(1),[E,be]=o.useState(5),[ye,Re]=o.useState(0),[Ge,we]=o.useState(""),[ve,Ae]=o.useState({ten:"",sdt:"",email:""}),[W,pe]=o.useState([]),[je,Pe]=o.useState(!1),[Se,F]=o.useState(1),[Me,Ee]=o.useState(0),[n,a]=o.useState(""),[r,s]=o.useState(!1),[i,f]=o.useState([]),[u,j]=o.useState(!1),[G,V]=o.useState(!0),[p,_]=o.useState(!0),[ee,U]=o.useState("0"),[le,fe]=o.useState("0"),[ce,de]=o.useState(""),[Oe,te]=o.useState(""),[C,N]=o.useState(""),ge=t=>{const l=t.target.checked;V(l),_e(m=>({...m,tienMat:l?1:null})),l||U("")},Te=t=>{const l=t.target.checked;_(l),_e(m=>({...m,chuyenKhoan:l?2:null})),t.target.checked||fe("")},[Ne,B]=o.useState(""),[oe,w]=o.useState("success"),[ct,z]=o.useState(!1),[ze,nt]=o.useState([]),[Ve,dt]=o.useState([]),[$e,at]=o.useState([]),[bt,Lt]=o.useState(null),[ut,Xe]=o.useState(null),[jt,qe]=o.useState(null),[Be,vt]=o.useState(!1),[R,_e]=o.useState({chuyenKhoan:2,tienMat:1,loaiHoaDon:0,ten:"",sdt:"",email:"",diaChi:"",tinh:"",tenTinh:"",huyen:"",tenHuyen:"",phuong:"",tenPhuong:"",ghiChu:"",ngayNhanHang:"",tienShip:"0"}),Le=t=>{const{name:l,value:m}=t.target;_e({...R,[l]:m})},St=t=>{t.target,vt(t.target.checked),_e(l=>({...l,loaiHoaDon:Be?0:1}))};console.log("Loại hóa đơn : ",R);const Ct=()=>{z(!1)},ht=t=>{j(!0)},rt=()=>{j(!1),U("0"),fe("0"),de(""),te(""),N("")},pt=(t,l)=>{const m=t.target.value.replace(/\./g,"");if(isNaN(m)||Number(m)<=0){l==="cash"?(de("Số tiền không hợp lệ"),U(m)):l==="transfer"&&(te("Số tiền không hợp lệ"),fe(m));return}if(parseFloat(m)<0){l==="cash"?(de("Số tiền không được âm"),U(m)):l==="transfer"&&(te("Số tiền không được âm"),fe(m));return}let Q=ee,xe=le;l==="cash"?(Q=m,U(m),de("")):l==="transfer"&&(xe=m,fe(m),te(""));const ot=Math.round(parseFloat((k==null?void 0:k.tongTienPhaiTra)||0));console.log("TTT : ",ot),parseFloat(Q||0)+parseFloat(xe||0)>=ot?N(""):N("Tổng số tiền phải lớn hơn hoặc bằng tổng tiền phải trả")};function ft(t){return String(t||"").replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,".")}const gt=()=>{R.chuyenKhoan==null&&R.tienMat==null&&(B("Bạn chưa chọn phương thức thanh toán"),w("error"),z(!0))},c=async()=>{try{(await In(P,R)).status_code===201&&(B("Xác nhận thanh toán thành công thành công"),w("success"),z(!0),q({}),Ae({}),Pn())}catch(t){B(t.response.data.message),w("error"),z(!0)}},h=async()=>{const t=await sn(P);if(t.status_code===200){H(t.data);const l=t.data.flatMap(m=>m.serialNumbers.map(Q=>Q.serialNumberId));M(l),b(l)}},$=async(t,l)=>{(await $n(t,l)).status_code===200&&(h(),I(),B("Xóa sản phẩm khoải hóa đơn thành công"),w("success"),z(!0))},I=async()=>{var l,m,Q;const t=await tn(P);t.status_code===200&&(q(t.data),Ae({ten:t.data.tenKhachHang,sdt:t.data.sdt,email:t.data.email,diaChi:t.data.diaChi}),_e({chuyenKhoan:2,tienMat:1,loaiHoaDon:Be?1:0,ten:t.data.tenKhachHang,sdt:t.data.sdt,email:t.data.email,diaChi:t.data.diaChi,tinh:((l=t.data)==null?void 0:l.tinh)||"",tenTinh:"",huyen:((m=t.data)==null?void 0:m.huyen)||"",tenHuyen:"",phuong:((Q=t.data)==null?void 0:Q.phuong)||"",tenPhuong:"",ghiChu:"",ngayNhanHang:"",tienShip:"0"}))};console.log("Orde : ",R),o.useEffect(()=>{h(),P&&I()},[Fe,P]);const me=()=>{v(!1)},wt=()=>{v(!y)},Pt=t=>{const l=t.serialNumbers.map(m=>m.serialNumberId);$(P,l),I()},Tt=async()=>{const t=await zn();t.code===200&&A(t.data)};o.useEffect(()=>{Tt()},[P]);const st=async(t,l,m,Q)=>{const xe=await an(t,l||"",m-1,Q);xe.status_code===200&&(X(xe.data.result),Re(xe.data.meta.total),se(xe.data.meta.page+1))},_t=t=>{b(d),se(t),st(L,Ge,t,E)},kt=t=>{const l=t.target.value;we(l.trim()),st(L,l,Y,E)},cn=async()=>{(await rn({billCode:P,listSerialNumberId:d})).status_code===201&&(B("Cập nhập số lượng sản phẩm thành công"),w("success"),z(!0),Z(!1),b([]),we(""),se(1),ae(null),he(null),h(),I())},dn=t=>{b(l=>l.includes(t)?l.filter(m=>m!==t):[...l,t])},Dt=t=>{ae(t),h(),st(t,Ge,Y,5),Z(!0)},Wt=()=>{we(""),Z(!1),b([]),M([]),se(1),ae(null),he(null)},Rt=async t=>{try{const l=await Gn(n,t-1);l&&(pe(l.content),Ee(l.totalPages))}catch{B("Api khách hàng lỗi"),w("error"),z(!0)}},un=t=>{const{value:l}=t.target;a(l.trim()),Rt(Se)},Ft=async t=>{try{const l=await Hn(t,P);l.status_code&&(B("Thêm khách hàng thành công"),w("success"),z(!0),Ae({ten:l.data.tenKhachHang,sdt:l.data.sdt,email:l.data.email}),_e(m=>({...m,ten:l.data.tenKhachHang,sdt:l.data.sdt,email:l.data.email})),I(),Gt(),At())}catch{B("Thêm khách hàng thất bại"),w("error"),z(!0)}},hn=async t=>{try{const l=await Vn(t);l.status_code===200?(B("Thêm khách hàng thành công"),w("success"),z(!0),Ft(l.data.id,P),Ae({ten:l.data.ten,sdt:l.data.sdt,email:l.data.email})):(B("Không tìm thấy khách hàng với số điện thoại này !"),w("error"),z(!0))}catch{B("Không tìm thấy khách hàng với số điện thoại này !"),w("error"),z(!0)}},pn=t=>{t.preventDefault();const m=new FormData(t.target).get("sdt");hn(m.trim())},fn=t=>{F(t),Rt(t)},gn=t=>{Pe(!0),Rt(Se)},At=()=>{Pe(!1),pe([])},mn=async()=>{try{const t=await Fn(k.ma);t.status_code===200&&f(t.data)}catch{B("Api phiếu giảm giá lỗi"),w("error"),z(!0)}},xn=async t=>{try{(await Mn(t,P)).status_code===201&&(B("Thêm phiếu giảm giá thành công"),w("success"),z(!0),I(),Et())}catch{response.status_code===201&&(B("Thêm phiếu giảm giá thất bại"),w("error"),z(!0))}},yn=async t=>{try{const l=await On(t,P);l.status_code===201&&(l.status_code===201?(B("Thêm phiếu giảm giá thành công"),w("success"),z(!0),I(),Ce.current&&(Ce.current.value="")):alert("Thêm thất bại"))}catch{B("Thêm phiếu giảm giá thất bại"),w("error"),z(!0)}},bn=t=>{t.preventDefault();const m=new FormData(t.target).get("maPGG");yn(m.trim())},jn=t=>{s(!0),mn()},Et=()=>{s(!1),f([])},Gt=async()=>{const t=await qn();if(nt(t.data),R!=null&&R.huyen){const l=await qt(R.tinh);dt(l.data),Xe(""),qe(""),at([])}if(R!=null&&R.huyen){const l=await Kt(R.huyen);at(l.data),qe("")}};o.useEffect(()=>{Gt()},[R.tinh]),console.log("TP Tỉnh : ",ze),console.log("Quận Huyện  : ",Ve),console.log("Xã phường  : ",$e);const vn=async t=>{Le(t);const l=t.target.value;Lt(l);const m=ze.find(xe=>xe.ProvinceID===parseInt(l));_e(xe=>({...xe,tinh:l,tenTinh:m?m.ProvinceName:"",phuong:"",huyen:""}));const Q=await qt(l);dt(Q.data),Xe(""),qe(""),at([])},Sn=async t=>{Le(t);const l=t.target.value;Xe(l);const m=Ve.find(xe=>xe.DistrictID===parseInt(l));_e(xe=>({...xe,huyen:l,tenHuyen:m?m.DistrictName:""}));const Q=await Kt(l);at(Q.data),qe("")},Cn=t=>{Le(t);const l=t.target.value;qe(l);const m=$e.find(Q=>Q.WardCode===l);_e(Q=>({...Q,phuong:l,tenPhuong:m?m.WardName:""})),wn(ut,t.target.value)},wn=async(t,l)=>{const m=await Kn(t,l),Q=await Xn(t,l),ot=new Date(m.data.leadtime*1e3).toISOString().slice(0,19).replace("T"," ");_e(Vt=>({...Vt,ngayNhanHang:ot,tienShip:Q.data.total})),console.log("DATA 2 : ",m),console.log("Ngày nhận hàng : ",ot),console.log("DATA 3 : ",Q),console.log("Giá ship : ",Q.data.total)};console.log("1 P : ",bt),console.log("2 D : ",ut),console.log("1 W : ",jt);const Pn=()=>{typeof We=="function"?We():console.error("onReload is not a function")},Tn=()=>{h(),I()};return e.jsxs(e.Fragment,{children:[e.jsxs(O,{container:!0,spacing:2,padding:2,sx:{backgroundColor:"white",marginTop:5,borderRadius:4},children:[e.jsx(O,{container:!0,spacing:2,children:e.jsxs(O,{item:!0,xs:12,container:!0,justifyContent:"space-between",alignItems:"center",children:[e.jsx(J,{variant:"h3",children:"Giỏ hàng"}),e.jsx(ie,{variant:"contained",color:"warning",onClick:wt,disabled:!P,children:"Thêm sản phẩm"})]})}),e.jsx(En,{sx:{marginY:2}}),e.jsx(Je,{component:Ke,sx:{width:"100%"},children:e.jsxs(Ze,{"aria-label":"simple table",children:[e.jsx(et,{children:e.jsxs(De,{children:[e.jsx(g,{children:"Ảnh"}),e.jsx(g,{children:"Mã SP"}),e.jsx(g,{children:"Tên sản phẩm"}),e.jsx(g,{children:"Số lượng"}),e.jsx(g,{children:"Thành tiền"}),e.jsx(g,{children:"Serial"}),e.jsx(g,{children:"Hành động"})]})}),e.jsx(tt,{children:D.map(t=>e.jsxs(De,{children:[e.jsx(g,{children:e.jsx("img",{src:"https://via.placeholder.com/50",alt:"Product",width:"50"})}),e.jsx(g,{children:t.productDetailCode}),e.jsxs(g,{children:[t.productName," ",e.jsx("br",{}),e.jsxs("strong",{style:{color:"red"},children:[parseInt(t.price).toLocaleString()," VNĐ"]})]}),e.jsx(g,{children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(Ht,{onClick:()=>Dt(t.productDetailId),children:e.jsx(ta,{})}),e.jsx(Qe,{type:"number",value:t.quantity,onChange:l=>Dt(t.productDetailId),inputProps:{min:0},sx:{width:50,height:30,"& .MuiInputBase-input":{padding:"5px 10px"}}}),e.jsx(Ht,{onClick:()=>Dt(t.productDetailId),children:e.jsx(ea,{})})]})}),e.jsx(g,{children:e.jsxs("strong",{style:{color:"red"},children:[parseInt(t.quantity*t.price).toLocaleString()," VNĐ"]})}),e.jsx(g,{children:e.jsx("strong",{children:t.serialNumbers.map((l,m)=>e.jsxs("span",{children:[l.serialNumberCode,m<t.serialNumbers.length-1&&", "]},l.serialNumberId))})}),e.jsx(g,{children:e.jsx(ie,{sx:{color:"white",backgroundColor:"red","&:hover":{backgroundColor:"darkred"}},onClick:()=>Pt(t),children:"Hủy"})})]},t.id))})]})}),e.jsx(O,{container:!0,justifyContent:"end",alignItems:"center",mt:2,children:e.jsxs(J,{variant:"h4",children:["Tổng tiền : ",e.jsxs("strong",{style:{color:"red"},children:[" ",parseInt(k.tongTienBanDau||0).toLocaleString()||"0"," "]})," VNĐ"]})})]}),e.jsx(e.Fragment,{children:e.jsxs(O,{container:!0,spacing:2,padding:2,sx:{backgroundColor:"white",marginTop:5,borderRadius:4},children:[e.jsxs(O,{container:!0,justifyContent:"space-between",alignItems:"center",children:[e.jsx(J,{variant:"h3",children:"Khách hàng"}),e.jsx(ie,{variant:"contained",color:"primary",onClick:()=>{gn()},disabled:!P,children:"Chọn khách hàng"})]}),e.jsxs(O,{container:!0,spacing:2,paddingY:2,borderBottom:1,borderColor:"grey.300",children:[e.jsx(O,{item:!0,xs:6,children:e.jsxs(J,{variant:"subtitle1",children:["Tên khách hàng : ",ve.ten]})}),e.jsx(O,{item:!0,xs:6,children:e.jsxs(J,{variant:"subtitle1",children:["Email : ",ve.email]})})]}),e.jsxs(O,{container:!0,spacing:2,paddingY:2,children:[e.jsx(O,{item:!0,xs:6,children:e.jsxs(J,{variant:"subtitle1",sx:{display:"flex",alignItems:"center"},children:["Số điện thoại :",e.jsx("form",{onSubmit:pn,style:{width:"70%",marginLeft:"5px"},children:e.jsx("input",{type:"text",placeholder:"Số điện thoại",name:"sdt",defaultValue:ve.sdt,style:{width:"50%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"}})})]})}),e.jsx(O,{item:!0,xs:6,children:e.jsxs(J,{variant:"subtitle1",children:["Địa chỉ : ",ve.diaChi]})})]})]})}),e.jsxs(O,{container:!0,spacing:2,padding:2,sx:{backgroundColor:"white",marginTop:5,borderRadius:4},children:[e.jsx(O,{item:!0,xs:8,children:e.jsx(J,{variant:"h3",children:"Thông tin đơn hàng "})}),e.jsx(O,{item:!0,xs:4,children:e.jsx(xt,{display:"flex",justifyContent:"end",children:e.jsx(ie,{variant:"contained",color:"primary",sx:{marginLeft:2,padding:1},onClick:()=>{ht()},disabled:!P,children:"Tiến hành thanh toán"})})}),e.jsx(O,{mt:2,item:!0,xs:12,sx:{borderTop:1}}),e.jsx(O,{item:!0,xs:8,children:Be&&P?e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"16px"},children:[e.jsx("div",{style:{flex:"0 0 32%"},children:e.jsx("input",{type:"text",name:"ten",value:R.ten,placeholder:"Họ và Tên",onChange:Le,style:{width:"100%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"}})}),e.jsx("div",{style:{flex:"0 0 32%"},children:e.jsx("input",{type:"text",name:"sdt",value:R.sdt,placeholder:"Số điện thoại",onChange:Le,style:{width:"100%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"}})}),e.jsx("div",{style:{flex:"0 0 32%"},children:e.jsx("input",{type:"text",name:"email",value:R.email,placeholder:"Email",onChange:Le,style:{width:"100%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"}})}),e.jsx("div",{style:{flex:"0 0 100%"},children:e.jsx("input",{type:"text",name:"diaChi",value:R.diaChi,placeholder:"Địa chỉ",onChange:Le,style:{width:"100%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"}})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px",width:"100%"},children:[e.jsx("div",{style:{width:"32%"},children:e.jsxs("select",{id:"province",name:"province",value:R.tinh,onChange:vn,style:{width:"100%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"},children:[e.jsx("option",{value:"",disabled:!0,selected:!0,children:"Chọn Tỉnh/Thành Phố"}),ze.map(t=>e.jsx("option",{value:t.ProvinceID,children:t.ProvinceName},t.ProvinceID))]})}),e.jsx("div",{style:{width:"32%"},children:e.jsxs("select",{id:"district",name:"district",value:R.huyen,onChange:Sn,disabled:!R.tinh,style:{width:"100%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"},children:[e.jsx("option",{value:"",disabled:!0,selected:!0,children:"Chọn Quận/Huyện"}),Ve.map(t=>e.jsx("option",{value:t.DistrictID,children:t.DistrictName},t.DistrictID))]})}),e.jsx("div",{style:{width:"32%"},children:e.jsxs("select",{id:"ward",name:"ward",value:R.phuong,disabled:!R.huyen,onChange:Cn,style:{width:"100%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"},children:[e.jsx("option",{value:"",disabled:!0,selected:!0,children:"Chọn Phường/Xã"}),$e.map(t=>e.jsx("option",{value:t.WardCode,children:t.WardName},t.WardCode))]})})]}),e.jsx("div",{style:{flex:"0 0 100%"},children:e.jsx("textarea",{name:"ghiChu",value:R.ghiChu,placeholder:"Ghi chú",onChange:Le,style:{width:"100%",border:"1px solid grey",minHeight:"80px",padding:"10px",borderRadius:"4px"}})}),e.jsxs("div",{style:{flex:"0 0 100%",display:"flex",alignItems:"center",marginTop:"16px"},children:[e.jsx("img",{src:"https://ghn.vn/img/logo_ghn.png",alt:"GHN Logo",style:{width:"100px",marginRight:"10px"}}),e.jsxs("span",{children:["Thời gian nhận hàng dự kiến: ",e.jsx("strong",{children:R.ngayNhanHang})," "]}),e.jsx("br",{})]})]}):e.jsx(e.Fragment,{})}),e.jsxs(O,{item:!0,xs:4,children:[e.jsxs(xt,{display:"flex",alignItems:"center",sx:{flexDirection:{xs:"column",sm:"row"}},children:[e.jsx(ie,{variant:"contained",color:"warning",size:"small",sx:{padding:1,borderRadius:3,mr:2},onClick:()=>{jn()},disabled:!P,children:"Chọn Mã Giảm Giá :"}),e.jsx("form",{onSubmit:bn,children:e.jsx("input",{type:"text",placeholder:"Mã Giảm Giá",name:"maPGG",style:{width:"80%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"},ref:Ce})})," "]}),e.jsx(It,{disabled:!P,control:e.jsx(Un,{checked:Be,onChange:St,color:"primary"}),label:Be?"Giao hàng":"Tại quầy"}),e.jsxs(J,{mt:1,variant:"h4",children:["Tổng tiền hàng: ",parseFloat(k.tongTienBanDau||0).toLocaleString()||"0"," VNĐ"]}),e.jsxs(J,{mt:1,variant:"h4",children:["Phiếu giảm giá : ",k.maPGG||""]}),e.jsxs(J,{mt:1,variant:"h4",children:["Giảm giá: ",parseFloat(k.giaTriPhieuGiamGia||0).toLocaleString()||"0"," ",k.loaiPGG===1?"%":"VNĐ"]}),Be&&e.jsxs(J,{mt:1,variant:"h4",children:["Tiền ship: ",parseFloat(R.tienShip||0).toLocaleString()||"0"," VNĐ"]}),e.jsxs(J,{mt:1,variant:"h4",fontWeight:"bold",color:"error",children:["Khách cần trả: ",parseFloat(k.tongTienPhaiTra||0).toLocaleString()||"0"," VNĐ"]}),e.jsxs(J,{mt:1,variant:"h4",fontWeight:"bold",children:["Tiền thừa:"," "]}),e.jsx(ie,{variant:"contained",color:"primary",onClick:()=>{c(),ht()},disabled:!P,children:"Xác nhận thanh toán"})]})]}),e.jsxs(Ye,{open:y,onClose:me,maxWidth:"xl",fullWidth:!0,children:[e.jsxs(Ue,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(J,{variant:"h3",children:"Danh sách sản phẩm"}),e.jsx(ie,{onClick:me,children:"Đóng"})]}),e.jsx(ua,{onLoading:Tn,selectedRowsInBill:d})]}),e.jsxs(Ye,{open:K,onClose:Wt,PaperProps:{style:{width:"700px"}},children:[e.jsx(Ue,{children:e.jsxs(xt,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx("span",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:"Danh sách serial"}),e.jsx(Qe,{variant:"outlined",size:"small",label:"Tìm kiếm",style:{marginRight:"16px"},onChange:kt})]})}),e.jsxs(it,{children:[e.jsx(Je,{component:Ke,children:e.jsxs(Ze,{children:[e.jsx(et,{children:e.jsxs(De,{children:[e.jsx(g,{children:"Chọn"}),e.jsx(g,{children:"Mã"}),e.jsx(g,{children:"Trạng thái"})]})}),e.jsx(tt,{children:ne.map(t=>e.jsxs(De,{children:[e.jsx(yt,{checked:d.includes(t.id),onChange:()=>dn(t.id),disabled:t.trangThai===1&&!d.includes(t.id)&&!T.includes(t.id)}),e.jsx(g,{children:t.ma}),e.jsx(g,{children:e.jsx(en,{label:t.trangThai==0?"Chưa bán":t.trangThai==1?"Đã bán":"Hủy",style:{backgroundColor:nn(t.trangThai),color:"#fff"},size:"small"})})]},t.id))})]})}),e.jsx(Mt,{sx:{marginTop:"10px",textAlign:"center"},count:Math.ceil(ye/E),page:Y,onChange:(t,l)=>_t(l)})]}),e.jsxs(lt,{children:[e.jsx(ie,{onClick:Wt,children:"Hủy"}),e.jsx(ie,{onClick:()=>{cn()},variant:"contained",color:"primary",children:"Xác nhận"})]})]}),e.jsxs(Ye,{open:je,onClose:At,maxWidth:"md",fullWidth:!0,children:[e.jsx(Ue,{children:"Danh sách khách hàng"}),e.jsxs(it,{children:[e.jsx("input",{type:"text",name:"search",placeholder:"Tìm theo mã , tên , sđt , email",onChange:un,style:{width:"100%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"}}),e.jsx(Je,{component:Ke,style:{maxHeight:"500px"},children:e.jsxs(Ze,{stickyHeader:!0,children:[e.jsx(et,{children:e.jsxs(De,{children:[e.jsx(g,{}),e.jsx(g,{children:"Họ và tên"}),e.jsx(g,{children:"SDT"}),e.jsx(g,{children:"Email"}),e.jsx(g,{children:"Hành động"})]})}),e.jsx(tt,{style:{maxHeight:"300px",overflowY:"auto"},children:W.map(t=>e.jsxs(De,{children:[e.jsx(g,{}),e.jsx(g,{children:`${t.ho?t.ho:""} ${t.ten?t.ten:""}`.trim()||"N/A"}),e.jsx(g,{children:t.sdt}),e.jsx(g,{children:t.email?t.email:"N/A"}),e.jsxs(g,{children:[" ",e.jsx(ie,{onClick:()=>{Ft(t.id)},variant:"contained",color:"primary",disabled:(k==null?void 0:k.idKhachHang)===!1||k.idKhachHang===t.id,children:"Chọn"})]})]},t.id))})]})})]}),e.jsx(Mt,{sx:{marginTop:"10px",textAlign:"center"},count:Me,page:Se,onChange:(t,l)=>fn(l)}),e.jsx(lt,{children:e.jsx(ie,{onClick:At,color:"primary",children:"Đóng"})})]}),e.jsxs(Ye,{open:r,onClose:Et,maxWidth:"md",fullWidth:!0,children:[e.jsx(Ue,{children:"Danh sách khách hàng"}),e.jsx(it,{children:e.jsx(Je,{component:Ke,style:{maxHeight:"500px"},children:e.jsxs(Ze,{stickyHeader:!0,children:[e.jsx(et,{children:e.jsxs(De,{children:[e.jsx(g,{}),e.jsx(g,{children:"Mã phiếu"}),e.jsx(g,{children:"Giá trị "}),e.jsx(g,{children:"Giá trị đối đa "}),e.jsx(g,{children:"Số lượng"}),e.jsx(g,{children:"Hành động"})]})}),e.jsx(tt,{style:{maxHeight:"300px",overflowY:"auto"},children:i.map(t=>e.jsxs(De,{children:[e.jsx(g,{}),e.jsxs(g,{children:[t.ma," "]}),e.jsxs(g,{children:[parseInt(t.giaTriGiamGia||0).toLocaleString()||"0"," ",t.loaiGiamGia===1?"%":"VNĐ"]}),e.jsxs(g,{children:[parseInt(t.giamToiDa||0).toLocaleString()||"0"," VNĐ "]}),e.jsx(g,{children:t.soLuong}),e.jsx(g,{children:e.jsx(ie,{onClick:()=>{xn(t.id)},variant:"contained",color:"primary",disabled:k.idPhieuGiamGia===t.id,children:"Chọn"})})]},t.id))})]})})}),e.jsx(lt,{children:e.jsx(ie,{onClick:Et,color:"primary",children:"Đóng"})})]}),e.jsxs(Ye,{open:u,onClose:rt,maxWidth:"sm",fullWidth:!0,children:[e.jsx(Ue,{children:"Thanh toán"}),e.jsx(it,{children:e.jsxs(O,{container:!0,spacing:2,sx:{paddingTop:2},children:[G&&e.jsx(O,{item:!0,xs:12,children:e.jsx(Qe,{label:"Số tiền mặt",fullWidth:!0,variant:"outlined",value:ft(ee),onChange:t=>pt(t,"cash"),error:!!ce,helperText:ce})}),p&&e.jsx(O,{item:!0,xs:12,children:e.jsx(Qe,{label:"Số tiền chuyển khoản",fullWidth:!0,variant:"outlined",value:ft(le),onChange:t=>pt(t,"transfer"),error:!!Oe,helperText:Oe})}),C&&e.jsx(O,{item:!0,xs:12,children:e.jsx(J,{color:"error",children:C})}),e.jsxs(O,{item:!0,xs:6,children:[e.jsx(yt,{checked:G,onChange:ge,color:"primary"}),e.jsx(J,{children:"Tiền mặt"})]}),e.jsxs(O,{item:!0,xs:6,children:[e.jsx(yt,{checked:p,onChange:Te,color:"primary"}),e.jsx(J,{children:"Chuyển khoản"})]}),e.jsx(O,{item:!0,xs:12,children:e.jsx(J,{variant:"h6",align:"right",color:"error",children:`${parseInt((k==null?void 0:k.tongTienPhaiTra)||0).toLocaleString("vi-VN")} VNĐ`})}),e.jsxs(O,{item:!0,xs:12,children:[e.jsxs(J,{variant:"h6",children:["Khách thanh toán:",e.jsx("span",{style:{color:"red",float:"right"},children:`${parseFloat((k==null?void 0:k.tongTienPhaiTra)||0).toLocaleString("vi-VN",{style:"currency",currency:"VND"})}`})]}),e.jsxs(J,{variant:"h6",children:["Tiền thừa:",e.jsxs("span",{style:{color:"blue",float:"right"},children:[`${(parseFloat(ee||"0")+parseFloat(le||"0")-parseFloat((k==null?void 0:k.tongTienPhaiTra)||"0")).toLocaleString("vi-VN",{style:"currency",currency:"VND"})}`,"VND"]})]})]})]})}),e.jsxs(lt,{children:[e.jsx(ie,{onClick:rt,color:"error",children:"Huỷ"}),e.jsx(ie,{variant:"contained",color:"primary",onClick:gt,children:"Xác nhận"})]})]}),e.jsx(Qn,{open:ct,autoHideDuration:2e3,onClose:Ct,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(Jn,{onClose:Ct,variant:"filled",severity:oe,sx:{width:"100%"},children:Ne})})]})}function Wa(){const re=Zt(),[He,We]=o.useState({}),[P,Ce]=o.useState([]),[k,q]=o.useState(null);o.useState(!1);const Fe=async()=>{const x=await la();x.status_code===200&&Ce(x.data)};o.useEffect(()=>{Fe(),re("/ban-hang")},[]);const S=async x=>{const A=await tn(x);A.status_code===200&&(We(A.data),console.log("CAlll APi"))},y=(x,A)=>{q(A),re(`/ban-hang/hoa-don/${P[A]}`),console.log("Code : ",P[A]),P[A]&&S(P[A])},v=async x=>{if(console.log("DATA : ",x),x)try{if((await ca(x)).status_code===204){const K=P.filter(Z=>Z!==x);if(Ce(K),Nt.success($t.DELETED),K.length>0){const Z=k>=K.length?K.length-1:k;q(Z),re(`/ban-hang/hoa-don/${K[Z]}`)}else q(null),re("/ban-hang")}}catch{Nt.error("Có lỗi xảy ra khi xóa hóa đơn")}},D=async()=>{const x=await Bn();x.status_code===201&&(Ce(A=>[x.data.ma,...A]),q(0),re(`/ban-hang/hoa-don/${x.data.ma}`),Nt.success($t.CREATED))},H=()=>{Fe(),q(null),re("/ban-hang")};return e.jsx(e.Fragment,{children:e.jsxs(mt,{children:[e.jsx(mt,{sx:{borderBottom:1,borderColor:"divider",marginTop:2},children:e.jsxs(Zn,{value:k,onChange:y,variant:"scrollable",scrollButtons:"auto",children:[P.map((x,A)=>e.jsx(Xt,{label:e.jsxs(mt,{sx:{display:"flex",alignItems:"center"},children:[x,e.jsx(ln,{fontSize:"small",sx:{marginLeft:1}}),e.jsx(Ht,{onClick:()=>v(x),size:"small",children:e.jsx(on,{fontSize:"small"})})]})},x)),e.jsx(Xt,{label:e.jsx(mt,{sx:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",padding:"10px",height:"30px",width:"30px",border:"2px solid #697586"},children:e.jsx(Nn,{onClick:()=>D(),sx:{fontSize:30}})})})]})}),e.jsx(ha,{bill:He,onReload:H})]})})}export{Wa as default};
