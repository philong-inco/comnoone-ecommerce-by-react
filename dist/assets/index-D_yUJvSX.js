import{h as _t,j as e,ae as kt,af as Dt,r as c,aj as ln,b6 as cn,aW as dn,aa as hn,G as A,T as L,Z as oe,ac as un,V as Be,I as lt,N as Oe,a7 as pn,a2 as fn,a4 as gn,B as Ue}from"./index-fYug5RY9.js";import{d as mn}from"./Add-Cg9FrFZF.js";import{b as ct,p as xn,d as yn,e as jn,f as bn,c as vn}from"./billService-LlXhP-gl.js";import{g as Cn,d as wn}from"./request-DhSMy2hf.js";import{B as ot}from"./react-toastify.esm-BwM67r7P.js";import{N as St}from"./notification-B40vY8uZ.js";import{g as Sn}from"./couponsService-B3OSZgzs.js";import{f as Tn,e as Pn}from"./customerService-B6jiC7Y6.js";import{g as _n,d as kn,a as Dn,c as An,f as En,h as Nn,i as Rn,j as In,k as Mn,e as Bn,b as On}from"./index-q5IvOk17.js";import{T as Le,a as He,b as Ge,c as ve,d as Fe}from"./TableRow-BYlKwEaj.js";import{T as l}from"./TableCell-D8S_yL8v.js";import{B as st}from"./Box-C_cA42lp.js";import{S as Ln}from"./Switch-ww2Ii2YT.js";import{a as We,c as Ke,b as $e,D as Qe}from"./DialogTitle-DfESKbom.js";import{C as it}from"./Checkbox-BqbNCbCc.js";import{P as Tt}from"./Pagination-Jly5gDAz.js";import{S as Hn,A as Gn}from"./Snackbar-BAUCtsSe.js";import{T as Fn,a as Pt}from"./Tabs-CQt4FbLl.js";import"./LastPage-Brqnpezw.js";import"./Close-xbaa0MAg.js";import"./KeyboardArrowRight-DhUyWrK4.js";const Wn=_t(e.jsx("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutline"),Kn=_t(e.jsx("path",{d:"M7 11v2h10v-2zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"RemoveCircleOutline");var dt={},$n=Dt;Object.defineProperty(dt,"__esModule",{value:!0});var At=dt.default=void 0,Vn=$n(kt()),qn=e;At=dt.default=(0,Vn.default)((0,qn.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var ht={},zn=Dt;Object.defineProperty(ht,"__esModule",{value:!0});var Et=ht.default=void 0,Xn=zn(kt()),Yn=e;Et=ht.default=(0,Xn.default)((0,Yn.jsx)("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2M1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2"}),"ShoppingCart");const Un=async()=>{try{return await Cn("sell/bill-codes")}catch(E){throw console.error("Error fetching sell get bill codes:",E),E}},Qn=async E=>{try{return await wn(`sell/delete/${E}`)}catch(Z){throw console.error("Error delete bill by code:",Z),Z}};var Nt={exports:{}};(function(E,Z){(function(I,C){E.exports=C(c,ln)})(typeof self<"u"?self:cn,function(I,C){return function(){var W={328:function(j,p,m){Object.defineProperty(p,"__esModule",{value:!0}),p.PrintContextConsumer=p.PrintContext=void 0;var b=m(496),M=Object.prototype.hasOwnProperty.call(b,"createContext");p.PrintContext=M?b.createContext({}):null,p.PrintContextConsumer=p.PrintContext?p.PrintContext.Consumer:function(){return null}},428:function(j,p,m){Object.defineProperty(p,"__esModule",{value:!0}),p.ReactToPrint=void 0;var b=m(316),M=m(496),P=m(190),D=m(328),z=m(940),X=function(ie){function le(){var d=ie.apply(this,b.__spreadArray([],b.__read(arguments),!1))||this;return d.startPrint=function(x){var _=d.props,B=_.onAfterPrint,J=_.onPrintError,K=_.print,H=_.documentTitle;setTimeout(function(){var Y,U;if(x.contentWindow)if(x.contentWindow.focus(),K)K(x).then(function(){return B==null?void 0:B()}).then(function(){return d.handleRemoveIframe()}).catch(function(ue){J?J("print",ue):d.logMessages(["An error was thrown by the specified `print` function"])});else{if(x.contentWindow.print){var fe=(U=(Y=x.contentDocument)===null||Y===void 0?void 0:Y.title)!==null&&U!==void 0?U:"",N=x.ownerDocument.title;H&&(x.ownerDocument.title=H,x.contentDocument&&(x.contentDocument.title=H)),x.contentWindow.print(),H&&(x.ownerDocument.title=N,x.contentDocument&&(x.contentDocument.title=fe))}else d.logMessages(["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."]);B==null||B(),d.handleRemoveIframe()}else d.logMessages(["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/gregnb/react-to-print/issues/"])},500)},d.triggerPrint=function(x){var _=d.props,B=_.onBeforePrint,J=_.onPrintError;if(B){var K=B();K&&typeof K.then=="function"?K.then(function(){d.startPrint(x)}).catch(function(H){J&&J("onBeforePrint",H)}):d.startPrint(x)}else d.startPrint(x)},d.handlePrint=function(x){var _=d.props,B=_.bodyClass,J=_.content,K=_.copyStyles,H=_.fonts,Y=_.pageStyle,U=_.nonce,fe=typeof x=="function"?x():null;if(fe&&typeof J=="function"&&d.logMessages(['"react-to-print" received a `content` prop and a content param passed the callback return by `useReactToPrint. The `content` prop will be ignored.'],"warning"),fe||typeof J!="function"||(fe=J()),fe!==void 0)if(fe!==null){var N=document.createElement("iframe");N.width="".concat(document.documentElement.clientWidth,"px"),N.height="".concat(document.documentElement.clientHeight,"px"),N.style.position="absolute",N.style.top="-".concat(document.documentElement.clientHeight+100,"px"),N.style.left="-".concat(document.documentElement.clientWidth+100,"px"),N.id="printWindow",N.srcdoc="<!DOCTYPE html>";var ue=(0,P.findDOMNode)(fe);if(ue){var ee=ue.cloneNode(!0),ge=ee instanceof Text,Ae=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),Ce=ge?[]:ee.querySelectorAll("img"),Se=ge?[]:ee.querySelectorAll("video"),Ee=H?H.length:0;d.numResourcesToLoad=Ae.length+Ce.length+Se.length+Ee,d.resourcesLoaded=[],d.resourcesErrored=[];var O=function(me,ye){d.resourcesLoaded.includes(me)?d.logMessages(["Tried to mark a resource that has already been handled",me],"debug"):(ye?(d.logMessages(b.__spreadArray(['"react-to-print" was unable to load a resource but will continue attempting to print the page'],b.__read(ye),!1)),d.resourcesErrored.push(me)):d.resourcesLoaded.push(me),d.resourcesLoaded.length+d.resourcesErrored.length===d.numResourcesToLoad&&d.triggerPrint(N))};N.onload=function(){var me,ye,Te,Pe;N.onload=null;var $=N.contentDocument||((ye=N.contentWindow)===null||ye===void 0?void 0:ye.document);if($){$.body.appendChild(ee),H&&(!((Te=N.contentDocument)===null||Te===void 0)&&Te.fonts&&(!((Pe=N.contentWindow)===null||Pe===void 0)&&Pe.FontFace)?H.forEach(function(se){var k=new FontFace(se.family,se.source,{weight:se.weight,style:se.style});N.contentDocument.fonts.add(k),k.loaded.then(function(){O(k)}).catch(function(v){O(k,["Failed loading the font:",k,"Load error:",v])})}):(H.forEach(function(se){return O(se)}),d.logMessages(['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'])));var ke=typeof Y=="function"?Y():Y;if(typeof ke!="string")d.logMessages(['"react-to-print" expected a "string" from `pageStyle` but received "'.concat(typeof ke,'". Styles from `pageStyle` will not be applied.')]);else{var we=$.createElement("style");U&&(we.setAttribute("nonce",U),$.head.setAttribute("nonce",U)),we.appendChild($.createTextNode(ke)),$.head.appendChild(we)}if(B&&(me=$.body.classList).add.apply(me,b.__spreadArray([],b.__read(B.split(" ")),!1)),!ge){for(var n=ge?[]:ue.querySelectorAll("canvas"),r=$.querySelectorAll("canvas"),a=0;a<n.length;++a){var o=n[a],s=r[a].getContext("2d");s&&s.drawImage(o,0,0)}var g=function(se){var k=Ce[se],v=k.getAttribute("src");if(v){var de=new Image;de.onload=function(){return O(k)},de.onerror=function(F,De,q,he,ae){return O(k,["Error loading <img>",k,"Error",ae])},de.src=v}else O(k,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it. The <img> is:',k])};for(a=0;a<Ce.length;a++)g(a);var h=function(se){var k=Se[se];k.preload="auto";var v=k.getAttribute("poster");if(v){var de=new Image;de.onload=function(){return O(k)},de.onerror=function(F,De,q,he,ae){return O(k,["Error loading video poster",v,"for video",k,"Error:",ae])},de.src=v}else k.readyState>=2?O(k):(k.onloadeddata=function(){return O(k)},k.onerror=function(F,De,q,he,ae){return O(k,["Error loading video",k,"Error",ae])},k.onstalled=function(){return O(k,["Loading video stalled, skipping",k])})};for(a=0;a<Se.length;a++)h(a);var S="input",G=ue.querySelectorAll(S),R=$.querySelectorAll(S);for(a=0;a<G.length;a++)R[a].value=G[a].value;var f="input[type=checkbox],input[type=radio]",T=ue.querySelectorAll(f),ne=$.querySelectorAll(f);for(a=0;a<T.length;a++)ne[a].checked=T[a].checked;var re="select",ce=ue.querySelectorAll(re),xe=$.querySelectorAll(re);for(a=0;a<ce.length;a++)xe[a].value=ce[a].value}if(K)for(var pe=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']"),je=function(se,k){var v=pe[se];if(v.tagName.toLowerCase()==="style"){var de=$.createElement(v.tagName),F=v.sheet;if(F){var De="";try{for(var q=F.cssRules.length,he=0;he<q;++he)typeof F.cssRules[he].cssText=="string"&&(De+="".concat(F.cssRules[he].cssText,`\r
`))}catch{d.logMessages(["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/gregnb/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",v],"warning")}de.setAttribute("id","react-to-print-".concat(se)),U&&de.setAttribute("nonce",U),de.appendChild($.createTextNode(De)),$.head.appendChild(de)}}else if(v.getAttribute("href"))if(v.hasAttribute("disabled"))d.logMessages(["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",v],"warning"),O(v);else{for(var ae=$.createElement(v.tagName),Ve=(he=0,v.attributes.length);he<Ve;++he){var Ie=v.attributes[he];Ie&&ae.setAttribute(Ie.nodeName,Ie.nodeValue||"")}ae.onload=function(){return O(ae)},ae.onerror=function(qe,Je,ut,pt,ze){return O(ae,["Failed to load",ae,"Error:",ze])},U&&ae.setAttribute("nonce",U),$.head.appendChild(ae)}else d.logMessages(["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",v],"warning"),O(v)},Ze=(a=0,pe.length);a<Ze;++a)je(a)}d.numResourcesToLoad!==0&&K||d.triggerPrint(N)},d.handleRemoveIframe(!0),document.body.appendChild(N)}else d.logMessages(['"react-to-print" could not locate the DOM node corresponding with the `content` prop'])}else d.logMessages(['There is nothing to print because the "content" prop returned "null". Please ensure "content" is renderable before allowing "react-to-print" to be called.']);else d.logMessages(["To print a functional component ensure it is wrapped with `React.forwardRef`, and ensure the forwarded ref is used. See the README for an example: https://github.com/gregnb/react-to-print#examples"])},d.handleRemoveIframe=function(x){var _=d.props.removeAfterPrint;if(x||_){var B=document.getElementById("printWindow");B&&document.body.removeChild(B)}},d.logMessages=function(x,_){_===void 0&&(_="error"),d.props.suppressErrors||(_==="error"?console.error(x):_==="warning"?console.warn(x):_==="debug"&&console.debug(x))},d}return b.__extends(le,ie),le.prototype.handleClick=function(d,x){var _=this,B=this.props,J=B.onBeforeGetContent,K=B.onPrintError;if(J){var H=J();H&&typeof H.then=="function"?H.then(function(){return _.handlePrint(x)}).catch(function(Y){K&&K("onBeforeGetContent",Y)}):this.handlePrint(x)}else this.handlePrint(x)},le.prototype.render=function(){var d=this.props,x=d.children,_=d.trigger;if(_)return M.cloneElement(_(),{onClick:this.handleClick.bind(this)});if(!D.PrintContext)return this.logMessages(['"react-to-print" requires React ^16.3.0 to be able to use "PrintContext"']),null;var B={handlePrint:this.handleClick.bind(this)};return M.createElement(D.PrintContext.Provider,{value:B},x)},le.defaultProps=z.defaultProps,le}(M.Component);p.ReactToPrint=X},940:function(j,p){Object.defineProperty(p,"__esModule",{value:!0}),p.defaultProps=void 0,p.defaultProps={copyStyles:!0,pageStyle:`
        @page {
            /* Remove browser default header (title) and footer (url) */
            margin: 0;
        }
        @media print {
            body {
                /* Tell browsers to print background colors */
                -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
                color-adjust: exact; /* Firefox */
            }
        }
    `,removeAfterPrint:!1,suppressErrors:!1}},892:function(j,p,m){Object.defineProperty(p,"__esModule",{value:!0}),p.useReactToPrint=void 0;var b=m(316),M=m(496),P=m(428),D=m(940),z=m(860),X=Object.prototype.hasOwnProperty.call(M,"useMemo")&&Object.prototype.hasOwnProperty.call(M,"useCallback");p.useReactToPrint=function(ie){if(!X)return ie.suppressErrors||console.error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"'),function(){throw new Error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"')};var le=M.useMemo(function(){return new P.ReactToPrint(b.__assign(b.__assign({},D.defaultProps),ie))},[ie]);return M.useCallback(function(d,x){return(0,z.wrapCallbackWithArgs)(le,le.handleClick,x)(d)},[le])}},860:function(j,p,m){Object.defineProperty(p,"__esModule",{value:!0}),p.wrapCallbackWithArgs=void 0;var b=m(316);p.wrapCallbackWithArgs=function(M,P){for(var D=[],z=2;z<arguments.length;z++)D[z-2]=arguments[z];return function(){for(var X=[],ie=0;ie<arguments.length;ie++)X[ie]=arguments[ie];return P.apply(M,b.__spreadArray(b.__spreadArray([],b.__read(X),!1),b.__read(D),!1))}}},496:function(j){j.exports=I},190:function(j){j.exports=C},316:function(j,p,m){m.r(p),m.d(p,{__addDisposableResource:function(){return $},__assign:function(){return P},__asyncDelegator:function(){return Ae},__asyncGenerator:function(){return ge},__asyncValues:function(){return Ce},__await:function(){return ee},__awaiter:function(){return B},__classPrivateFieldGet:function(){return ye},__classPrivateFieldIn:function(){return Pe},__classPrivateFieldSet:function(){return Te},__createBinding:function(){return K},__decorate:function(){return z},__disposeResources:function(){return we},__esDecorate:function(){return ie},__exportStar:function(){return H},__extends:function(){return M},__generator:function(){return J},__importDefault:function(){return me},__importStar:function(){return O},__makeTemplateObject:function(){return Se},__metadata:function(){return _},__param:function(){return X},__propKey:function(){return d},__read:function(){return U},__rest:function(){return D},__runInitializers:function(){return le},__setFunctionName:function(){return x},__spread:function(){return fe},__spreadArray:function(){return ue},__spreadArrays:function(){return N},__values:function(){return Y}});var b=function(n,r){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(a[s]=o[s])},b(n,r)};function M(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function a(){this.constructor=n}b(n,r),n.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}var P=function(){return P=Object.assign||function(n){for(var r,a=1,o=arguments.length;a<o;a++)for(var s in r=arguments[a])Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s]);return n},P.apply(this,arguments)};function D(n,r){var a={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&r.indexOf(o)<0&&(a[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(o=Object.getOwnPropertySymbols(n);s<o.length;s++)r.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(n,o[s])&&(a[o[s]]=n[o[s]])}return a}function z(n,r,a,o){var s,g=arguments.length,h=g<3?r:o===null?o=Object.getOwnPropertyDescriptor(r,a):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(n,r,a,o);else for(var S=n.length-1;S>=0;S--)(s=n[S])&&(h=(g<3?s(h):g>3?s(r,a,h):s(r,a))||h);return g>3&&h&&Object.defineProperty(r,a,h),h}function X(n,r){return function(a,o){r(a,o,n)}}function ie(n,r,a,o,s,g){function h(je){if(je!==void 0&&typeof je!="function")throw new TypeError("Function expected");return je}for(var S,G=o.kind,R=G==="getter"?"get":G==="setter"?"set":"value",f=!r&&n?o.static?n:n.prototype:null,T=r||(f?Object.getOwnPropertyDescriptor(f,o.name):{}),ne=!1,re=a.length-1;re>=0;re--){var ce={};for(var xe in o)ce[xe]=xe==="access"?{}:o[xe];for(var xe in o.access)ce.access[xe]=o.access[xe];ce.addInitializer=function(je){if(ne)throw new TypeError("Cannot add initializers after decoration has completed");g.push(h(je||null))};var pe=(0,a[re])(G==="accessor"?{get:T.get,set:T.set}:T[R],ce);if(G==="accessor"){if(pe===void 0)continue;if(pe===null||typeof pe!="object")throw new TypeError("Object expected");(S=h(pe.get))&&(T.get=S),(S=h(pe.set))&&(T.set=S),(S=h(pe.init))&&s.unshift(S)}else(S=h(pe))&&(G==="field"?s.unshift(S):T[R]=S)}f&&Object.defineProperty(f,o.name,T),ne=!0}function le(n,r,a){for(var o=arguments.length>2,s=0;s<r.length;s++)a=o?r[s].call(n,a):r[s].call(n);return o?a:void 0}function d(n){return typeof n=="symbol"?n:"".concat(n)}function x(n,r,a){return typeof r=="symbol"&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:a?"".concat(a," ",r):r})}function _(n,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,r)}function B(n,r,a,o){return new(a||(a=Promise))(function(s,g){function h(R){try{G(o.next(R))}catch(f){g(f)}}function S(R){try{G(o.throw(R))}catch(f){g(f)}}function G(R){var f;R.done?s(R.value):(f=R.value,f instanceof a?f:new a(function(T){T(f)})).then(h,S)}G((o=o.apply(n,r||[])).next())})}function J(n,r){var a,o,s,g,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return g={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function S(G){return function(R){return function(f){if(a)throw new TypeError("Generator is already executing.");for(;g&&(g=0,f[0]&&(h=0)),h;)try{if(a=1,o&&(s=2&f[0]?o.return:f[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,f[1])).done)return s;switch(o=0,s&&(f=[2&f[0],s.value]),f[0]){case 0:case 1:s=f;break;case 4:return h.label++,{value:f[1],done:!1};case 5:h.label++,o=f[1],f=[0];continue;case 7:f=h.ops.pop(),h.trys.pop();continue;default:if(!((s=(s=h.trys).length>0&&s[s.length-1])||f[0]!==6&&f[0]!==2)){h=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){h.label=f[1];break}if(f[0]===6&&h.label<s[1]){h.label=s[1],s=f;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(f);break}s[2]&&h.ops.pop(),h.trys.pop();continue}f=r.call(n,h)}catch(T){f=[6,T],o=0}finally{a=s=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([G,R])}}}var K=Object.create?function(n,r,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(r,a);s&&!("get"in s?!r.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return r[a]}}),Object.defineProperty(n,o,s)}:function(n,r,a,o){o===void 0&&(o=a),n[o]=r[a]};function H(n,r){for(var a in n)a==="default"||Object.prototype.hasOwnProperty.call(r,a)||K(r,n,a)}function Y(n){var r=typeof Symbol=="function"&&Symbol.iterator,a=r&&n[r],o=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(n,r){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var o,s,g=a.call(n),h=[];try{for(;(r===void 0||r-- >0)&&!(o=g.next()).done;)h.push(o.value)}catch(S){s={error:S}}finally{try{o&&!o.done&&(a=g.return)&&a.call(g)}finally{if(s)throw s.error}}return h}function fe(){for(var n=[],r=0;r<arguments.length;r++)n=n.concat(U(arguments[r]));return n}function N(){for(var n=0,r=0,a=arguments.length;r<a;r++)n+=arguments[r].length;var o=Array(n),s=0;for(r=0;r<a;r++)for(var g=arguments[r],h=0,S=g.length;h<S;h++,s++)o[s]=g[h];return o}function ue(n,r,a){if(a||arguments.length===2)for(var o,s=0,g=r.length;s<g;s++)!o&&s in r||(o||(o=Array.prototype.slice.call(r,0,s)),o[s]=r[s]);return n.concat(o||Array.prototype.slice.call(r))}function ee(n){return this instanceof ee?(this.v=n,this):new ee(n)}function ge(n,r,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,s=a.apply(n,r||[]),g=[];return o={},h("next"),h("throw"),h("return"),o[Symbol.asyncIterator]=function(){return this},o;function h(T){s[T]&&(o[T]=function(ne){return new Promise(function(re,ce){g.push([T,ne,re,ce])>1||S(T,ne)})})}function S(T,ne){try{(re=s[T](ne)).value instanceof ee?Promise.resolve(re.value.v).then(G,R):f(g[0][2],re)}catch(ce){f(g[0][3],ce)}var re}function G(T){S("next",T)}function R(T){S("throw",T)}function f(T,ne){T(ne),g.shift(),g.length&&S(g[0][0],g[0][1])}}function Ae(n){var r,a;return r={},o("next"),o("throw",function(s){throw s}),o("return"),r[Symbol.iterator]=function(){return this},r;function o(s,g){r[s]=n[s]?function(h){return(a=!a)?{value:ee(n[s](h)),done:!1}:g?g(h):h}:g}}function Ce(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,a=n[Symbol.asyncIterator];return a?a.call(n):(n=Y(n),r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r);function o(s){r[s]=n[s]&&function(g){return new Promise(function(h,S){(function(G,R,f,T){Promise.resolve(T).then(function(ne){G({value:ne,done:f})},R)})(h,S,(g=n[s](g)).done,g.value)})}}}function Se(n,r){return Object.defineProperty?Object.defineProperty(n,"raw",{value:r}):n.raw=r,n}var Ee=Object.create?function(n,r){Object.defineProperty(n,"default",{enumerable:!0,value:r})}:function(n,r){n.default=r};function O(n){if(n&&n.__esModule)return n;var r={};if(n!=null)for(var a in n)a!=="default"&&Object.prototype.hasOwnProperty.call(n,a)&&K(r,n,a);return Ee(r,n),r}function me(n){return n&&n.__esModule?n:{default:n}}function ye(n,r,a,o){if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?n!==r||!o:!r.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?o:a==="a"?o.call(n):o?o.value:r.get(n)}function Te(n,r,a,o,s){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?n!==r||!s:!r.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?s.call(n,a):s?s.value=a:r.set(n,a),a}function Pe(n,r){if(r===null||typeof r!="object"&&typeof r!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?r===n:n.has(r)}function $(n,r,a){if(r!=null){if(typeof r!="object"&&typeof r!="function")throw new TypeError("Object expected.");var o;if(a){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=r[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=r[Symbol.dispose]}if(typeof o!="function")throw new TypeError("Object not disposable.");n.stack.push({value:r,dispose:o,async:a})}else a&&n.stack.push({async:!0});return r}var ke=typeof SuppressedError=="function"?SuppressedError:function(n,r,a){var o=new Error(a);return o.name="SuppressedError",o.error=n,o.suppressed=r,o};function we(n){function r(a){n.error=n.hasError?new ke(a,n.error,"An error was suppressed during disposal."):a,n.hasError=!0}return function a(){for(;n.stack.length;){var o=n.stack.pop();try{var s=o.dispose&&o.dispose.call(o.value);if(o.async)return Promise.resolve(s).then(a,function(g){return r(g),a()})}catch(g){r(g)}}if(n.hasError)throw n.error}()}p.default={__extends:M,__assign:P,__rest:D,__decorate:z,__param:X,__metadata:_,__awaiter:B,__generator:J,__createBinding:K,__exportStar:H,__values:Y,__read:U,__spread:fe,__spreadArrays:N,__spreadArray:ue,__await:ee,__asyncGenerator:ge,__asyncDelegator:Ae,__asyncValues:Ce,__makeTemplateObject:Se,__importStar:O,__importDefault:me,__classPrivateFieldGet:ye,__classPrivateFieldSet:Te,__classPrivateFieldIn:Pe,__addDisposableResource:$,__disposeResources:we}}},u={};function w(j){var p=u[j];if(p!==void 0)return p.exports;var m=u[j]={exports:{}};return W[j](m,m.exports,w),m.exports}w.d=function(j,p){for(var m in p)w.o(p,m)&&!w.o(j,m)&&Object.defineProperty(j,m,{enumerable:!0,get:p[m]})},w.o=function(j,p){return Object.prototype.hasOwnProperty.call(j,p)},w.r=function(j){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})};var V={};return function(){var j=V;Object.defineProperty(j,"__esModule",{value:!0}),j.useReactToPrint=j.ReactToPrint=j.PrintContextConsumer=void 0;var p=w(328);Object.defineProperty(j,"PrintContextConsumer",{enumerable:!0,get:function(){return p.PrintContextConsumer}});var m=w(428);Object.defineProperty(j,"ReactToPrint",{enumerable:!0,get:function(){return m.ReactToPrint}});var b=w(892);Object.defineProperty(j,"useReactToPrint",{enumerable:!0,get:function(){return b.useReactToPrint}});var M=w(428);j.default=M.ReactToPrint}(),V}()})})(Nt);var Zn=Nt.exports,Rt={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(E){(function(){var Z={}.hasOwnProperty;function I(){for(var u="",w=0;w<arguments.length;w++){var V=arguments[w];V&&(u=W(u,C(V)))}return u}function C(u){if(typeof u=="string"||typeof u=="number")return u;if(typeof u!="object")return"";if(Array.isArray(u))return I.apply(null,u);if(u.toString!==Object.prototype.toString&&!u.toString.toString().includes("[native code]"))return u.toString();var w="";for(var V in u)Z.call(u,V)&&u[V]&&(w=W(w,V));return w}function W(u,w){return w?u?u+" "+w:u+w:u}E.exports?(I.default=I,E.exports=I):window.classNames=I})()})(Rt);var Jn=Rt.exports;const er=dn(Jn),tr=["xxl","xl","lg","md","sm","xs"],nr="xs",rr=c.createContext({prefixes:{},breakpoints:tr,minBreakpoint:nr});function ar(E,Z){const{prefixes:I}=c.useContext(rr);return E||I[Z]||Z}const or=c.forwardRef(({bsPrefix:E,className:Z,striped:I,bordered:C,borderless:W,hover:u,size:w,variant:V,responsive:j,...p},m)=>{const b=ar(E,"table"),M=er(Z,b,V&&`${b}-${V}`,w&&`${b}-${w}`,I&&`${b}-${typeof I=="string"?`striped-${I}`:"striped"}`,C&&`${b}-bordered`,W&&`${b}-borderless`,u&&`${b}-hover`),P=e.jsx("table",{...p,className:M,ref:m});if(j){let D=`${b}-responsive`;return typeof j=="string"&&(D=`${D}-${j}`),e.jsx("div",{className:D,children:P})}return P});function sr(E){const{serials:Z,code:I,hiden:C}=E,[W,u]=c.useState({});console.log("Data : ",Z),console.log("Data2 : ",I),c.useEffect(()=>{w(I)},[I]);const w=async p=>{const m=await ct(p);m.status_code===200&&(console.log("Data 4 : ",m.data),u(m.data))},V=c.useRef(),j=Zn.useReactToPrint({content:()=>V.current,documentTitle:"emp-data",onAfterPrint:()=>alert("Print success")});return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:C?"none":"block"},children:e.jsx("div",{ref:V,style:{width:"100%",height:window.innerHeight},children:e.jsxs("div",{style:{display:"block",padding:"20px"},children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h1",{className:"mb-0 text-danger",children:"HÓA ĐƠN BÁN HÀNG"}),e.jsxs("p",{children:["Mã hóa đơn: ",W.ma]}),e.jsx("p",{children:"Ngày: 22/01/2024"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("strong",{children:"Công ty: Comnoone"}),e.jsx("br",{}),"Địa chỉ: Cao đẳng FPT Polytechnic, Bắc Từ Liêm, Hà Nội",e.jsx("br",{}),"Email: manh@gmail.com",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Nhân viên bán hàng: Mnah "}),e.jsx("br",{}),"Khách hàng: ",W.tenKhachHang||"Khách lẻ",e.jsx("br",{}),"SĐT: ",W.sdt||""]}),e.jsxs(or,{bordered:!0,children:[e.jsx("thead",{className:"thead-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"STT"}),e.jsx("th",{children:"Giá"}),e.jsx("th",{children:"Số lượng"}),e.jsx("th",{children:"Đơn giá"})]})}),e.jsx("tbody",{children:Z.map((p,m)=>e.jsxs("tr",{children:[e.jsx("td",{children:m+1}),e.jsxs("td",{children:[p.price.toLocaleString("vi-VN")," VNĐ"]}),e.jsx("td",{children:p.quantity}),e.jsxs("td",{children:[(p.price*p.quantity).toLocaleString("vi-VN")," VNĐ"]})]},p.id))})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsxs("div",{className:"text-end",children:[e.jsxs("p",{children:["Tổng số lượng: ",W.tongSanPham]}),e.jsxs("p",{children:["Tổng tiền hàng: ",parseInt(W.tongTienBanDau||5).toLocaleString()||"0 5"," VNĐ"]}),e.jsx("p",{children:"Chiết khấu: KKKKKKKKK"}),e.jsxs("p",{children:["Khách phải trả: ",parseInt(W.tongTienPhaiTra||0).toLocaleString()||"0"," "]}),e.jsx("p",{children:"Tiền khách đưa: KKKKKKKKKK"})]})}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("p",{children:"Cảm ơn quý khách, hẹn gặp lại!"})})]})})}),e.jsx("button",{onClick:j,className:"btn btn-primary",children:e.jsx("h1",{children:"Print this out"})})]})}function ir(E){const{bill:Z,onReload:I}=E,{id:C}=hn(),W=c.useRef(null),[u,w]=c.useState({}),[V,j]=c.useState(!1),[p,m]=c.useState(!1);c.useState([]);const[b,M]=c.useState([]),[P,D]=c.useState([]),[z,X]=c.useState(!1),[ie,le]=c.useState(null),[d,x]=c.useState([]),[_,B]=c.useState([]),[J,K]=c.useState(null),[H,Y]=c.useState(1),[U,fe]=c.useState(5),[N,ue]=c.useState(0),[ee,ge]=c.useState({ten:"",sdt:"",email:""}),[Ae,Ce]=c.useState([]),[Se,Ee]=c.useState(!1),[O,me]=c.useState(1),[ye,Te]=c.useState(0),[Pe,$]=c.useState(""),[ke,we]=c.useState(!1),[n,r]=c.useState([]),[a,o]=c.useState(!1),[s,g]=c.useState(!0),[h,S]=c.useState(!0),[G,R]=c.useState("0"),[f,T]=c.useState("0"),[ne,re]=c.useState(""),[ce,xe]=c.useState(""),[pe,je]=c.useState(""),Ze=t=>{const i=t.target.checked;g(i),be(y=>({...y,tienMat:i?1:null})),i||R("")},se=t=>{const i=t.target.checked;S(i),be(y=>({...y,chuyenKhoan:i?2:null})),t.target.checked||T("")},[k,v]=c.useState(""),[de,F]=c.useState("success"),[De,q]=c.useState(!1),[he,ae]=c.useState([]),[Ve,Ie]=c.useState([]),[qe,Je]=c.useState([]),[ut,pt]=c.useState(null),[ze,ft]=c.useState(null),[It,et]=c.useState(null),[Ne,Mt]=c.useState(!1),[Q,be]=c.useState({chuyenKhoan:2,tienMat:1,loaiHoaDon:0,ten:"",sdt:"",email:"",diaChi:"",tinh:"",huyen:"",phuong:"",ghiChu:"",ngayNhanHang:"",tienShip:"0"}),_e=t=>{const{name:i,value:y}=t.target;be({...Q,[i]:y})},Bt=t=>{t.target,Mt(t.target.checked),be(i=>({...i,loaiHoaDon:Ne?0:1}))};console.log("Loại hóa đơn : ",Q);const gt=()=>{q(!1)},mt=t=>{o(!0)},xt=()=>{o(!1),R("0"),T("0"),setError("")},yt=(t,i)=>{const y=t.target.value;if(isNaN(y)){i==="cash"?(re("Số tiền không hợp lệ"),R(y)):i==="transfer"&&(xe("Số tiền không hợp lệ"),T(y));return}if(parseFloat(y)<0){i==="cash"?(re("Số tiền không được âm"),R(y)):i==="transfer"&&(xe("Số tiền không được âm"),T(y));return}let te=G,at=f;i==="cash"?(te=y,R(y),re("")):i==="transfer"&&(at=y,T(y),xe(""));const Me=Math.round(parseFloat((u==null?void 0:u.tongTienPhaiTra)||0));console.log("TTT : ",Me),parseFloat(te||0)+parseFloat(at||0)>=Me?je(""):je("Tổng số tiền phải lớn hơn hoặc bằng tổng tiền phải trả")},Ot=()=>{Q.chuyenKhoan==null&&Q.tienMat==null&&(v("Bạn chưa chọn phương thức thanh toán"),F("error"),q(!0))},Lt=async()=>{try{(await xn(C,Q)).status_code===201&&(v("Xác nhận thanh toán thành công thành công"),F("success"),q(!0),w({}),ge({}),setAmount(0),sn())}catch{v("Hóa đơn chưa được xác nhận"),F("error"),q(!0)}},Xe=async()=>{const t=await kn(C);if(t.status_code===200){M(t.data);const i=t.data.flatMap(y=>y.serialNumbers.map(te=>te.serialNumberId));x(i)}},Ht=async(t,i)=>{(await Bn(t,i)).status_code===200&&(Xe(),Re(),v("Xóa sản phẩm khoải hóa đơn thành công"),F("success"),q(!0))},Re=async()=>{const t=await ct(C);t.status_code===200&&(w(t.data),ge({ten:t.data.tenKhachHang,sdt:t.data.sdt,email:t.data.email,diaChi:t.data.diaChi}),be({chuyenKhoan:2,tienMat:1,loaiHoaDon:Ne?1:0,ten:t.data.tenKhachHang,sdt:t.data.sdt,email:t.data.email,diaChi:"",tinh:"",huyen:"",phuong:"",ghiChu:"",ngayNhanHang:"",tienShip:"0"}))};console.log("Orde : ",Q),c.useEffect(()=>{Xe(),C&&Re()},[V,C]);const jt=()=>{m(!1)},Gt=()=>{m(!p)};console.log("Customer : ",ee);const Ft=t=>{const i=t.serialNumbers.map(y=>y.serialNumberId);Ht(C,i),Re()},Wt=async()=>{const t=await Dn();t.code===200&&D(t.data)};c.useEffect(()=>{Wt()},[C]);const bt=async(t,i,y)=>{const te=await On(t,i-1,y);te.status_code===200&&(B(te.data.result),ue(te.data.meta.total),Y(te.data.meta.page+1))},Kt=t=>{x(d),Y(t),bt(J,t,U)},$t=async()=>{(await An({billCode:C,listSerialNumberId:d})).status_code===201&&(v("Thêm sản phẩm thành công"),F("success"),q(!0),X(!1),x([]),Y(1),K(null),le(null),Xe(),Re())},Vt=t=>{x(i=>i.includes(t)?i.filter(y=>y!==t):[...i,t])},Ye=t=>{K(t),Xe(),bt(t,H,5),X(!0)},vt=()=>{X(!1),x([]),Y(1),K(null),le(null)},tt=async t=>{try{const i=await Tn(Pe,t-1);i&&(Ce(i.content),Te(i.totalPages))}catch{}},qt=t=>{const{value:i}=t.target;$(i.trim()),tt(O)},Ct=async t=>{try{const i=await yn(t,C);i.status_code&&(v("Thêm khách hàng thành công"),F("success"),q(!0),ge({ten:i.data.tenKhachHang,sdt:i.data.sdt,email:i.data.email}),be(y=>({...y,ten:i.data.tenKhachHang,sdt:i.data.sdt,email:i.data.email})),nt())}catch{v("Thêm khách hàng thất bại"),F("error"),q(!0)}},zt=async t=>{try{const i=await Pn(t);i.status_code===200?(v("Thêm khách hàng thành công"),F("success"),q(!0),Ct(i.data.id,C),ge({ten:i.data.ten,sdt:i.data.sdt,email:i.data.email})):(v("Không tìm thấy khách hàng với số điện thoại này !"),F("error"),q(!0))}catch{v("Không tìm thấy khách hàng với số điện thoại này !"),F("error"),q(!0)}},Xt=t=>{t.preventDefault();const y=new FormData(t.target).get("sdt");zt(y.trim())},Yt=t=>{me(t),tt(t)},Ut=t=>{Ee(!0),tt(O)},nt=()=>{Ee(!1),Ce([])},Qt=async()=>{try{const t=await Sn(u.ma);t.status_code===200&&r(t.data)}catch{}},Zt=async t=>{try{(await jn(t,C)).status_code===201&&(v("Thêm phiếu giảm giá thành công"),F("success"),q(!0),Re(),rt())}catch{response.status_code===201&&(v("Thêm phiếu giảm giá thất bại"),F("error"),q(!0))}},Jt=async t=>{try{const i=await bn(t,C);i.status_code===201&&(i.status_code===201?(v("Thêm phiếu giảm giá thành công"),F("success"),q(!0),Re(),W.current&&(W.current.value="")):alert("Thêm thất bại"))}catch{v("Thêm phiếu giảm giá thất bại"),F("error"),q(!0)}},en=t=>{t.preventDefault();const y=new FormData(t.target).get("maPGG");Jt(y.trim())},tn=t=>{we(!0),Qt()},rt=()=>{we(!1),r([])};c.useEffect(()=>{(async()=>{const i=await En();ae(i.data)})()},[]),console.log("TP : ",he),console.log("Quận Huyện  : ",Ve),console.log("Xã huyện  : ",qe);const nn=async t=>{_e(t);const i=t.target.value;pt(i),be(te=>({...te,tinh:i}));const y=await Nn(i);Ie(y.data),ft(""),et(""),Je([])},rn=async t=>{_e(t);const i=t.target.value;ft(i),be(te=>({...te,huyen:i}));const y=await Rn(i);Je(y.data),console.log("setWards : ",y),et("")},an=t=>{_e(t),et(t.target.value),be(i=>({...i,phuong:t.target.value})),on(ze,t.target.value)},on=async(t,i)=>{const y=await In(t,i),te=await Mn(t,i),Me=new Date(y.data.leadtime*1e3).toISOString().slice(0,19).replace("T"," ");be(wt=>({...wt,ngayNhanHang:Me,tienShip:te.data.total})),console.log("DATA 2 : ",y),console.log("Ngày nhận hàng : ",Me),console.log("DATA 3 : ",te),console.log("Giá ship : ",te.data.total)};console.log("1 P : ",ut),console.log("2 D : ",ze),console.log("1 W : ",It);const sn=()=>{typeof I=="function"?I():console.error("onReload is not a function")};return e.jsxs(e.Fragment,{children:[e.jsxs(A,{container:!0,spacing:2,padding:2,sx:{backgroundColor:"white",marginTop:5,borderRadius:4},children:[e.jsx(A,{container:!0,spacing:2,children:e.jsxs(A,{item:!0,xs:12,container:!0,justifyContent:"space-between",alignItems:"center",children:[e.jsx(L,{variant:"h3",children:"Giỏ hàng"}),e.jsx(sr,{serials:b,code:u.ma,hiden:!0}),e.jsx(oe,{variant:"contained",color:"warning",onClick:Gt,disabled:!C,children:"Thêm sản phẩm"})]})}),e.jsx(un,{sx:{marginY:2}}),e.jsx(Le,{component:Be,sx:{width:"100%"},children:e.jsxs(He,{"aria-label":"simple table",children:[e.jsx(Ge,{children:e.jsxs(ve,{children:[e.jsx(l,{children:"Ảnh"}),e.jsx(l,{children:"Mã SP"}),e.jsx(l,{children:"Tên sản phẩm"}),e.jsx(l,{children:"Số lượng"}),e.jsx(l,{children:"Thành tiền"}),e.jsx(l,{children:"Serial"}),e.jsx(l,{children:"Hành động"})]})}),e.jsx(Fe,{children:b.map(t=>e.jsxs(ve,{children:[e.jsx(l,{children:e.jsx("img",{src:"https://via.placeholder.com/50",alt:"Product",width:"50"})}),e.jsx(l,{children:t.productDetailCode}),e.jsxs(l,{children:[t.productName," ",e.jsx("br",{}),e.jsxs("strong",{style:{color:"red"},children:[parseInt(t.price).toLocaleString()," VNĐ"]})]}),e.jsx(l,{children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(lt,{onClick:()=>Ye(t.productDetailId),children:e.jsx(Kn,{})}),e.jsx(Oe,{type:"number",value:t.quantity,onChange:i=>Ye(t.productDetailId),inputProps:{min:0},sx:{width:50,height:30,"& .MuiInputBase-input":{padding:"5px 10px"}}}),e.jsx(lt,{onClick:()=>Ye(t.productDetailId),children:e.jsx(Wn,{})})]})}),e.jsx(l,{children:e.jsxs("strong",{style:{color:"red"},children:[parseInt(t.quantity*t.price).toLocaleString()," VNĐ"]})}),e.jsx(l,{children:e.jsx("strong",{children:t.serialNumbers.map((i,y)=>e.jsxs("span",{children:[i.serialNumberCode,y<t.serialNumbers.length-1&&", "]},i.serialNumberId))})}),e.jsx(l,{children:e.jsx(oe,{sx:{color:"white",backgroundColor:"red","&:hover":{backgroundColor:"darkred"}},onClick:()=>Ft(t),children:"Hủy"})})]},t.id))})]})}),e.jsx(A,{container:!0,justifyContent:"end",alignItems:"center",mt:2,children:e.jsxs(L,{variant:"h4",children:["Tổng tiền : ",e.jsxs("strong",{style:{color:"red"},children:[" ",parseInt(u.tongTienBanDau||0).toLocaleString()||"0"," "]})," VNĐ"]})})]}),e.jsx(e.Fragment,{children:e.jsxs(A,{container:!0,spacing:2,padding:2,sx:{backgroundColor:"white",marginTop:5,borderRadius:4},children:[e.jsxs(A,{container:!0,justifyContent:"space-between",alignItems:"center",children:[e.jsx(L,{variant:"h3",children:"Khách hàng"}),e.jsx(oe,{variant:"contained",color:"primary",onClick:()=>{Ut()},disabled:!C,children:"Chọn khách hàng"})]}),e.jsxs(A,{container:!0,spacing:2,paddingY:2,borderBottom:1,borderColor:"grey.300",children:[e.jsx(A,{item:!0,xs:6,children:e.jsxs(L,{variant:"subtitle1",children:["Tên khách hàng : ",ee.ten]})}),e.jsx(A,{item:!0,xs:6,children:e.jsxs(L,{variant:"subtitle1",children:["Email : ",ee.email]})})]}),e.jsxs(A,{container:!0,spacing:2,paddingY:2,children:[e.jsx(A,{item:!0,xs:6,children:e.jsxs(L,{variant:"subtitle1",sx:{display:"flex",alignItems:"center"},children:["Số điện thoại :",e.jsx("form",{onSubmit:Xt,style:{width:"70%",marginLeft:"5px"},children:e.jsx("input",{type:"text",placeholder:"Số điện thoại",name:"sdt",defaultValue:ee.sdt,style:{width:"50%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"}})})]})}),e.jsx(A,{item:!0,xs:6,children:e.jsxs(L,{variant:"subtitle1",children:["Địa chỉ : ",ee.diaChi]})})]})]})}),e.jsxs(A,{container:!0,spacing:2,padding:2,sx:{backgroundColor:"white",marginTop:5,borderRadius:4},children:[e.jsx(A,{item:!0,xs:8,children:e.jsx(L,{variant:"h3",children:"Thông tin đơn hàng "})}),e.jsx(A,{item:!0,xs:4,children:e.jsx(st,{display:"flex",justifyContent:"end",children:e.jsx(oe,{variant:"contained",color:"primary",sx:{marginLeft:2,padding:1},onClick:()=>{mt()},disabled:!C,children:"Tiến hành thanh toán"})})}),e.jsx(A,{mt:2,item:!0,xs:12,sx:{borderTop:1}}),e.jsx(A,{item:!0,xs:8,children:Ne&&C?e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"16px"},children:[e.jsx("div",{style:{flex:"0 0 32%"},children:e.jsx("input",{type:"text",name:"ten",value:Q.ten,placeholder:"Họ và Tên",onChange:_e,style:{width:"100%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"}})}),e.jsx("div",{style:{flex:"0 0 32%"},children:e.jsx("input",{type:"text",name:"sdt",value:Q.sdt,placeholder:"Số điện thoại",onChange:_e,style:{width:"100%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"}})}),e.jsx("div",{style:{flex:"0 0 32%"},children:e.jsx("input",{type:"text",name:"email",value:Q.email,placeholder:"Email",onChange:_e,style:{width:"100%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"}})}),e.jsx("div",{style:{flex:"0 0 100%"},children:e.jsx("input",{type:"text",name:"diaChi",value:Q.diaChi,placeholder:"Địa chỉ",onChange:_e,style:{width:"100%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"}})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px",width:"100%"},children:[e.jsx("div",{style:{width:"32%"},children:e.jsxs("select",{id:"province",name:"province",value:Q.tinh,onChange:nn,style:{width:"100%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"},children:[e.jsx("option",{value:"",disabled:!0,selected:!0,children:"Chọn Tỉnh/Thành Phố"}),he.map(t=>e.jsx("option",{value:t.ProvinceID,children:t.ProvinceName},t.ProvinceID))]})}),e.jsx("div",{style:{width:"32%"},children:e.jsxs("select",{id:"district",name:"district",value:Q.huyen,onChange:rn,disabled:!Q.tinh,style:{width:"100%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"},children:[e.jsx("option",{value:"",disabled:!0,selected:!0,children:"Chọn Quận/Huyện"}),Ve.map(t=>e.jsx("option",{value:t.DistrictID,children:t.DistrictName},t.DistrictID))]})}),e.jsx("div",{style:{width:"32%"},children:e.jsxs("select",{id:"ward",name:"ward",value:Q.phuong,disabled:!Q.huyen,onChange:an,style:{width:"100%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"},children:[e.jsx("option",{value:"",disabled:!0,selected:!0,children:"Chọn Phường/Xã"}),qe.map(t=>e.jsx("option",{value:t.WardCode,children:t.WardName},t.WardCode))]})})]}),e.jsx("div",{style:{flex:"0 0 100%"},children:e.jsx("textarea",{name:"ghiChu",value:Q.ghiChu,placeholder:"Ghi chú",onChange:_e,style:{width:"100%",border:"1px solid grey",minHeight:"80px",padding:"10px",borderRadius:"4px"}})}),e.jsxs("div",{style:{flex:"0 0 100%",display:"flex",alignItems:"center",marginTop:"16px"},children:[e.jsx("img",{src:"https://ghn.vn/img/logo_ghn.png",alt:"GHN Logo",style:{width:"100px",marginRight:"10px"}}),e.jsxs("span",{children:["Thời gian nhận hàng dự kiến: ",e.jsx("strong",{children:Q.ngayNhanHang})," "]}),e.jsx("br",{})]})]}):e.jsx(e.Fragment,{})}),e.jsxs(A,{item:!0,xs:4,children:[e.jsxs(st,{display:"flex",alignItems:"center",sx:{flexDirection:{xs:"column",sm:"row"}},children:[e.jsx(oe,{variant:"contained",color:"warning",size:"small",sx:{padding:1,borderRadius:3,mr:2},onClick:()=>{tn()},disabled:!C,children:"Chọn Mã Giảm Giá :"}),e.jsx("form",{onSubmit:en,children:e.jsx(Oe,{label:"Mã Giảm Giá",name:"maPGG",variant:"outlined",size:"small",inputRef:W,fullWidth:!0})})," "]}),e.jsx(pn,{disabled:!C,control:e.jsx(Ln,{checked:Ne,onChange:Bt,color:"primary"}),label:Ne?"Giao hàng":"Tại quầy"}),e.jsxs(L,{mt:1,variant:"h4",children:["Tổng tiền hàng: ",parseFloat(u.tongTienBanDau||0).toLocaleString()||"0"," VNĐ"]}),e.jsxs(L,{mt:1,variant:"h4",children:["Phiếu giảm giá : ",u.maPGG||""]}),e.jsxs(L,{mt:1,variant:"h4",children:["Giảm giá: ",parseFloat(u.giaTriPhieuGiamGia||0).toLocaleString()||"0"," ",u.loaiPGG===1?"%":"VNĐ"]}),Ne&&e.jsxs(L,{mt:1,variant:"h4",children:["Tiền ship: ",parseFloat(Q.tienShip||0).toLocaleString()||"0"," VNĐ"]}),e.jsxs(L,{mt:1,variant:"h4",fontWeight:"bold",color:"error",children:["Khách cần trả: ",parseFloat(u.tongTienPhaiTra||0).toLocaleString()||"0"," VNĐ"]}),e.jsxs(L,{mt:1,variant:"h4",fontWeight:"bold",children:["Tiền thừa:"," "]}),e.jsx(oe,{variant:"contained",color:"primary",onClick:()=>{Lt(),mt()},disabled:!C,children:"Xác nhận thanh toán"})]})]}),e.jsxs(We,{open:p,onClose:jt,maxWidth:"xl",fullWidth:!0,children:[e.jsxs(Ke,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(L,{variant:"h3",children:"Danh sách sản phẩm"}),e.jsx(oe,{onClick:jt,children:"Đóng"})]}),e.jsx($e,{children:e.jsxs(Be,{sx:{padding:2},children:[e.jsx(A,{container:!0,spacing:2,marginBottom:2,children:e.jsx(A,{item:!0,xs:12,children:e.jsx(L,{variant:"h6",children:"Tìm kiếm"})})}),e.jsx(Le,{sx:{maxHeight:"70vh"},children:e.jsxs(He,{stickyHeader:!0,children:[e.jsx(Ge,{children:e.jsxs(ve,{children:[e.jsx(l,{children:"Ảnh"}),e.jsx(l,{children:"Tên"}),e.jsx(l,{children:"Mã"}),e.jsx(l,{children:"Bàn phím"}),e.jsx(l,{children:"CPU"}),e.jsx(l,{children:"Màn hình"}),e.jsx(l,{children:"Màu sắc"}),e.jsx(l,{children:"RAM"}),e.jsx(l,{children:"VGA"}),e.jsx(l,{children:"Webcam"}),e.jsx(l,{children:"Ổ cứng"}),e.jsx(l,{children:"Giá"}),e.jsx(l,{children:"Thao tác"})]})}),e.jsx(Fe,{children:P.map(t=>e.jsxs(ve,{children:[e.jsx(l,{children:e.jsx("img",{src:"https://via.placeholder.com/50",alt:"Product",width:"50"})}),e.jsx(l,{children:t.sanPham}),e.jsx(l,{children:t.ma}),e.jsx(l,{children:t.banPhim}),e.jsx(l,{children:t.cpu}),e.jsx(l,{children:t.manHinh}),e.jsx(l,{children:t.mauSac}),e.jsx(l,{children:t.ram}),e.jsx(l,{children:t.vga}),e.jsx(l,{children:t.webcam}),e.jsx(l,{children:t.ocung}),e.jsx(l,{children:e.jsxs(L,{color:"error",children:[parseInt(t.giaBan).toLocaleString()," VNĐ"]})}),e.jsx(l,{children:e.jsx(oe,{variant:"contained",color:"primary",onClick:()=>Ye(t.id),children:"Chọn"})})]},t.id))})]})})]})})]}),e.jsxs(We,{open:z,onClose:vt,PaperProps:{style:{width:"700px"}},children:[e.jsx(Ke,{children:e.jsxs(st,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx("span",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:"Danh sách serial"}),e.jsx(Oe,{variant:"outlined",size:"small",label:"Tìm kiếm",style:{marginRight:"16px"}})]})}),e.jsxs($e,{children:[e.jsx(Le,{component:Be,children:e.jsxs(He,{children:[e.jsx(Ge,{children:e.jsxs(ve,{children:[e.jsx(l,{children:"Chọn"}),e.jsx(l,{children:"Mã"}),e.jsx(l,{children:"Trạng thái"})]})}),e.jsx(Fe,{children:_.map(t=>e.jsxs(ve,{children:[e.jsx(it,{checked:d.includes(t.id),onChange:()=>Vt(t.id),disabled:t.trangThai===1&&!d.includes(t.id)}),e.jsx(l,{children:t.ma}),e.jsx(l,{children:e.jsx(fn,{label:t.trangThai==0?"Chưa bán":t.trangThai==1?"Đã bán":"Hủy",style:{backgroundColor:_n(t.trangThai),color:"#fff"},size:"small"})})]},t.id))})]})}),e.jsx(Tt,{sx:{marginTop:"10px",textAlign:"center"},count:Math.ceil(N/U),page:H,onChange:(t,i)=>Kt(i)})]}),e.jsxs(Qe,{children:[e.jsx(oe,{onClick:vt,children:"Hủy"}),e.jsx(oe,{onClick:()=>{$t()},variant:"contained",color:"primary",children:"Xác nhận"})]})]}),e.jsxs(We,{open:Se,onClose:nt,maxWidth:"md",fullWidth:!0,children:[e.jsx(Ke,{children:"Danh sách khách hàng"}),e.jsxs($e,{children:[e.jsx("input",{type:"text",name:"search",placeholder:"Tìm theo mã , tên , sđt , email",onChange:qt,style:{width:"100%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px"}}),e.jsx(Le,{component:Be,style:{maxHeight:"500px"},children:e.jsxs(He,{stickyHeader:!0,children:[e.jsx(Ge,{children:e.jsxs(ve,{children:[e.jsx(l,{}),e.jsx(l,{children:"Họ và tên"}),e.jsx(l,{children:"SDT"}),e.jsx(l,{children:"Email"}),e.jsx(l,{children:"Hành động"})]})}),e.jsx(Fe,{style:{maxHeight:"300px",overflowY:"auto"},children:Ae.map(t=>e.jsxs(ve,{children:[e.jsx(l,{}),e.jsx(l,{children:`${t.ho?t.ho:""} ${t.ten?t.ten:""}`.trim()||"N/A"}),e.jsx(l,{children:t.sdt}),e.jsx(l,{children:t.email?t.email:"N/A"}),e.jsxs(l,{children:[" ",e.jsx(oe,{onClick:()=>{Ct(t.id)},variant:"contained",color:"primary",children:"Chọn"})]})]},t.id))})]})})]}),e.jsx(Tt,{sx:{marginTop:"10px",textAlign:"center"},count:ye,page:O,onChange:(t,i)=>Yt(i)}),e.jsx(Qe,{children:e.jsx(oe,{onClick:nt,color:"primary",children:"Đóng"})})]}),e.jsxs(We,{open:ke,onClose:rt,maxWidth:"md",fullWidth:!0,children:[e.jsx(Ke,{children:"Danh sách khách hàng"}),e.jsx($e,{children:e.jsx(Le,{component:Be,style:{maxHeight:"500px"},children:e.jsxs(He,{stickyHeader:!0,children:[e.jsx(Ge,{children:e.jsxs(ve,{children:[e.jsx(l,{}),e.jsx(l,{children:"Mã phiếu"}),e.jsx(l,{children:"Giá trị "}),e.jsx(l,{children:"Giá trị đối đa "}),e.jsx(l,{children:"Số lượng"}),e.jsx(l,{children:"Hành động"})]})}),e.jsx(Fe,{style:{maxHeight:"300px",overflowY:"auto"},children:n.map(t=>e.jsxs(ve,{children:[e.jsx(l,{}),e.jsxs(l,{children:[t.ma," "]}),e.jsxs(l,{children:[parseInt(t.giaTriGiamGia||0).toLocaleString()||"0"," ",t.loaiGiamGia===1?"%":"VNĐ"]}),e.jsxs(l,{children:[parseInt(t.giamToiDa||0).toLocaleString()||"0"," VNĐ "]}),e.jsx(l,{children:t.soLuong}),e.jsx(l,{children:e.jsx(oe,{onClick:()=>{Zt(t.id)},variant:"contained",color:"primary",disabled:u.idPhieuGiamGia===t.id,children:"Chọn"})})]},t.id))})]})})}),e.jsx(Qe,{children:e.jsx(oe,{onClick:rt,color:"primary",children:"Đóng"})})]}),e.jsxs(We,{open:a,onClose:xt,maxWidth:"sm",fullWidth:!0,children:[e.jsx(Ke,{children:"Thanh toán"}),e.jsx($e,{children:e.jsxs(A,{container:!0,spacing:2,sx:{paddingTop:2},children:[s&&e.jsx(A,{item:!0,xs:12,children:e.jsx(Oe,{label:"Số tiền mặt",fullWidth:!0,variant:"outlined",type:"number",value:G,onChange:t=>yt(t,"cash"),error:!!ne,helperText:ne})}),h&&e.jsx(A,{item:!0,xs:12,children:e.jsx(Oe,{label:"Số tiền chuyển khoản",fullWidth:!0,variant:"outlined",type:"number",value:f,onChange:t=>yt(t,"transfer"),error:!!ce,helperText:ce})}),pe&&e.jsx(A,{item:!0,xs:12,children:e.jsx(L,{color:"error",children:pe})}),e.jsxs(A,{item:!0,xs:6,children:[e.jsx(it,{checked:s,onChange:Ze,color:"primary"}),e.jsx(L,{children:"Tiền mặt"})]}),e.jsxs(A,{item:!0,xs:6,children:[e.jsx(it,{checked:h,onChange:se,color:"primary"}),e.jsx(L,{children:"Chuyển khoản"})]}),e.jsx(A,{item:!0,xs:12,children:e.jsx(L,{variant:"h6",align:"right",color:"error",children:`${parseInt((u==null?void 0:u.tongTienPhaiTra)||0).toLocaleString("vi-VN")} VNĐ`})}),e.jsxs(A,{item:!0,xs:12,children:[e.jsxs(L,{variant:"h6",children:["Khách thanh toán:",e.jsx("span",{style:{color:"red",float:"right"},children:`${parseFloat((u==null?void 0:u.tongTienPhaiTra)||0).toLocaleString("vi-VN",{style:"currency",currency:"VND"})}`})]}),e.jsxs(L,{variant:"h6",children:["Tiền thừa:",e.jsxs("span",{style:{color:"blue",float:"right"},children:[`${(parseFloat(G||"0")+parseFloat(f||"0")-parseFloat((u==null?void 0:u.tongTienPhaiTra)||"0")).toLocaleString("vi-VN",{style:"currency",currency:"VND"})}`,"VND"]})]})]})]})}),e.jsxs(Qe,{children:[e.jsx(oe,{onClick:xt,color:"error",children:"Huỷ"}),e.jsx(oe,{variant:"contained",color:"primary",onClick:Ot,children:"Xác nhận"})]})]}),e.jsx(Hn,{open:De,autoHideDuration:2e3,onClose:gt,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(Gn,{onClose:gt,variant:"filled",severity:de,sx:{width:"100%"},children:k})})]})}function Dr(){const E=gn(),[Z,I]=c.useState({}),[C,W]=c.useState([]),[u,w]=c.useState(null);c.useState(!1);const V=async()=>{const P=await Un();P.status_code===200&&W(P.data)};c.useEffect(()=>{V(),E("/ban-hang")},[]);const j=async P=>{const D=await ct(P);D.status_code===200&&(I(D.data),console.log("CAlll APi"))},p=(P,D)=>{w(D),E(`/ban-hang/hoa-don/${C[D]}`),console.log("Code : ",C[D]),C[D]&&j(C[D])},m=async P=>{if(console.log("DATA : ",P),P)try{if((await Qn(P)).status_code===204){const z=C.filter(X=>X!==P);if(W(z),ot.success(St.DELETED),z.length>0){const X=u>=z.length?z.length-1:u;w(X),E(`/ban-hang/hoa-don/${z[X]}`)}else w(null),E("/ban-hang")}}catch{ot.error("Có lỗi xảy ra khi xóa hóa đơn")}},b=async()=>{const P=await vn();P.status_code===201&&(W(D=>[P.data.ma,...D]),w(0),E(`/ban-hang/hoa-don/${P.data.ma}`),ot.success(St.CREATED))},M=()=>{V(),w(null),E("/ban-hang")};return e.jsx(e.Fragment,{children:e.jsxs(Ue,{children:[e.jsx(Ue,{sx:{borderBottom:1,borderColor:"divider",marginTop:2},children:e.jsxs(Fn,{value:u,onChange:p,variant:"scrollable",scrollButtons:"auto",children:[C.map((P,D)=>e.jsx(Pt,{label:e.jsxs(Ue,{sx:{display:"flex",alignItems:"center"},children:[P,e.jsx(Et,{fontSize:"small",sx:{marginLeft:1}}),e.jsx(lt,{onClick:()=>m(P),size:"small",children:e.jsx(At,{fontSize:"small"})})]})},P)),e.jsx(Pt,{label:e.jsx(Ue,{sx:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",padding:"10px",height:"30px",width:"30px",border:"2px solid #697586"},children:e.jsx(mn,{onClick:()=>b(),sx:{fontSize:30}})})})]})}),e.jsx(ir,{bill:Z,onReload:M})]})})}export{Dr as default};
