import{w as Nt,r as n,at as je,j as t,aK as rt,f as Ce,i as de,aL as Ot,au as _t,h as ut,T as Mt,d as Ft,c as D,u as Lt,k as Ut,p as Bt,m as $t,aP as Wt,B as Gt,e as Kt,I as qt,b as zt,M as Ke}from"./index-BmIX3_3w.js";import{D as ht,a as Qt,b as Xt,c as Jt}from"./DialogTitle-DH_KFVlR.js";import{D as Yt}from"./DialogContentText-CMYJID_S.js";import{d as Zt,U as en,I as tn,a as dt,C as nn,c as sn,e as an,f as on,S as oe,A as cn}from"./SelectDropOneValue-DNlxDbpt.js";import{I as ln}from"./IconDeviceFloppy-DlwAoPiU.js";import{b as N}from"./back-end-vuWvP0DO.js";import{T as rn,a as un,b as hn,c as it,d as dn}from"./TableRow-COUS1y_I.js";import{T as _}from"./TableCell-BAoyJBRv.js";import{S as fn}from"./Switch-DlsO41Jn.js";import{I as mn}from"./IconTrash-Cxg_n0IN.js";import{d as pn}from"./Add-CGKpRTw5.js";import{M as gn}from"./MenuItem-ByEqL40d.js";import{c as xn}from"./sanPham-DK5xfhaJ.js";import{A as Sn,c as Cn}from"./chiTietSanPham-BtkikjLM.js";import{B as xe}from"./react-toastify.esm-DM11plAz.js";import{N as Se}from"./notification-B40vY8uZ.js";import"./thuonghieu-ChqN5bEG.js";import"./nhucau-C5XayWWG.js";import"./vga-J23ziDCD.js";import"./webcam-DGdTk6m-.js";import"./manHinh-DSCBjIET.js";import"./banPhim-CZwoSdwi.js";import"./heDieuHanh-COjd_uH0.js";import"./ram-Dz5ZrV0x.js";import"./cpu-dPKUxTl1.js";import"./mauSac-Da2ejPzV.js";import"./oCung-CQkC1V92.js";import"./SwitchBase-CzMjO0Un.js";import"./usePreviousProps-CJNzWVvz.js";var bn=Nt("upload","IconUpload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 9l5 -5l5 5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]),jn={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fe=n;function yn(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var vn=typeof Object.is=="function"?Object.is:yn,En=fe.useState,Tn=fe.useEffect,wn=fe.useLayoutEffect,An=fe.useDebugValue;function Rn(e,s){var i=s(),m=En({inst:{value:i,getSnapshot:s}}),r=m[0].inst,d=m[1];return wn(function(){r.value=i,r.getSnapshot=s,qe(r)&&d({inst:r})},[e,i,s]),Tn(function(){return qe(r)&&d({inst:r}),e(function(){qe(r)&&d({inst:r})})},[e]),An(i),i}function qe(e){var s=e.getSnapshot;e=e.value;try{var i=s();return!vn(e,i)}catch{return!0}}function kn(e,s){return s()}var Pn=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?kn:Rn;jn.useSyncExternalStore=fe.useSyncExternalStore!==void 0?fe.useSyncExternalStore:Pn;const te=()=>{},B=te(),ze=Object,W=e=>e===B,ce=e=>typeof e=="function",Ve=(e,s)=>({...e,...s}),In=e=>ce(e.then),ke=new WeakMap;let Vn=0;const be=e=>{const s=typeof e,i=e&&e.constructor,m=i==Date;let r,d;if(ze(e)===e&&!m&&i!=RegExp){if(r=ke.get(e),r)return r;if(r=++Vn+"~",ke.set(e,r),i==Array){for(r="@",d=0;d<e.length;d++)r+=be(e[d])+",";ke.set(e,r)}if(i==ze){r="#";const p=ze.keys(e).sort();for(;!W(d=p.pop());)W(e[d])||(r+=d+":"+be(e[d])+",");ke.set(e,r)}}else r=m?e.toJSON():s=="symbol"?e.toString():s=="string"?JSON.stringify(e):""+e;return r},ee=new WeakMap,Qe={},Pe={},ft="undefined",tt=typeof window!=ft,Je=typeof document!=ft,Hn=(e,s)=>{const i=ee.get(e);return[()=>!W(s)&&e.get(s)||Qe,m=>{if(!W(s)){const r=e.get(s);s in Pe||(Pe[s]=r),i[5](s,Ve(r,m),r||Qe)}},i[6],()=>!W(s)&&s in Pe?Pe[s]:!W(s)&&e.get(s)||Qe]};let Ye=!0;const Dn=()=>Ye,[Ze,et]=tt&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[te,te],Nn=()=>{const e=Je&&document.visibilityState;return W(e)||e!=="hidden"},On=e=>(Je&&document.addEventListener("visibilitychange",e),Ze("focus",e),()=>{Je&&document.removeEventListener("visibilitychange",e),et("focus",e)}),_n=e=>{const s=()=>{Ye=!0,e()},i=()=>{Ye=!1};return Ze("online",s),Ze("offline",i),()=>{et("online",s),et("offline",i)}},Mn={isOnline:Dn,isVisible:Nn},Fn={initFocus:On,initReconnect:_n};je.useId;const mt=!tt||"Deno"in window,Xe=typeof navigator<"u"&&navigator.connection,ot=!mt&&Xe&&(["slow-2g","2g"].includes(Xe.effectiveType)||Xe.saveData),pt=e=>{if(ce(e))try{e=e()}catch{e=""}const s=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?be(e):"",[e,s]};let Ln=0;const ct=()=>++Ln,Un=0,Bn=1,$n=2;async function Wn(...e){const[s,i,m,r]=e,d=Ve({populateCache:!0,throwOnError:!0},typeof r=="boolean"?{revalidate:r}:r||{});let p=d.populateCache;const j=d.rollbackOnError;let h=d.optimisticData;const w=C=>typeof j=="function"?j(C):j!==!1,E=d.throwOnError;if(ce(i)){const C=i,g=[],v=s.keys();for(const x of v)!/^\$(inf|sub)\$/.test(x)&&C(s.get(x)._k)&&g.push(x);return Promise.all(g.map(S))}return S(i);async function S(C){const[g]=pt(C);if(!g)return;const[v,x]=Hn(s,g),[ne,u,A,z]=ee.get(s),me=()=>{const F=ne[g];return(ce(d.revalidate)?d.revalidate(v().data,C):d.revalidate!==!1)&&(delete A[g],delete z[g],F&&F[0])?F[0]($n).then(()=>v().data):v().data};if(e.length<3)return me();let V=m,M;const se=ct();u[g]=[se,0];const L=!W(h),Q=v(),le=Q.data,re=Q._c,G=W(re)?le:re;if(L&&(h=ce(h)?h(G,le):h,x({data:h,_c:G})),ce(V))try{V=V(G)}catch(F){M=F}if(V&&In(V))if(V=await V.catch(F=>{M=F}),se!==u[g][0]){if(M)throw M;return V}else M&&L&&w(M)&&(p=!0,x({data:G,_c:B}));if(p&&!M)if(ce(p)){const F=p(V,G);x({data:F,error:B,_c:B})}else x({data:V,error:B,_c:B});if(u[g][1]=ct(),Promise.resolve(me()).then(()=>{x({_c:B})}),M){if(E)throw M;return}return V}}const lt=(e,s)=>{for(const i in e)e[i][0]&&e[i][0](s)},Gn=(e,s)=>{if(!ee.has(e)){const i=Ve(Fn,s),m={},r=Wn.bind(B,e);let d=te;const p={},j=(E,S)=>{const C=p[E]||[];return p[E]=C,C.push(S),()=>C.splice(C.indexOf(S),1)},h=(E,S,C)=>{e.set(E,S);const g=p[E];if(g)for(const v of g)v(S,C)},w=()=>{if(!ee.has(e)&&(ee.set(e,[m,{},{},{},r,h,j]),!mt)){const E=i.initFocus(setTimeout.bind(B,lt.bind(B,m,Un))),S=i.initReconnect(setTimeout.bind(B,lt.bind(B,m,Bn)));d=()=>{E&&E(),S&&S(),ee.delete(e)}}};return w(),[e,r,w,d]}return[e,ee.get(e)[4]]},Kn=(e,s,i,m,r)=>{const d=i.errorRetryCount,p=r.retryCount,j=~~((Math.random()+.5)*(1<<(p<8?p:8)))*i.errorRetryInterval;!W(d)&&p>d||setTimeout(m,j,r)},qn=(e,s)=>be(e)==be(s),[gt,zn]=Gn(new Map);Ve({onLoadingSlow:te,onSuccess:te,onError:te,onErrorRetry:Kn,onDiscarded:te,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:ot?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:ot?5e3:3e3,compare:qn,isPaused:()=>!1,cache:gt,mutate:zn,fallback:{}},Mn);n.createContext({});const Qn="$inf$",xt=tt&&window.__SWR_DEVTOOLS_USE__,Xn=xt?window.__SWR_DEVTOOLS_USE__:[],Jn=()=>{xt&&(window.__SWR_DEVTOOLS_REACT__=je)},Yn=e=>(s,i,m)=>e(s,i&&((...d)=>{const[p]=pt(s),[,,,j]=ee.get(gt);if(p.startsWith(Qn))return i(...d);const h=j[p];return W(h)?i(...d):(delete j[p],h)}),m);Xn.concat(Yn);Jn();je.use;const Zn=je.forwardRef(function(s,i){return t.jsx(rt,{direction:"up",ref:i,...s})});function es({title:e,message:s,open:i,setOpen:m,serialNumbers:r,setSerialNumbers:d}){const p=()=>{m(!1),d(j)},[j,h]=n.useState({});n.useEffect(()=>{h({...r})},[r]);const w=E=>{const S=E.target.value;console.log("1Seri từ con: ",S),h(C=>({...C,value:S}))};return t.jsx(je.Fragment,{children:t.jsxs(ht,{open:i,TransitionComponent:Zn,keepMounted:!0,onClose:p,"aria-describedby":"alert-dialog-slide-description",sx:{minHeight:"80%",minWidth:"70%"},children:[t.jsx(Qt,{children:e}),t.jsx(Xt,{children:t.jsxs(Yt,{id:"alert-dialog-slide-description",children:[s,t.jsx("br",{}),t.jsx("br",{}),t.jsx(Ce,{fullWidth:!0,rows:10,value:j.value,onChange:w,id:"serial",label:"Danh sách serial number",multiline:!0,maxRows:10})]})}),t.jsx(Jt,{children:t.jsx(de,{color:"secondary",onClick:p,children:"Nhập Serial"})})]})})}const ts=n.forwardRef(function(s,i){return t.jsx(rt,{direction:"up",ref:i,...s})}),ns=({openAlbum:e,setOpenAlbum:s,listAnh:i,nameColor:m,idColor:r,onUpdateImage:d})=>{const[p,j]=n.useState([]);n.useEffect(()=>{j([...i])},[i]);const[h,w]=n.useState([]),E=g=>{if(h.includes(g))w(v=>v.filter(x=>x!==g));else if(h.length<3)w(v=>[...h,g]);else return};n.useEffect(()=>{console.log("imageSelect: ",h)},[h]);const S=()=>{d(r,h),C()};n.useEffect(()=>{},[p]);const C=()=>{s(null)};return t.jsx(n.Fragment,{children:t.jsxs(ht,{fullScreen:!0,open:!0,onClose:C,TransitionComponent:ts,children:[t.jsx(Ot,{sx:{position:"relative",backgroundColor:"#5F35B1"},children:t.jsxs(_t,{children:[t.jsx(ut,{edge:"start",onClick:C,"aria-label":"close",sx:{color:"#FFFFFF"},children:t.jsx(Zt,{})}),t.jsxs(Mt,{sx:{ml:2,flex:1,color:"#FFFFFF"},variant:"h3",component:"div",children:['Chọn tối đa 3 ảnh cho màu "',m,'"']}),t.jsx(de,{title:"Lưu",autoFocus:!0,color:"inherit",onClick:S,children:t.jsx(ln,{stroke:2})}),t.jsx(en,{setUrlImages:j})]})}),t.jsx("div",{style:{padding:" 20px"},children:t.jsx("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:p.map((g,v)=>t.jsxs("div",{style:{width:"16%",position:"relative"},children:[h.includes(g)&&t.jsx(tn,{style:{backgroundColor:"#BBEDFC",color:"#5E35B1",position:"absolute",top:"5px",right:"5px",borderRadius:"7px"},stroke:2}),t.jsx("img",{onClick:()=>E(g),src:g,style:{width:"100%",cursor:"pointer"}})]},v))})})]})})},ss=({listKeySort:e,variantListFromParent:s,setProductVarriant:i,showMessage:m,setResult:r,actionFather:d,listAnh:p,mauSacChecked:j})=>{const[h,w]=n.useState([]),E=(a,c)=>{let f="";for(let b=a;b>=0;b--)f+=c[e[b]].ten;return f},S={},C={};h.forEach((a,c)=>{e.forEach((f,b)=>{const y=`${E(b,a)}`;S[y]===void 0&&(S[y]=0),S[y]++,C[y]===void 0&&(C[y]=c)})});const[g,v]=n.useState(""),x=a=>{const c=a.target.value.replace(/\D/g,"");v(c)},ne=()=>{if(console.log("priceAll: ",g),confirm("Xác nhận thay đổi toàn bộ giá bán thành: ",g)){const a=h.map(c=>({...c,giaBan:g}));w(a)}},[u,A]=n.useState([]),[z,me]=n.useState(!1);n.useEffect(()=>{console.log("imageList: ",u)},[u]);const[V,M]=n.useState(null),se=a=>{M(a)},[L,Q]=n.useState([]);n.useEffect(()=>{console.log("mauSacCheckedSelectAnhcha: ",L)},[L]);const le=(a,c)=>{let f=L.map(b=>b.id===a?{...b,urls:c}:b);Q(f)};n.useEffect(()=>{const a=j.map(c=>({id:c.id,ten:c.ten,urls:[]}));Q(a)},[j]);const re=()=>{const a=[];for(let f=0;f<h.length;f++)a.includes(h[f].mauSac.id)||a.push(h[f].mauSac.id);console.log("mauSacCheckedSelectAnh1111: ",L),console.log("variantMau: ",a);const c=L.filter(f=>a.includes(f.id));console.log("temp: ",c),Q(c)};n.useEffect(()=>{w([]),w([...s])},[s]),n.useEffect(()=>{A([...p])},[p]),n.useEffect(()=>{console.log("variantList:",h)},[h]);const G=a=>{confirm("Xác nhận xóa")&&(h.splice(a,1),i(h),re())},F=a=>c=>{const f=c.target.value.replace(/\D/g,""),b=h.map((k,y)=>y===a?{...k,giaBan:f}:k);w(b)},ye=a=>c=>{let f=0;c.target.checked&&(f=1);const b=h.map((k,y)=>y===a?{...k,trangThai:f}:k);w(b)},[He,ve]=n.useState(!1),[$,De]=n.useState({index:-1,value:""});n.useEffect(()=>{console.log($)},[$]);const K=a=>{De(c=>({index:a,value:h[a].serialNumberList.join(",")})),ve(!0)},Ne=async a=>{const c=[];async function f(R){let I=null;try{I=await D.get(`${N}/serial-number/exist-for-add?ma=${R}`)}catch(Te){Te.response&&(I=Te.response.data)}return console.log(I.data),I.data.data?(c.push(R),console.log("listSerialExist: ",c),!0):!1}let b=a.value.split(",").map(R=>R.trim());b.length===1&&b[0]===""&&(b=[]);const k=[];console.log("ListValid before: ",k);const y=[],_e=/^[a-zA-Z0-9-]+$/;for(const R of b)R.length<7||R.length>20?y.push(R):_e.test(R)||y.push(R);if(y.length>0){m("Serial phải từ 7-20 ký tự chữ số, các serial sau không hợp lệ: "+y.join(","));return}for(const R of b){const I=await f(R);console.log("Kết quả hàm: ",I),I==!1&&(console.log("vào nè"),k.push(R))}console.log("ListValid after: ",k);const X=h.map((R,I)=>I===a.index?{...R,serialNumberList:k}:R);c.length>0&&m("Đã loại bỏ các serial đã tồn tại sau","Danh sách: "+c.join(",")),w(X)},Ee=()=>{const a=Oe();if(console.log("check: ",a),a.check)r(h),d();else{let c="";a.message!==""&&(c+="Giá không hợp lệ tại dòng "+a.message,c=c.substring(0,c.length-2)),a.isDulicateSeri&&(c+=`
 | Serial Number nhập trong danh sách bị trùng lặp.`),m(c)}},Oe=()=>{console.log("run validate");let a={check:!0,message:"",seriVuaNhap:[],isDulicateSeri:!1},c=[];return h.forEach((f,b)=>{L.forEach(k=>{f.mauSac.id===k.id&&(f.anhSanPham=k.urls)}),(f.giaBan===""||isNaN(f.giaBan)||parseFloat(f.giaBan)<=0)&&(a.check=!1,a.message+=b+1+", "),Array.isArray(f.serialNumberList)?console.log("...item.serialNumberList: ",f.serialNumberList):console.log("k phải array"),c=[...c,...f.serialNumberList]}),console.log("seriVuaNhap ",c),new Set(c).size!=c.length&&(a.check=!1,a.isDulicateSeri=!0),a};function q(a,c="vi-VN",f="VND"){return new Intl.NumberFormat(c,{style:"decimal",currency:f}).format(a)}return t.jsxs("div",{children:[t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx(Ce,{label:"Nhập giá chung",id:"outlined-start-adornment",sx:{m:1,width:"25ch"},value:q(g),onChange:x}),t.jsx(de,{onClick:ne,variant:"contained",color:"secondary",sx:{height:"47px",borderRadius:"7px",marginTop:"10px"},children:t.jsx(dt,{})})]}),t.jsx(rn,{component:Ft,children:t.jsxs(un,{children:[t.jsx(hn,{children:t.jsxs(it,{children:[t.jsx(_,{children:"STT"}),e.map(a=>a==="RAM"&&t.jsx(_,{children:"Ram"},"ram")||a==="CPU"&&t.jsx(_,{children:"Cpu"},"cpu")||a==="oCung"&&t.jsx(_,{children:"Ổ cứng"},"oCung")||a==="mauSac"&&t.jsx(_,{children:"Màu sắc"},"mauSac")),t.jsx(_,{children:"Số lượng"}),t.jsx(_,{children:"Giá bán"}),t.jsx(_,{children:"Hành động"})]})}),t.jsx(dn,{children:h.map((a,c)=>t.jsx(t.Fragment,{children:t.jsxs(it,{children:[t.jsx(_,{children:c+1}),e.map((f,b)=>{const y=`${E(b,a)}`;return C[y]===c?t.jsx(_,{rowSpan:S[y],children:a[e[b]].ten},f):null}),t.jsx(_,{children:a.serialNumberList.length}),t.jsx(_,{children:t.jsx(Ce,{value:q(a.giaBan),onChange:F(c),label:"Giá bán",variant:"standard",fullWidth:!0,color:"secondary"})}),t.jsx(_,{children:t.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[t.jsx(bn,{onClick:()=>K(c),style:{color:"#2195F2",fontSize:"20px",backgroundColor:"#bbedfc",borderRadius:"7px",padding:"5px",cursor:"pointer"}}),t.jsx(fn,{onChange:ye(c),defaultChecked:a.trangThai===1,color:"secondary"})]})}),t.jsx(_,{sx:{color:"#EF4444"},children:t.jsx(mn,{stroke:2,onClick:()=>{G(c)}})})]},c)}))})]})}),t.jsx("div",{style:{padding:"20px",margin:"50px 0 20px 0",textAlign:"center"},children:t.jsx("h3",{style:{fontSize:"20px",fontWeight:"bolder",marginBottom:"20px"},children:"Chọn ảnh theo màu sắc"})}),L.map(a=>t.jsxs("div",{style:{display:"flex",margin:"10px 0",minHeight:"115px"},children:[t.jsxs("div",{style:{width:"30%"},children:[t.jsxs(de,{color:"secondary",variant:"outlined",onClick:()=>se(a.id),children:["Màu ",a.ten]}),V===a.id&&t.jsx(ns,{openAlbum:z,setOpenAlbum:se,listAnh:u,nameColor:a.ten,idColor:a.id,onUpdateImage:le},a.id)]}),t.jsx("div",{style:{width:"70%",display:"flex"},children:a.urls.map(c=>t.jsx("div",{style:{width:"100px",margin:"5px"},children:t.jsx("img",{src:c,style:{width:"100%"}})}))})]},a.id)),t.jsx("div",{style:{textAlign:"center",padding:"20px 0"},children:t.jsx(de,{title:"Xác nhận",variant:"contained",color:"secondary",sx:{height:"47px",borderRadius:"7px",marginTop:"10px"},onClick:Ee,children:"Xác nhận"})}),t.jsx("div",{children:t.jsx(es,{open:He,setOpen:ve,title:"Nhập serial number cho biến thể",message:"Hãy phân cách các serial bằng dấu phẩy (,)",serialNumbers:$,setSerialNumbers:Ne})})]})},Ie=({list:e,setListChecked:s,nameDropDown:i,fetchAgain:m})=>{const p={PaperProps:{style:{maxHeight:224,width:150}}};function j(u,A,z){return{fontWeight:A.indexOf(u)===-1?z.typography.fontWeightRegular:z.typography.fontWeightMedium}}const h=Lt();n.useState([]);const[w,E]=n.useState([]),[S,C]=n.useState([]);n.useEffect(()=>{const u=S.map(A=>A);s(u),E(S.map(A=>A.ten))},[S]);const g=u=>{const{value:A}=u.target;C(A)},[v,x]=n.useState({thuongHieu:!1,nhuCau:!1,vga:!1,webcam:!1,manHinh:!1,banPhim:!1,heDieuHanh:!1,ram:!1,cpu:!1,oCung:!1,mauSac:!1}),ne=()=>{i==="Thương hiệu"&&x(u=>({...u,thuongHieu:!0})),i==="Nhu cầu"&&x(u=>({...u,nhuCau:!0})),i==="VGA"&&x(u=>({...u,vga:!0})),i==="Webcam"&&x(u=>({...u,webcam:!0})),i==="Màn hình"&&x(u=>({...u,manHinh:!0})),i==="Bàn phím"&&x(u=>({...u,banPhim:!0})),i==="Hệ điều hành"&&x(u=>({...u,heDieuHanh:!0})),i==="RAM"&&x(u=>({...u,ram:!0})),i==="CPU"&&x(u=>({...u,cpu:!0})),i==="Ổ cứng"&&x(u=>({...u,oCung:!0})),i==="Màu sắc"&&x(u=>({...u,mauSac:!0}))};return t.jsx("div",{children:t.jsxs(Ut,{sx:{width:220},children:[t.jsx(Bt,{id:"demo-multiple-chip-label",color:"secondary",children:i}),t.jsx($t,{labelId:"demo-multiple-chip-label",id:"demo-multiple-chip",color:"secondary",multiple:!0,sx:{minHeight:"62.9px"},value:S,onChange:g,input:t.jsx(Wt,{id:"select-multiple-chip",label:"Chip"}),renderValue:u=>t.jsx(Gt,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:u.map(A=>t.jsx(Kt,{label:A.ten,sx:{backgroundColor:"#EDE7F6"}},A.id))}),endAdornment:t.jsxs(qt,{style:{marginRight:"10px"},position:"end",children:[t.jsx(ut,{onClick:()=>ne(),children:t.jsx(pn,{})}),v.ram==!0&&t.jsx(nn,{fetchRams:m,setHide:x}),v.cpu==!0&&t.jsx(sn,{fetchRams:m,setHide:x}),v.oCung==!0&&t.jsx(an,{fetchRams:m,setHide:x}),v.mauSac==!0&&t.jsx(on,{fetchRams:m,setHide:x})]}),MenuProps:p,children:e.map(u=>t.jsx(gn,{value:u,style:j(u.ten,S.map(A=>A.ten),h),children:u.ten},u.id))})]})})},Ds=()=>{const e=zt(),[s,i]=n.useState(!1),[m,r]=n.useState(""),[d,p]=n.useState(""),[j,h]=n.useState(["https://photo.znews.vn/w660/Uploaded/mdf_eioxrd/2021_07_06/2.jpg","https://photo.znews.vn/w660/Uploaded/mdf_eioxrd/2021_07_06/2.jpg"]),[w,E]=n.useState([]),[S,C]=n.useState([]),[g,v]=n.useState([]),[x,ne]=n.useState([]),[u,A]=n.useState([]),[z,me]=n.useState([]),[V,M]=n.useState([]),[se,L]=n.useState([]),[Q,le]=n.useState([]),[re,G]=n.useState([]),[F,ye]=n.useState([]),[He,ve]=n.useState([]),[$,De]=n.useState(""),[K,Ne]=n.useState(""),[Ee,Oe]=n.useState([]),[q,a]=n.useState([]),[c,f]=n.useState([]),[b,k]=n.useState([]),[y,_e]=n.useState(""),[X,R]=n.useState(""),[I,Te]=n.useState(""),[ue,St]=n.useState(""),[he,Ct]=n.useState(""),[pe,bt]=n.useState(""),[we,jt]=n.useState(""),[yt,vt]=n.useState([]),[as,nt]=n.useState(!0);n.useEffect(()=>{U()},[]);const U=async()=>{const o=await D.get(`${N}/san-pham/all-list-active`),l=await D.get(`${N}/nhu-cau/all-list-active`),H=await D.get(`${N}/thuong-hieu/all-list-active`),P=await D.get(`${N}/ram/all-list-active`),O=await D.get(`${N}/mau-sac/all-list-active`),Z=await D.get(`${N}/cpu/all-list-active`),Fe=await D.get(`${N}/vga/all-list-active`),Le=await D.get(`${N}/webcam/all-list-active`),Ue=await D.get(`${N}/o-cung/all-list-active`),Be=await D.get(`${N}/man-hinh/all-list-active`),$e=await D.get(`${N}/he-dieu-hanh/all-list-active`),We=await D.get(`${N}/ban-phim/all-list-active`),Ge=await D.get(`${N}/anh-san-pham/list`);E(o.data.data),C(l.data.data),v(H.data.data),ne(P.data.data),A(O.data.data),me(Z.data.data),M(Fe.data.data),L(Le.data.data),le(Ue.data.data),G(Be.data.data),ye($e.data.data),ve(We.data.data),vt(Ge.data.data)},[Ae,Me]=n.useState([]),[ae,ge]=n.useState({}),[J,Et]=n.useState([]),[T,Y]=n.useState([]),Tt=async o=>{const l=await D.get(`${N}/san-pham/exist-name?name=${o}`);return console.log("checkUniqueNameProduct: ",l),l.data.code!==999},wt=async()=>{let o=!0;(y===""||we===""||pe===""||he===""||ue===""||I===""||X===""||$===""||K===""||y===void 0||we===void 0||pe===void 0||he===void 0||ue===void 0||I===void 0||X===void 0||$===void 0||K===void 0)&&(o=!1,Re("Hãy nhập thông tin sản phẩm"));let l=await Tt(pe);l||Re("Tên sản phẩm đã tồn tại"),console.log("--VGAChecked: ",y),console.log("--moTa: ",we),console.log("--tenSanPham: ",pe),console.log("--banPhimChecked: ",he),console.log("--heDieuHanhChecked: ",ue),console.log("--manHinhChecked: ",I),console.log("--webcamChecked: ",X),console.log("--nhuCauChecked: ",$),console.log("--thuongHieuChecked: ",K),console.log("--check: ",o),console.log("--resultVariant.length > 0: ",T.length>0),console.log("--isUnique: ",l),o==!0&&T.length>0&&l&&Ht()};n.useEffect(()=>{console.log("resultVariant truyền lên cha: ",T)},[T]),n.useEffect(()=>{if(Object.keys(ae).length>0){const l=Object.keys(ae);l.sort((P,O)=>ae[P].length-ae[O].length);const H=l.filter(P=>P!=="mauSac");H.push("mauSac"),console.log("Key sau khi đổi chỗ: ",H),Et(H)}},[ae]);const[At,Rt]=n.useState([]);n.useEffect(()=>{console.log("Giá trị selectedKey: ",J),J.length===4?(st(0,kt),Rt(J)):J.length!==4&&J.length!==0&&Re("Thiếu thông tin để tạo biến thể","Vui lòng chọn đủ 4 thuộc tính Ram, Cpu, Ổ cứng, màu sắc")},[J]),n.useEffect(()=>{j.length>=q.length*3&&nt(!1),console.log("urlImages: ",j)},[j]),n.useEffect(()=>{q.length>0&&nt(!0)},[q]);const[kt,ie]=n.useState({giaBan:"",trangThai:1,RAM:null,CPU:null,oCung:null,mauSac:null,banPhim:null,manHinh:null,VGA:null,heDieuHanh:null,webcam:null,serialNumberList:[],anhSanPham:[]});n.useState({ten:"",moTa:"",trangThai:"",nhuCauId:"",thuongHieuId:""}),n.useEffect(()=>{if(ie(o=>({...o,VGA:y})),T.length>0){const o=T.map(l=>({...l,VGA:y}));Y(o)}},[y]),n.useEffect(()=>{if(ie(o=>({...o,heDieuHanh:ue})),T.length>0){const o=T.map(l=>({...l,heDieuHanh:ue}));Y(o)}},[ue]),n.useEffect(()=>{if(ie(o=>({...o,webcam:X})),T.length>0){const o=T.map(l=>({...l,webcam:X}));Y(o)}},[X]),n.useEffect(()=>{if(ie(o=>({...o,manHinh:I})),T.length>0){const o=T.map(l=>({...l,manHinh:I}));Y(o)}},[I]),n.useEffect(()=>{if(ie(o=>({...o,banPhim:he})),T.length>0){const o=T.map(l=>({...l,banPhim:he}));Y(o)}},[he]),n.useEffect(()=>{if(ie(o=>({...o,thuongHieu:K})),T.length>0){const o=T.map(l=>({...l,thuongHieu:K}));Y(o)}},[K]),n.useEffect(()=>{if(ie(o=>({...o,nhuCau:$})),T.length>0){const o=T.map(l=>({...l,nhuCau:$}));Y(o)}},[$]);const Pt=()=>{ge({}),Me([]),Ee.length>0&&ge(o=>({...o,RAM:[...Ee]})),c.length>0&&ge(o=>({...o,CPU:[...c]})),b.length>0&&ge(o=>({...o,oCung:[...b]})),q.length>0&&ge(o=>({...o,mauSac:[...q]}))},st=(o,l)=>{if(console.log("chạy generateVariant"),o===J.length){Me(O=>[...O,l]);return}const H=J[o],P=ae[H];console.log("nameKey: ",H),console.log("valueOfKey: ",P),P.forEach(O=>{const Z={...l,[H]:{...O}};st(o+1,Z)})};n.useEffect(()=>{console.log("productVarriant: ",Ae),console.log("selectAttribute: ",ae)},[Ae]);const Re=(o,l)=>{r(o),p(l),i(!0)},It=async({ten:o,trangThai:l,moTa:H,nhuCauId:P,thuongHieuId:O})=>{const Z=await xn({ten:o,trangThai:l,moTa:H,nhuCauId:P,thuongHieuId:O});if(!Z){xe.error(Se.ERROR);return}return Z},Vt=async({giaBan:o,trangThai:l,banPhimId:H,cpuId:P,heDieuHanhId:O,manHinhId:Z,mauSacId:Fe,ramId:Le,sanPhamId:Ue,vgaId:Be,webcamId:$e,ocungId:We,listSerialNumber:Ge,listUrlAnhSanPham:Dt})=>{const at=await Cn({giaBan:o,trangThai:l,banPhimId:H,cpuId:P,heDieuHanhId:O,manHinhId:Z,mauSacId:Fe,ramId:Le,sanPhamId:Ue,vgaId:Be,webcamId:$e,ocungId:We,listSerialNumber:Ge,listUrlAnhSanPham:Dt});if(!at){xe.error(Se.ERROR);return}return at},Ht=async()=>{const o=await It({ten:pe,trangThai:1,moTa:we,nhuCauId:$,thuongHieuId:K});if(o.code===999){xe.error(Se.ERROR);return}T.forEach(async(l,H)=>{let P={giaBan:l.giaBan,trangThai:l.trangThai,banPhimId:l.banPhim,cpuId:l.CPU.id,heDieuHanhId:l.heDieuHanh,manHinhId:l.manHinh,mauSacId:l.mauSac.id,ramId:l.RAM.id,vgaId:l.VGA,webcamId:l.webcam,ocungId:l.oCung.id,sanPhamId:o.id,listSerialNumber:"",listUrlAnhSanPham:""};l.serialNumberList.length>0&&(P.listSerialNumber=l.serialNumberList.join(",")),l.anhSanPham.length>0&&(P.listUrlAnhSanPham=l.anhSanPham.join(",")),console.log("product: ",P);const O=await Vt(P);if(!O||O.code===999){xe.error(Se.ERROR);return}H===T.length-1&&(xe.success(Se.CREATED),e("/sanpham/danhsach"))})};return t.jsxs(t.Fragment,{children:[t.jsxs(Ke,{children:[t.jsxs("div",{children:[t.jsxs("div",{style:{padding:"10px"},children:[t.jsx("h3",{children:"Nhập thông tin sản phẩm"}),t.jsx("div",{style:{margin:"15px 0",display:"flex",justifyContent:"space-between"},children:t.jsx(Sn,{sx:{width:"68%"},id:"free-solo-demo",freeSolo:!0,options:w.map(o=>o.ten),renderInput:o=>t.jsx(Ce,{...o,id:"nameProduct",label:"Tên sản phẩm",variant:"outlined",color:"secondary",onChange:l=>bt(l.target.value)})})}),t.jsx("div",{children:t.jsx(Ce,{id:"descriptionProduct",label:"Mô tả sản phẩm",multiline:!0,rows:4,variant:"outlined",fullWidth:!0,color:"secondary",onChange:o=>jt(o.target.value)})})]}),t.jsxs("div",{children:[t.jsx(oe,{fetchAgain:U,list:g,setValueSelect:Ne,name:"Thương hiệu"}),t.jsx(oe,{fetchAgain:U,list:S,setValueSelect:De,name:"Nhu cầu"}),t.jsx(oe,{fetchAgain:U,list:V,setValueSelect:_e,name:"VGA"}),t.jsx(oe,{fetchAgain:U,list:se,setValueSelect:R,name:"Webcam"}),t.jsx(oe,{fetchAgain:U,list:re,setValueSelect:Te,name:"Màn hình"}),t.jsx(oe,{fetchAgain:U,list:He,setValueSelect:Ct,name:"Bàn phím"}),t.jsx(oe,{fetchAgain:U,list:F,setValueSelect:St,name:"Hệ điều hành"})]})]}),t.jsx("div",{children:t.jsx(cn,{title:m,message:d,open:s,setOpen:i})})]}),t.jsx(Ke,{style:{marginTop:"20px"},children:t.jsxs("div",{style:{padding:"10px"},children:[t.jsx("h3",{style:{fontSize:"20px",fontWeight:"bolder",marginBottom:"20px"},children:"Chọn các thuộc tính"}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[t.jsx(Ie,{fetchAgain:U,list:x,setListChecked:Oe,nameDropDown:"RAM"}),t.jsx(Ie,{fetchAgain:U,list:z,setListChecked:f,nameDropDown:"CPU"}),t.jsx(Ie,{fetchAgain:U,list:Q,setListChecked:k,nameDropDown:"Ổ cứng"}),t.jsx(Ie,{fetchAgain:U,list:u,setListChecked:a,nameDropDown:"Màu sắc"}),t.jsx(de,{variant:"contained",onClick:Pt,color:"secondary",sx:{height:"60px",borderRadius:"7px"},children:t.jsx(dt,{})})]})]})}),t.jsx(Ke,{style:{marginTop:"20px"},children:t.jsx("div",{style:{padding:"10px"},children:Ae.length>0&&t.jsx(ss,{listKeySort:At,variantListFromParent:Ae,setProductVarriant:Me,showMessage:Re,setResult:Y,actionFather:wt,listAnh:yt,mauSacChecked:q})})})]})};export{Ds as default};
