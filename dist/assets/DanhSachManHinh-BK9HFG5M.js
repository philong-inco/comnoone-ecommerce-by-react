import{r as d,j as e,h as A,aq as R,ar as N,as as H,B as I,f,i as C,M as z,d as D,k as B,p as O,m as W,c as F}from"./index-C3AKKGhn.js";import{b as K}from"./back-end-vuWvP0DO.js";import{I as V,u as M,a as U,c as $,f as L}from"./manHinh-DO0ICCjt.js";import{B as P}from"./react-toastify.esm-BgZIXYS1.js";import{N as v}from"./notification-B40vY8uZ.js";import{E as X}from"./Edit-BdLQoyQM.js";import{A as q}from"./Add-CIMKSK4g.js";import{M as w}from"./MenuItem-BPROy0V0.js";import{T as J,a as Q,b as Y,c as G,d as Z}from"./TableRow-B_CqS-KR.js";import{T as y}from"./TableCell-H1HogFdd.js";import{S as E}from"./Switch-DQniZdEO.js";import{T as _}from"./TablePagination-BljFDuGW.js";import"./SwitchBase-BbMjoehg.js";import"./KeyboardArrowRight-CMlb_Nei.js";import"./LastPage-BFOqoU3v.js";const ee={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",border:"2px solid #673AB7",borderRadius:"10px",p:5};function ae({fetchRams:j,info:o}){const[g,x]=d.useState(!1),u=()=>x(!0),t=()=>{b(),x(!1)},[i,s]=d.useState({ten:"",doPhanGiai:"",kichThuoc:"",trangThai:1}),[r,p]=d.useState({ten:"",doPhanGiai:"",kichThuoc:"",trangThai:1});d.useEffect(()=>{o&&g&&s({ten:o.ten,doPhanGiai:o.doPhanGiai,kichThuoc:o.kichThuoc,trangThai:1})},[o,g]);const T=l=>{const{value:a,name:n}=l.target;s({...i,[n]:a}),p({...r,[n]:a?"":"Trường này không được để trống"})},b=()=>{s({ten:"",doPhanGiai:"",kichThuoc:"",trangThai:1}),p({ten:"",doPhanGiai:"",kichThuoc:"",trangThai:1})},h=async()=>{let l=!0;const a={...r};for(const m in i)i[m]||(a[m]="Trường này không được để trống",l=!1);p(a);const n=await V(i.ten,o.id);n||(l=!1,console.log("checkName: ",n),alert("Tên đã tồn tại")),l&&(await M({id:o.id,doPhanGiai:i.doPhanGiai,kichThuoc:i.kichThuoc,ten:i.ten,trangThai:i.trangThai})?(P.success(v.CREATED),j(),t()):P.error(v.ERROR))};return e.jsxs("div",{children:[e.jsx(A,{sx:{color:"#6C6C6C"},onClick:u,children:e.jsx(X,{})}),e.jsx(R,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:g,onClose:t,closeAfterTransition:!0,slots:{backdrop:N},slotProps:{backdrop:{timeout:500}},children:e.jsx(H,{in:g,children:e.jsxs(I,{sx:ee,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"40px",textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"30px"},children:"CHỈNH SỬA"}),e.jsx(f,{label:"Tên Màn Hình",style:{width:"100%"},name:"ten",error:!!r.ten,helperText:r.ten,onChange:T,value:i.ten}),e.jsx(f,{label:"Độ Phân Giải",style:{width:"100%"},name:"doPhanGiai",error:!!r.doPhanGiai,helperText:r.doPhanGiai,onChange:T,value:i.doPhanGiai}),e.jsx(f,{label:"Kích Thước",style:{width:"100%"},name:"kichThuoc",error:!!r.kichThuoc,helperText:r.kichThuoc,onChange:T,value:i.kichThuoc})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{style:{marginTop:"10px",fontStyle:"italic",color:"gray"},children:[e.jsxs("p",{children:["Ngày tạo: ",o.ngayTao]}),e.jsxs("p",{children:["Người tạo: ",o.nguoiTao]}),e.jsxs("p",{children:["Ngày sửa: ",o.ngaySua]}),e.jsxs("p",{children:["Người sửa: ",o.nguoiSua]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"end",alignItems:"end",marginTop:"20px",gap:"10px"},children:[e.jsx(C,{variant:"contained",color:"secondary",onClick:t,children:"Hủy"}),e.jsx(C,{variant:"contained",color:"secondary",onClick:h,children:"Xác Nhận"})]})]})]})})})]})}const ne={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",border:"2px solid #673AB7",borderRadius:"10px",p:5};function te({fetchRams:j}){const[o,g]=d.useState(!1),x=()=>g(!0),u=()=>{T(),g(!1)},[t,i]=d.useState({ten:"",doPhanGiai:"",kichThuoc:"",trangThai:1}),[s,r]=d.useState({ten:"",doPhanGiai:"",kichThuoc:"",trangThai:1}),p=h=>{const{value:l,name:a}=h.target;i({...t,[a]:l}),r({...s,[a]:l?"":"Trường này không được để trống"})},T=()=>{i({ten:"",doPhanGiai:"",kichThuoc:"",trangThai:1}),r({ten:"",doPhanGiai:"",kichThuoc:"",trangThai:1})},b=async()=>{let h=!0;const l={...s};for(const n in t)t[n]||(l[n]="Trường này không được để trống",h=!1);r(l);const a=await U(t.ten);a||(h=!1,console.log("checkName: ",a),alert("Tên đã tồn tại")),h&&(await $({ten:t.ten,doPhanGiai:t.doPhanGiai,kichThuoc:t.kichThuoc,trangThai:t.trangThai})?(P.success(v.CREATED),j(),u()):P.error(v.ERROR))};return e.jsxs("div",{children:[e.jsx(C,{variant:"contained",color:"secondary",endIcon:e.jsx(q,{}),onClick:x,children:"Tạo mới"}),e.jsx(R,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:o,onClose:u,closeAfterTransition:!0,slots:{backdrop:N},slotProps:{backdrop:{timeout:500}},children:e.jsx(H,{in:o,children:e.jsxs(I,{sx:ne,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"40px",textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"30px"},children:"THÊM MÀN HÌNH"}),e.jsx(f,{label:"Tên Màn Hình",style:{width:"100%"},name:"ten",error:!!s.ten,helperText:s.ten,onChange:p}),e.jsx(f,{label:"Độ Phân Giải",style:{width:"100%"},name:"doPhanGiai",error:!!s.doPhanGiai,helperText:s.doPhanGiai,onChange:p}),e.jsx(f,{label:"Kích thước",style:{width:"100%"},name:"kichThuoc",error:!!s.kichThuoc,helperText:s.kichThuoc,onChange:p})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"end",alignItems:"end",marginTop:"20px",gap:"10px"},children:[e.jsx(C,{variant:"contained",color:"secondary",onClick:u,children:"Hủy"}),e.jsx(C,{variant:"contained",color:"secondary",onClick:b,children:"Xác Nhận"})]})]})})})]})}const je=()=>{const j=[{id:"ma",label:"Mã",minWidth:70},{id:"ten",label:"Tên",minWidth:300},{id:"doPhanGiai",label:"Độ phân giải",minWidth:120},{id:"kichThuoc",label:"Kích thước",minWidth:80},{id:"hanhDong",label:"Hành động",minWidth:170}],[o,g]=d.useState({pageNo:"",pageSize:"",totalPage:"",totalElement:""}),[x,u]=d.useState([]);d.useEffect(()=>{console.log("data: ",x)},[x]);const[t,i]=d.useState({page:"0",size:"5",name:"",trangThai:""});d.useEffect(()=>{console.log("filter: ",t),s()},[t]);const s=async()=>{const a=await L(t);u(a.data.data),g(n=>({...n,pageNo:a.data.pageNo,pageSize:a.data.pageSize,totalPage:a.data.totalPage,totalElement:a.data.totalElement}))},r=a=>{i(n=>({...n,page:0,size:5,name:a.target.value}))},p=a=>{i(n=>({...n,page:0,size:5,trangThai:a.target.value}))},T=(a,n)=>{console.log("newPage: ",n),i(m=>({...m,page:n}))},b=a=>{i(n=>({...n,size:a.target.value}))},h=a=>n=>{n.target.checked?l(a,1):l(a,0)},l=async(a,n)=>{let c=(await F.get(`${K}/man-hinh/detail/${a}`)).data.data;console.log("temp: ",c);let k={...c,trangThai:n};console.log("temp1: ",k),await M(k),s()};return e.jsx("div",{children:e.jsx(z,{children:e.jsxs(D,{sx:{width:"100%",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"10px"},children:[e.jsxs("div",{children:[e.jsx(f,{sx:{width:"400px"},color:"secondary",onChange:r,id:"outlined-basic",label:"Tìm theo tên",variant:"outlined"}),e.jsxs(B,{sx:{width:"200px",marginLeft:"20px"},children:[e.jsx(O,{id:"demo-simple-select-label",children:"Trạng Thái"}),e.jsxs(W,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:t.trangThai,label:"Trạng thái",onChange:p,children:[e.jsx(w,{value:"",children:"Tất cả"}),e.jsx(w,{value:1,children:"Hoạt động"}),e.jsx(w,{value:0,children:"Không hoạt động"})]})]})]}),e.jsx("div",{children:e.jsx(te,{fetchRams:s})})]}),e.jsx(J,{sx:{maxHeight:440},children:e.jsxs(Q,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(Y,{children:e.jsxs(G,{children:[e.jsx(y,{children:"STT"}),j.map(a=>e.jsx(y,{align:a.align,style:{minWidth:a.minWidth},children:a.label},a.id))]})}),e.jsx(Z,{children:x.map((a,n)=>{const m=t.page*t.size+n+1;return e.jsxs(G,{hover:!0,role:"checkbox",tabIndex:-1,children:[e.jsx(y,{align:"left",children:m}),j.map(c=>{const k=a[c.id];if(c.id==="trangThai")return e.jsx(y,{align:c.align,children:k===1?"Hoạt động":"Đã tắt"},c.id);if(c.id==="hanhDong"){let S=a.trangThai;return e.jsx("div",{style:{display:"flex"},children:e.jsxs(y,{sx:{display:"flex"},align:c.align,children:[e.jsx(ae,{fetchRams:s,info:a}),S===1&&e.jsx(E,{defaultChecked:!0,color:"secondary",onChange:h(a.id)}),S===0&&e.jsx(E,{color:"secondary",onChange:h(a.id)})]},c.id)})}return e.jsx(y,{align:c.align,children:k},c.id)})]},a.code)})})]})}),e.jsx(_,{rowsPerPageOptions:[5,10,25,50,100],component:"div",count:o.totalElement,rowsPerPage:t.size,page:t.page,onPageChange:T,onRowsPerPageChange:b})]})})})};export{je as default};
