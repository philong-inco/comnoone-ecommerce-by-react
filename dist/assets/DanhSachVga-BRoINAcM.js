import{c as C,r as l,j as e,m as T,ax as k,ay as N,az as A,B as D,f as w,h as M,M as $,n as v,t as L,o as S}from"./index-DkjfH3Nj.js";import{B as f}from"./react-toastify.esm-BvxhtGjR.js";import{N as b}from"./notification-B40vY8uZ.js";import{b as E}from"./back-end-vuWvP0DO.js";import{A as I}from"./Add-BmWZAlNn.js";import{E as B,S as O}from"./sweetalert2.esm.all-WZ1a4pXy.js";import{M as j}from"./MenuItem-B1FZ8Sxq.js";import{D as H}from"./Delete-CGNBZUkl.js";import{D as P}from"./DataGrid-pcOpsUtY.js";import"./toPropertyKey-PLuKRk1e.js";import"./Autocomplete-Cq8bYuq6.js";import"./Close-DQEw0W5Z.js";import"./index-DPnwyd78.js";import"./Checkbox-CJjLKa6W.js";import"./CircularProgress-C_rxJWba.js";import"./TablePagination-De1m2AAw.js";import"./KeyboardArrowRight-BY8qYOjh.js";import"./LastPage-CMxtDi2C.js";import"./TableCell-BUbxn9S2.js";import"./useThemeProps-C91a8WKB.js";const R="vga",V=async({ten:o,dungLuong:a,tocDoBus:s,trangThai:d})=>{var c;try{const n=await C.post(`${E}/${R}/add`,{ten:o,dungLuong:a,tocDoBus:s,trangThai:d});return(c=n==null?void 0:n.data)==null?void 0:c.data}catch(n){console.log("Error createNewRam",n)}},z=async({page:o,size:a})=>{try{return await C.get(`${E}/${R}/all?page=${o}&limit=${a}`)}catch(s){console.log("Error createNewRam",s)}},F=async({id:o})=>{try{return await C.delete(`${E}/${R}/delete/${o}`)}catch(a){console.log("Error deleteRam",a)}},G=async({id:o,ten:a,dungLuong:s,tocDoBus:d,trangThai:c})=>{try{return await C.put(`${E}/${R}/update/${o}`,{id:o,ten:a,dungLuong:s,tocDoBus:d,trangThai:c})}catch(n){console.log("Error updateRam",n)}},U={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",border:"2px solid #000",p:5};function W({fetchRams:o}){const[a,s]=l.useState(!1),d=()=>s(!0),c=()=>{y(),s(!1)},[n,i]=l.useState({ten:"",dungLuong:"",trangThai:1}),[g,h]=l.useState({ten:"",dungLuong:"",trangThai:1}),m=x=>{const{value:t,name:r}=x.target;i({...n,[r]:t}),h({...g,[r]:t?"":"Trường này không được để trống"})},y=()=>{i({ten:"",dungLuong:"",trangThai:1}),h({ten:"",dungLuong:"",trangThai:1})},p=async()=>{let x=!0;const t={...g};for(const r in n)n[r]||(t[r]="Trường này không được để trống",x=!1);h(t),x&&(await V({dungLuong:n.dungLuong,ten:n.ten,trangThai:n.trangThai})?(f.success(b.CREATED),o(),c()):f.error(b.ERROR))};return e.jsxs("div",{children:[e.jsx(T,{endIcon:e.jsx(I,{}),onClick:d,children:"Tạo mới"}),e.jsx(k,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:a,onClose:c,closeAfterTransition:!0,slots:{backdrop:N},slotProps:{backdrop:{timeout:500}},children:e.jsx(A,{in:a,children:e.jsxs(D,{sx:U,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"40px",textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"30px"},children:"THÊM VGA"}),e.jsx(w,{label:"Tên VGA",style:{width:"100%"},name:"ten",error:!!g.ten,helperText:g.ten,onChange:m}),e.jsx(w,{label:"Dung lượng",style:{width:"100%"},name:"dungLuong",error:!!g.dungLuong,helperText:g.dungLuong,onChange:m})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"end",alignItems:"end",marginTop:"20px",gap:"10px"},children:[e.jsx(T,{className:"btn",onClick:c,children:"Hủy"}),e.jsx(T,{className:"btn",onClick:p,children:"Xác Nhận"})]})]})})})]})}const X={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",border:"2px solid #000",p:5};function Y({fetchRams:o,info:a}){const[s,d]=l.useState(!1),c=()=>d(!0),n=()=>{p(),d(!1)},[i,g]=l.useState({ten:"",dungLuong:"",trangThai:1}),[h,m]=l.useState({ten:"",dungLuong:"",trangThai:1});l.useEffect(()=>{a&&s&&g({ten:a.ten,dungLuong:a.dungLuong,trangThai:1})},[a,s]);const y=t=>{const{value:r,name:u}=t.target;g({...i,[u]:r}),m({...h,[u]:r?"":"Trường này không được để trống"})},p=()=>{g({ten:"",trangThai:1}),m({ten:"",trangThai:1})},x=async()=>{let t=!0;const r={...h};for(const u in i)i[u]||(r[u]="Trường này không được để trống",t=!1);m(r),t&&(await G({id:a.id,dungLuong:i.dungLuong,ten:i.ten,trangThai:i.trangThai})?(f.success(b.CREATED),o(),n()):f.error(b.ERROR))};return e.jsxs("div",{children:[e.jsx(M,{color:"primary",onClick:c,children:e.jsx(B,{})}),e.jsx(k,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:s,onClose:n,closeAfterTransition:!0,slots:{backdrop:N},slotProps:{backdrop:{timeout:500}},children:e.jsx(A,{in:s,children:e.jsxs(D,{sx:X,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"40px",textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"30px"},children:"CHỈNH SỬA"}),e.jsx(w,{label:"Tên RAM",style:{width:"100%"},name:"ten",error:!!h.ten,helperText:h.ten,onChange:y,value:i.ten}),e.jsx(w,{label:"Dung lượng",style:{width:"100%"},name:"dungLuong",error:!!h.dungLuong,helperText:h.dungLuong,onChange:y,value:i.dungLuong})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"end",alignItems:"end",marginTop:"20px",gap:"10px"},children:[e.jsx(T,{className:"btn",onClick:n,children:"Hủy"}),e.jsx(T,{className:"btn",onClick:x,children:"Xác Nhận"})]})]})})})]})}const me=()=>{const o=[{field:"index",headerName:"STT",width:70,flex:1},{field:"ma",headerName:"Mã",width:130,flex:1},{field:"ten",headerName:"Tên VGA",width:130,flex:1},{field:"dungLuong",headerName:"Dung Lượng",flex:1},{field:"actions",headerName:"Thao Tác",sortable:!1,width:160,flex:1,renderCell:t=>e.jsxs("div",{children:[e.jsx("div",{style:{display:"inline-block"},children:e.jsx(Y,{fetchRams:p,info:t.row})}),e.jsx(M,{color:"error",onClick:()=>x(t.id),children:e.jsx(H,{})})]})}],[a,s]=l.useState([]),[d,c]=l.useState(0),[n,i]=l.useState(1),[g,h]=l.useState(0),[m,y]=l.useState(!1);l.useEffect(()=>{p()},[d]);const p=async()=>{try{y(!0);const t=await z({page:d,size:5});y(!1),t.status===200?(s(t.data.data.map((r,u)=>({...r,index:u+d*5+1}))),h(parseInt(t.data.totalElement)),i(parseInt(t.data.totalPage))):f.error("Error loading data")}catch{f.error("Error loading data")}},x=async t=>{O.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#9c27b0",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async r=>{if(r.isConfirmed){const u=await F({id:t});u&&u.data.code===200?(f.success(b.DELETED),p()):f.error(b.ERROR)}})};return e.jsx("div",{children:e.jsxs($,{title:"Danh sách VGA",children:[e.jsxs("div",{className:"mb-5 flex",style:{justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(w,{label:"Tìm RAM",style:{width:"300px"}}),e.jsx(T,{className:"btn rounded-lg",children:"Làm mới"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(v,{fullWidth:!0,children:[e.jsx(L,{id:"status",children:"Trạng Thái"}),e.jsxs(S,{labelId:"status",id:"status",label:"Trạng Thái",className:"w-[300px]",children:[e.jsx(j,{value:10,children:"Ten"}),e.jsx(j,{value:20,children:"Twenty"}),e.jsx(j,{value:30,children:"Thirty"})]})]}),e.jsxs(v,{fullWidth:!0,style:{width:"400px"},children:[e.jsx(L,{id:"display",children:"Hiển thị"}),e.jsxs(S,{labelId:"display",id:"display",label:"Hiển thị",children:[e.jsx(j,{value:10,children:"Ten"}),e.jsx(j,{value:20,children:"Twenty"}),e.jsx(j,{value:30,children:"Thirty"})]})]})]}),e.jsx("div",{children:e.jsx(W,{fetchRams:p})})]}),e.jsx("div",{style:{height:400,width:"100%"},children:e.jsx(P,{rows:a,columns:o,initialState:{pagination:{paginationModel:{page:0,pageSize:5}}},pageSizeOptions:[5],onPaginationModelChange:({page:t})=>c(t),rowCount:g,paginationMode:"server",loading:m})})]})})};export{me as default};
