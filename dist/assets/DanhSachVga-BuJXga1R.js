import{r as c,j as e,h as z,aq as N,ar as P,as as A,B as D,f as v,i as C,M as H,d as M,k as B,p as O,m as V,c as W}from"./index-BmIX3_3w.js";import{b as F}from"./back-end-vuWvP0DO.js";import{I as U,u as I,a as $,c as G,f as X}from"./vga-J23ziDCD.js";import{B as k}from"./react-toastify.esm-DM11plAz.js";import{N as S}from"./notification-B40vY8uZ.js";import{E as q}from"./Edit-DoQ4i-eH.js";import{A as K}from"./Add-vpFWHDmH.js";import{M as w}from"./MenuItem-ByEqL40d.js";import{T as J,a as Q,b as Y,c as L,d as Z}from"./TableRow-COUS1y_I.js";import{T}from"./TableCell-BAoyJBRv.js";import{S as R}from"./Switch-DlsO41Jn.js";import{T as _}from"./TablePagination-DvJQlFJ5.js";import"./SwitchBase-CzMjO0Un.js";import"./KeyboardArrowRight-ZUvQPM7X.js";import"./LastPage-YRoveXFG.js";const ee={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",border:"2px solid #673AB7",borderRadius:"10px",p:5};function ne({fetchRams:f,info:i}){const[h,p]=c.useState(!1),m=()=>p(!0),t=()=>{y(),p(!1)},[s,r]=c.useState({ten:"",dungLuong:"",trangThai:1}),[l,x]=c.useState({ten:"",dungLuong:"",trangThai:1});c.useEffect(()=>{i&&h&&r({ten:i.ten,dungLuong:i.dungLuong,trangThai:1})},[i,h]);const j=o=>{const{value:n,name:a}=o.target;r({...s,[a]:n}),x({...l,[a]:n?"":"Trường này không được để trống"})},y=()=>{r({ten:"",trangThai:1}),x({ten:"",trangThai:1})},g=async()=>{let o=!0;const n={...l};for(const u in s)s[u]||(n[u]="Trường này không được để trống",o=!1);x(n);const a=await U(s.ten,i.id);a||(o=!1,console.log("checkName: ",a),alert("Tên đã tồn tại")),o&&(await I({id:i.id,dungLuong:s.dungLuong,ten:s.ten,trangThai:s.trangThai})?(k.success(S.CREATED),f(),t()):k.error(S.ERROR))};return e.jsxs("div",{children:[e.jsx(z,{sx:{color:"#6C6C6C"},onClick:m,children:e.jsx(q,{})}),e.jsx(N,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:h,onClose:t,closeAfterTransition:!0,slots:{backdrop:P},slotProps:{backdrop:{timeout:500}},children:e.jsx(A,{in:h,children:e.jsxs(D,{sx:ee,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"40px",textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"30px"},children:"CHỈNH SỬA"}),e.jsx(v,{label:"Tên RAM",style:{width:"100%"},name:"ten",error:!!l.ten,helperText:l.ten,onChange:j,value:s.ten}),e.jsx(v,{label:"Dung lượng",style:{width:"100%"},name:"dungLuong",error:!!l.dungLuong,helperText:l.dungLuong,onChange:j,value:s.dungLuong})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{style:{marginTop:"10px",fontStyle:"italic",color:"gray"},children:[e.jsxs("p",{children:["Ngày tạo: ",i.ngayTao]}),e.jsxs("p",{children:["Người tạo: ",i.nguoiTao]}),e.jsxs("p",{children:["Ngày sửa: ",i.ngaySua]}),e.jsxs("p",{children:["Người sửa: ",i.nguoiSua]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"end",alignItems:"end",marginTop:"20px",gap:"10px"},children:[e.jsx(C,{variant:"contained",color:"secondary",onClick:t,children:"Hủy"}),e.jsx(C,{variant:"contained",color:"secondary",onClick:g,children:"Xác Nhận"})]})]})]})})})]})}const ae={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",border:"2px solid #673AB7",borderRadius:"10px",p:5};function te({fetchRams:f}){const[i,h]=c.useState(!1),p=()=>h(!0),m=()=>{j(),h(!1)},[t,s]=c.useState({ten:"",dungLuong:"",trangThai:1}),[r,l]=c.useState({ten:"",dungLuong:"",trangThai:1}),x=g=>{const{value:o,name:n}=g.target;s({...t,[n]:o}),l({...r,[n]:o?"":"Trường này không được để trống"})},j=()=>{s({ten:"",dungLuong:"",trangThai:1}),l({ten:"",dungLuong:"",trangThai:1})},y=async()=>{let g=!0;const o={...r};for(const a in t)t[a]||(o[a]="Trường này không được để trống",g=!1);l(o);const n=await $(t.ten);n||(g=!1,console.log("checkName: ",n),alert("Tên đã tồn tại")),g&&(await G({dungLuong:t.dungLuong,ten:t.ten,trangThai:t.trangThai})?(k.success(S.CREATED),f(),m()):k.error(S.ERROR))};return e.jsxs("div",{children:[e.jsx(C,{variant:"contained",color:"secondary",endIcon:e.jsx(K,{}),onClick:p,children:"Tạo mới"}),e.jsx(N,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:i,onClose:m,closeAfterTransition:!0,slots:{backdrop:P},slotProps:{backdrop:{timeout:500}},children:e.jsx(A,{in:i,children:e.jsxs(D,{sx:ae,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"40px",textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"30px"},children:"THÊM VGA"}),e.jsx(v,{label:"Tên VGA",style:{width:"100%"},name:"ten",error:!!r.ten,helperText:r.ten,onChange:x}),e.jsx(v,{label:"Dung lượng",style:{width:"100%"},name:"dungLuong",error:!!r.dungLuong,helperText:r.dungLuong,onChange:x})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"end",alignItems:"end",marginTop:"20px",gap:"10px"},children:[e.jsx(C,{variant:"contained",color:"secondary",onClick:m,children:"Hủy"}),e.jsx(C,{variant:"contained",color:"secondary",onClick:y,children:"Xác Nhận"})]})]})})})]})}const Te=()=>{const f=[{id:"ma",label:"Mã",minWidth:70},{id:"ten",label:"Tên",minWidth:300},{id:"dungLuong",label:"Dung lượng",minWidth:120},{id:"trangThai",label:"Trạng thái",minWidth:80},{id:"hanhDong",label:"Hành động",minWidth:170}],[i,h]=c.useState({pageNo:"",pageSize:"",totalPage:"",totalElement:""}),[p,m]=c.useState([]);c.useEffect(()=>{console.log("data: ",p)},[p]);const[t,s]=c.useState({page:"0",size:"5",name:"",trangThai:""});c.useEffect(()=>{console.log("filter: ",t),r()},[t]);const r=async()=>{const n=await X(t);m(n.data.data),h(a=>({...a,pageNo:n.data.pageNo,pageSize:n.data.pageSize,totalPage:n.data.totalPage,totalElement:n.data.totalElement}))},l=n=>{s(a=>({...a,page:0,size:5,name:n.target.value}))},x=n=>{s(a=>({...a,page:0,size:5,trangThai:n.target.value}))},j=(n,a)=>{console.log("newPage: ",a),s(u=>({...u,page:a}))},y=n=>{s(a=>({...a,size:n.target.value}))},g=n=>a=>{a.target.checked?o(n,1):o(n,0)},o=async(n,a)=>{let d=(await W.get(`${F}/vga/detail/${n}`)).data.data;console.log("temp: ",d);let b={...d,trangThai:a};console.log("temp1: ",b),await I(b),r()};return e.jsx("div",{children:e.jsx(H,{children:e.jsxs(M,{sx:{width:"100%",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"10px"},children:[e.jsxs("div",{children:[e.jsx(v,{sx:{width:"400px"},color:"secondary",onChange:l,id:"outlined-basic",label:"Tìm theo tên",variant:"outlined"}),e.jsxs(B,{sx:{width:"200px",marginLeft:"20px"},children:[e.jsx(O,{id:"demo-simple-select-label",children:"Trạng Thái"}),e.jsxs(V,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:t.trangThai,label:"Trạng thái",onChange:x,children:[e.jsx(w,{value:"",children:"Tất cả"}),e.jsx(w,{value:1,children:"Hoạt động"}),e.jsx(w,{value:0,children:"Không hoạt động"})]})]})]}),e.jsx("div",{children:e.jsx(te,{fetchRams:r})})]}),e.jsx(J,{sx:{maxHeight:440},children:e.jsxs(Q,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(Y,{children:e.jsxs(L,{children:[e.jsx(T,{children:"STT"}),f.map(n=>e.jsx(T,{align:n.align,style:{minWidth:n.minWidth},children:n.label},n.id))]})}),e.jsx(Z,{children:p.map((n,a)=>{const u=t.page*t.size+a+1;return e.jsxs(L,{hover:!0,role:"checkbox",tabIndex:-1,children:[e.jsx(T,{align:"left",children:u}),f.map(d=>{const b=n[d.id];if(d.id==="trangThai")return e.jsx(T,{align:d.align,children:b===1?"Hoạt động":"Đã tắt"},d.id);if(d.id==="hanhDong"){let E=n.trangThai;return e.jsx("div",{style:{display:"flex"},children:e.jsxs(T,{sx:{display:"flex"},align:d.align,children:[e.jsx(ne,{fetchRams:r,info:n}),E===1&&e.jsx(R,{defaultChecked:!0,color:"secondary",onChange:g(n.id)}),E===0&&e.jsx(R,{color:"secondary",onChange:g(n.id)})]},d.id)})}return e.jsx(T,{align:d.align,children:b},d.id)})]},n.code)})})]})}),e.jsx(_,{rowsPerPageOptions:[5,10,25,50,100],component:"div",count:i.totalElement,rowsPerPage:t.size,page:t.page,onPageChange:j,onRowsPerPageChange:y})]})})})};export{Te as default};
