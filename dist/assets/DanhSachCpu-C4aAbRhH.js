import{c as b,r as c,j as e,m as T,ax as v,ay as N,az as X,B as k,f as y,h as D,M,n as U,t as E,o as R}from"./index-DkjfH3Nj.js";import{b as w}from"./back-end-vuWvP0DO.js";import{B as C}from"./react-toastify.esm-BvxhtGjR.js";import{N as S}from"./notification-B40vY8uZ.js";import{A as $}from"./Add-BmWZAlNn.js";import{E as I,S as A}from"./sweetalert2.esm.all-WZ1a4pXy.js";import{M as j}from"./MenuItem-B1FZ8Sxq.js";import{D as B}from"./Delete-CGNBZUkl.js";import{D as O}from"./DataGrid-pcOpsUtY.js";import"./toPropertyKey-PLuKRk1e.js";import"./Autocomplete-Cq8bYuq6.js";import"./Close-DQEw0W5Z.js";import"./index-DPnwyd78.js";import"./Checkbox-CJjLKa6W.js";import"./CircularProgress-C_rxJWba.js";import"./TablePagination-De1m2AAw.js";import"./KeyboardArrowRight-BY8qYOjh.js";import"./LastPage-CMxtDi2C.js";import"./TableCell-BUbxn9S2.js";import"./useThemeProps-C91a8WKB.js";const P="cpu",H=async({ten:l,dongCPU:a,nhaSanXuat:s,trangThai:h})=>{var u;try{const n=await b.post(`${w}/${P}/add`,{ten:l,dongCPU:a,nhaSanXuat:s,trangThai:h});return(u=n==null?void 0:n.data)==null?void 0:u.data}catch(n){console.log("Error createNewRam",n)}},z=async({page:l,size:a})=>{try{return await b.get(`${w}/${P}/all?page=${l}&limit=${a}`)}catch(s){console.log("Error createNewRam",s)}},F=async({id:l})=>{try{return await b.delete(`${w}/${P}/delete/${l}`)}catch(a){console.log("Error deleteRam",a)}},L=async({id:l,ten:a,dongCPU:s,nhaSanXuat:h,trangThai:u})=>{try{return await b.put(`${w}/${P}/update/${l}`,{id:l,ten:a,dongCPU:s,nhaSanXuat:h,trangThai:u})}catch(n){console.log("Error updateRam",n)}},V={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",border:"2px solid #000",p:5};function W({fetchRams:l}){const[a,s]=c.useState(!1),h=()=>s(!0),u=()=>{m(),s(!1)},[n,o]=c.useState({ten:"",dongCPU:"",nhaSanXuat:"",trangThai:1}),[i,d]=c.useState({ten:"",dongCPU:"",nhaSanXuat:"",trangThai:1}),g=f=>{const{value:t,name:r}=f.target;o({...n,[r]:t}),d({...i,[r]:t?"":"Trường này không được để trống"})},m=()=>{o({ten:"",dongCPU:"",nhaSanXuat:"",trangThai:1}),d({ten:"",dongCPU:"",nhaSanXuat:"",trangThai:1})},x=async()=>{let f=!0;const t={...i};for(const r in n)n[r]||(t[r]="Trường này không được để trống",f=!1);d(t),f&&(await H({ten:n.ten,dongCPU:n.dongCPU,nhaSanXuat:n.ten,trangThai:1})?(C.success(S.CREATED),l(),u()):C.error(S.ERROR))};return e.jsxs("div",{children:[e.jsx(T,{endIcon:e.jsx($,{}),onClick:h,children:"Tạo mới"}),e.jsx(v,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:a,onClose:u,closeAfterTransition:!0,slots:{backdrop:N},slotProps:{backdrop:{timeout:500}},children:e.jsx(X,{in:a,children:e.jsxs(k,{sx:V,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"40px",textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"30px"},children:"THÊM CPU"}),e.jsx(y,{label:"Tên CPU",style:{width:"100%"},name:"ten",error:!!i.ten,helperText:i.ten,onChange:g}),e.jsx(y,{label:"Dòng CPU",style:{width:"100%"},name:"dongCPU",error:!!i.dongCPU,helperText:i.dongCPU,onChange:g}),e.jsx(y,{label:"Nhà Sản Xuất",style:{width:"100%"},name:"nhaSanXuat",error:!!i.nhaSanXuat,helperText:i.nhaSanXuat,onChange:g})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"end",alignItems:"end",marginTop:"20px",gap:"10px"},children:[e.jsx(T,{className:"btn",onClick:u,children:"Hủy"}),e.jsx(T,{className:"btn",onClick:x,children:"Xác Nhận"})]})]})})})]})}const G={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",border:"2px solid #000",p:5};function Y({fetchRams:l,info:a}){const[s,h]=c.useState(!1),u=()=>h(!0),n=()=>{x(),h(!1)},[o,i]=c.useState({ten:"",dongCPU:"",nhaSanXuat:"",trangThai:1}),[d,g]=c.useState({ten:"",dongCPU:"",nhaSanXuat:"",trangThai:1});c.useEffect(()=>{a&&s&&i({ten:a.ten,dongCPU:a.dongCPU,nhaSanXuat:a.nhaSanXuat,trangThai:1})},[a,s]);const m=t=>{const{value:r,name:p}=t.target;i({...o,[p]:r}),g({...d,[p]:r?"":"Trường này không được để trống"})},x=()=>{i({ten:"",dongCPU:"",nhaSanXuat:"",trangThai:1}),g({ten:"",dongCPU:"",nhaSanXuat:"",trangThai:1})},f=async()=>{let t=!0;const r={...d};for(const p in o)o[p]||(r[p]="Trường này không được để trống",t=!1);g(r),t&&(await L({id:a.id,dongCPU:o.dongCPU,nhaSanXuat:o.nhaSanXuat,ten:o.ten,trangThai:o.trangThai})?(C.success(S.CREATED),l(),n()):C.error(S.ERROR))};return e.jsxs("div",{children:[e.jsx(D,{color:"primary",onClick:u,children:e.jsx(I,{})}),e.jsx(v,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:s,onClose:n,closeAfterTransition:!0,slots:{backdrop:N},slotProps:{backdrop:{timeout:500}},children:e.jsx(X,{in:s,children:e.jsxs(k,{sx:G,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"40px",textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"30px"},children:"CHỈNH SỬA"}),e.jsx(y,{label:"Tên CPU",style:{width:"100%"},name:"ten",error:!!d.ten,helperText:d.ten,onChange:m,value:o.ten}),e.jsx(y,{label:"Dòng CPU",style:{width:"100%"},name:"dongCPU",error:!!d.dongCPU,helperText:d.dongCPU,onChange:m,value:o.dongCPU}),e.jsx(y,{label:"Nhà Sản Xuất",style:{width:"100%"},name:"nhaSanXuat",error:!!d.nhaSanXuat,helperText:d.nhaSanXuat,onChange:m,value:o.nhaSanXuat})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"end",alignItems:"end",marginTop:"20px",gap:"10px"},children:[e.jsx(T,{className:"btn",onClick:n,children:"Hủy"}),e.jsx(T,{className:"btn",onClick:f,children:"Xác Nhận"})]})]})})})]})}const ge=()=>{const l=[{field:"index",headerName:"STT",width:70,flex:1},{field:"ma",headerName:"Mã",width:130,flex:1},{field:"ten",headerName:"Tên CPU",width:130,flex:1},{field:"dongCPU",headerName:"Dòng CPU",flex:1},{field:"nhaSanXuat",headerName:"Nhà Sản Xuất",width:130,flex:1},{field:"actions",headerName:"Thao Tác",sortable:!1,width:160,flex:1,renderCell:t=>e.jsxs("div",{children:[e.jsx("div",{style:{display:"inline-block"},children:e.jsx(Y,{fetchRams:x,info:t.row})}),e.jsx(D,{color:"error",onClick:()=>f(t.id),children:e.jsx(B,{})})]})}],[a,s]=c.useState([]),[h,u]=c.useState(0),[n,o]=c.useState(1),[i,d]=c.useState(0),[g,m]=c.useState(!1);c.useEffect(()=>{x()},[h]);const x=async()=>{try{m(!0);const t=await z({page:h,size:5});m(!1),t.status===200?(s(t.data.data.map((r,p)=>({...r,index:p+h*5+1}))),d(parseInt(t.data.totalElement)),o(parseInt(t.data.totalPage))):C.error("Error loading data")}catch{C.error("Error loading data")}},f=async t=>{A.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#9c27b0",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async r=>{if(r.isConfirmed){const p=await F({id:t});p&&p.data.code===200?(C.success(S.DELETED),x()):C.error(S.ERROR)}})};return e.jsx("div",{children:e.jsxs(M,{title:"Danh sách CPU / Chip",children:[e.jsxs("div",{className:"mb-5 flex",style:{justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(y,{label:"Tìm RAM",style:{width:"300px"}}),e.jsx(T,{className:"btn rounded-lg",children:"Làm mới"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(U,{fullWidth:!0,children:[e.jsx(E,{id:"status",children:"Trạng Thái"}),e.jsxs(R,{labelId:"status",id:"status",label:"Trạng Thái",className:"w-[300px]",children:[e.jsx(j,{value:10,children:"Ten"}),e.jsx(j,{value:20,children:"Twenty"}),e.jsx(j,{value:30,children:"Thirty"})]})]}),e.jsxs(U,{fullWidth:!0,style:{width:"400px"},children:[e.jsx(E,{id:"display",children:"Hiển thị"}),e.jsxs(R,{labelId:"display",id:"display",label:"Hiển thị",children:[e.jsx(j,{value:10,children:"Ten"}),e.jsx(j,{value:20,children:"Twenty"}),e.jsx(j,{value:30,children:"Thirty"})]})]})]}),e.jsx("div",{children:e.jsx(W,{fetchRams:x})})]}),e.jsx("div",{style:{height:400,width:"100%"},children:e.jsx(O,{rows:a,columns:l,initialState:{pagination:{paginationModel:{page:0,pageSize:5}}},pageSizeOptions:[5],onPaginationModelChange:({page:t})=>u(t),rowCount:i,paginationMode:"server",loading:g})})]})})};export{ge as default};
