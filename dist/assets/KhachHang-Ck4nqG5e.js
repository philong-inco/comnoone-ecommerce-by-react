import{r as l,a4 as L,j as e,M as V,B as i,G as x,J as m,a5 as j,N as Y,a6 as $,a7 as J,a8 as Z,ad as q,a9 as F,V as O,A as Q,Z as U,a2 as o}from"./index-COCf9D-9.js";import{c as X,g as ee,d as ae,a as ne,b as te}from"./customerService-BZrOvmkS.js";import{d as re}from"./Add-DMKPmK9i.js";import{u as f,w as le}from"./xlsx-ChUIJHMt.js";import{d as se,I as ie}from"./InsertDriveFile-CLO28EJP.js";import{M as c}from"./MenuItem-DZ1TXfcd.js";import{T as oe,a as ce,b as he,c as H,d as de}from"./TableRow-BjFi84E7.js";import{T as n}from"./TableCell-DFzCksj9.js";import{P as ge}from"./Pagination-p0ct8pHs.js";import"./request-BSxo6Ply.js";import"./LastPage-DEWP3WKD.js";const Te=()=>{const[s,u]=l.useState(1),[K,v]=l.useState(0),[b,E]=l.useState([]),[h,p]=l.useState(""),[d,S]=l.useState(""),[g,C]=l.useState(""),[N,k]=l.useState(""),D=[{id:"1",name:"Nam"},{id:"0",name:"Nữ"},{id:"",name:"Tất cả"}],w=L(),I=async()=>{try{let a;h?a=await ee(s-1,h):d!==""?a=await ae(s-1,d):g!==""?a=await ne(s-1,g):a=await te(s-1),E(a.content),v(a.totalPages)}catch(a){console.log(a)}};l.useEffect(()=>{I()},[s,h,d,g]),l.useEffect(()=>{W()},[]);const W=async()=>{try{const a=await X();k(a)}catch(a){console.log(a)}},A=a=>{switch(a){case 0:return"Nữ";case 1:return"Nam";default:return"Không xác định"}},y=a=>{const t={width:"100px",textAlign:"center"};switch(a){case 0:return e.jsx(o,{label:"Đồng",color:"default",sx:{...t,backgroundColor:"#CD853F",color:"#FFFFFF"}});case 1:return e.jsx(o,{label:"Bạc",color:"default",sx:{...t,backgroundColor:"#C0C0C0",color:"#000000"}});case 2:return e.jsx(o,{label:"Vàng",color:"default",sx:{...t,backgroundColor:"#FFD700",color:"#000000"}});case 3:return e.jsx(o,{label:"Bạch Kim",color:"default",sx:{...t,backgroundColor:"#E5E4E2",color:"#000000"}});case 4:return e.jsx(o,{label:"Kim Cương",color:"default",sx:{...t,backgroundColor:"#363636",color:"#FFFFFF"}});default:return e.jsx(o,{label:"Không xác định",color:"default",sx:{...t,backgroundColor:"#FFFFFF",color:"#000000"}})}},T=a=>{const t={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(a).toLocaleDateString("vi-VN",t)},_=a=>{w(`/khachhang/khachhangaddress/${a}`)},G=(a,t)=>{u(t)},P=()=>{w("/khachhang/khachhangconfiguration")},R=a=>{debugger;S(a.target.value),u(1),p(""),C("")},B=a=>{const t=a.target.value;C(t),u(1),p(""),S("")},M=()=>{debugger;const a=f.json_to_sheet(N.map((r,z)=>({STT:z+1+(s-1)*10,"Hình Ảnh":r.hinhAnh,Mã:r.ma,Tên:r.ten,"Ngày Sinh":T(r.ngaySinh),"Số Điện Thoại":r.sdt,"Giới Tính":r.gioiTinh==1?"Nam":"Nữ",Email:r.email,"Địa Chỉ":r.diaChi}))),t=f.book_new();f.book_append_sheet(t,a,"Danh Sách Khách Hàng"),le(t,"danh_sach_khach_hang.xlsx")};return e.jsxs(V,{style:{textAlign:"center"},title:"Danh Sách Khách Hàng",children:[e.jsxs(i,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",mb:2,p:2,sx:{backgroundColor:"white",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",borderRadius:"8px",width:"100%"},children:[e.jsxs(x,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(x,{item:!0,xs:12,sm:4,children:e.jsx(m,{fullWidth:!0,margin:"normal",children:e.jsxs(i,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(j,{component:"legend",sx:{fontWeight:"bold",whiteSpace:"nowrap",width:"50%"},children:"Tìm kiếm"}),e.jsx(Y,{value:h,onChange:a=>p(a.target.value),variant:"outlined",placeholder:"Nhập tên khách hàng",fullWidth:!0})]})})}),e.jsx(x,{item:!0,xs:12,sm:4,children:e.jsx(m,{fullWidth:!0,margin:"normal",children:e.jsxs(i,{display:"flex",alignItems:"center",children:[e.jsx(j,{component:"legend",sx:{fontWeight:"bold",whiteSpace:"nowrap",width:"30%"},children:"Giới Tính"}),e.jsx($,{row:!0,value:d,onChange:R,sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexGrow:1,marginLeft:"10px"},children:D.map(a=>e.jsx(J,{value:a.id,control:e.jsx(Z,{}),label:a.name,sx:{marginRight:2}},a.id))})]})})}),e.jsx(x,{item:!0,xs:12,sm:4,children:e.jsx(m,{fullWidth:!0,margin:"normal",children:e.jsxs(i,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(j,{component:"legend",sx:{fontWeight:"bold",whiteSpace:"nowrap",width:"50%"},children:"Hạng Khách Hàng"}),e.jsxs(q,{labelId:"hang-khach-hang-label",id:"hang-khach-hang-select",value:g,onChange:B,displayEmpty:!0,fullWidth:!0,children:[e.jsx(c,{value:"",children:e.jsx("em",{children:"-- Chọn hạng khách hàng --"})}),e.jsx(c,{value:0,children:"Đồng"}),e.jsx(c,{value:1,children:"Bạc"}),e.jsx(c,{value:2,children:"Vàng"}),e.jsx(c,{value:3,children:"Bạch Kim"}),e.jsx(c,{value:4,children:"Kim Cương"})]})]})})})]}),e.jsx(i,{sx:{position:"fixed",bottom:16,right:16,zIndex:1300},children:e.jsx(F,{color:"primary","aria-label":"add",sx:{height:"60px",width:"60px",backgroundColor:"#007bff",color:"#fff",boxShadow:"0px 8px 15px rgba(0, 123, 255, 0.3)",transition:"all 0.3s ease","&:hover":{backgroundColor:"#0056b3",boxShadow:"0px 15px 20px rgba(0, 86, 179, 0.4)",transform:"translateY(-3px)"},"&:active":{backgroundColor:"#004080",boxShadow:"0px 5px 10px rgba(0, 64, 128, 0.2)",transform:"translateY(1px)"}},onClick:P,children:e.jsx(re,{sx:{fontSize:"30px"}})})}),e.jsx(i,{sx:{position:"fixed",bottom:100,right:16,zIndex:1300},children:e.jsx(F,{color:"primary","aria-label":"export",sx:{height:"60px",width:"60px",backgroundColor:"#28a745",color:"#fff",boxShadow:"0px 8px 15px rgba(40, 167, 69, 0.3)",transition:"all 0.3s ease","&:hover":{backgroundColor:"#218838",boxShadow:"0px 15px 20px rgba(33, 136, 56, 0.4)",transform:"translateY(-3px)"},"&:active":{backgroundColor:"#1e7e34",boxShadow:"0px 5px 10px rgba(30, 126, 52, 0.2)",transform:"translateY(1px)"}},onClick:M,children:e.jsx(se,{sx:{fontSize:"30px"}})})})]}),e.jsx(oe,{component:O,children:e.jsxs(ce,{children:[e.jsx(he,{children:e.jsxs(H,{children:[e.jsx(n,{align:"center",children:"STT"}),e.jsx(n,{align:"center",children:"Hình Ảnh"}),e.jsx(n,{align:"center",children:"Mã Khách Hàng"}),e.jsx(n,{align:"center",children:"Tên Khách Hàng"}),e.jsx(n,{align:"center",children:"Hạng Khách Hàng"}),e.jsx(n,{align:"center",children:"Ngày Sinh"}),e.jsx(n,{align:"center",children:"Email"}),e.jsx(n,{align:"center",children:"Số Điện Thoại"}),e.jsx(n,{align:"center",children:"Giới Tính"}),e.jsx(n,{align:"center",children:"Thao Tác"})]})}),e.jsx(de,{children:b.length>0&&b.map((a,t)=>{const r=T(a.ngaySinh);return y(a.hangKhachHang),e.jsxs(H,{children:[e.jsx(n,{align:"center",children:t+1+(s-1)*5}),e.jsx(n,{align:"center",children:e.jsx(Q,{alt:a.ten,src:a.hinhAnh,sx:{width:100,height:100}})}),e.jsx(n,{align:"center",children:a.ma}),e.jsx(n,{align:"center",children:a.ten}),e.jsx(n,{children:y(a.hangKhachHang)}),e.jsx(n,{align:"center",children:r}),e.jsx(n,{align:"center",children:a.email}),e.jsx(n,{align:"center",children:a.sdt}),e.jsx(n,{align:"center",children:A(a.gioiTinh)}),e.jsx(n,{align:"center",children:e.jsx(U,{className:"btn btn-link",children:e.jsx(ie,{stroke:2,onClick:()=>_(a.id)})})})]},a.id)})})]})}),e.jsx(i,{display:"flex",justifyContent:"center",mt:2,children:e.jsx(ge,{count:K,page:s,onChange:G,color:"primary"})})]})};export{Te as default};
