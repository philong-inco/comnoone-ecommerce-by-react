import{r as s,b as $,j as e,M as O,B as i,G as x,n as u,F as m,f as X,R as q,i as J,k as Q,o as U,p as H,d as Z,A as ee,m as ae,e as o}from"./index-DkjfH3Nj.js";import{c as ne,g as te,d as re,a as se,b as le}from"./customerService-DUAqXprP.js";import{d as ie}from"./Add-Damc_Ck8.js";import{u as j,w as oe}from"./xlsx-ChUIJHMt.js";import{d as ce,I as he}from"./InsertDriveFile-DKcgKIhA.js";import{M as c}from"./MenuItem-B1FZ8Sxq.js";import{T as ge,a as de,b as xe,c as K,d as pe}from"./TableRow-DrBFg2V4.js";import{T as n}from"./TableCell-BUbxn9S2.js";import{T as ue}from"./TablePagination-De1m2AAw.js";import"./request-DcjhHzTt.js";import"./KeyboardArrowRight-BY8qYOjh.js";import"./LastPage-CMxtDi2C.js";const Ke=()=>{const[f,b]=s.useState(1),[E,k]=s.useState(0),[w,P]=s.useState([]),[h,p]=s.useState(""),[g,C]=s.useState(""),[d,S]=s.useState(""),[I,N]=s.useState(""),[l,T]=s.useState({page:0,size:5}),R=[{id:"1",name:"Nam"},{id:"0",name:"Nữ"},{id:"",name:"Tất cả"}],y=$(),D=async()=>{try{let a;h?a=await te(l.page,h):g!==""?a=await re(l.page,g):d!==""?a=await se(l.page,d):a=await le(l.page),P(a.content),k(a.totalElements)}catch(a){console.log(a)}};s.useEffect(()=>{D()},[l.page,l.size,h,g,d]),s.useEffect(()=>{W()},[]);const W=async()=>{try{const a=await ne();N(a)}catch(a){console.log(a)}},A=(a,t)=>{T(r=>({...r,page:t}))},_=a=>{T({...l,size:parseInt(a.target.value,10),page:0})},G=a=>{switch(a){case 0:return"Nữ";case 1:return"Nam";default:return"Không xác định"}},F=a=>{const t={width:"100px",textAlign:"center"};switch(a){case 0:return e.jsx(o,{label:"Đồng",color:"default",sx:{...t,backgroundColor:"#CD853F",color:"#FFFFFF"}});case 1:return e.jsx(o,{label:"Bạc",color:"default",sx:{...t,backgroundColor:"#C0C0C0",color:"#000000"}});case 2:return e.jsx(o,{label:"Vàng",color:"default",sx:{...t,backgroundColor:"#FFD700",color:"#000000"}});case 3:return e.jsx(o,{label:"Bạch Kim",color:"default",sx:{...t,backgroundColor:"#E5E4E2",color:"#000000"}});case 4:return e.jsx(o,{label:"Kim Cương",color:"default",sx:{...t,backgroundColor:"#363636",color:"#FFFFFF"}});default:return e.jsx(o,{label:"Không xác định",color:"default",sx:{...t,backgroundColor:"#FFFFFF",color:"#000000"}})}},v=a=>{const t={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(a).toLocaleDateString("vi-VN",t)},z=a=>{y(`/khachhang/khachhangaddress/${a}`)},B=()=>{y("/khachhang/khachhangconfiguration")},M=a=>{debugger;C(a.target.value),b(1),p(""),S("")},L=a=>{const t=a.target.value;S(t),b(1),p(""),C("")},Y=()=>{debugger;const a=j.json_to_sheet(I.map((r,V)=>({STT:V+1+(f-1)*10,"Hình Ảnh":r.hinhAnh,Mã:r.ma,Tên:r.ten,"Ngày Sinh":v(r.ngaySinh),"Số Điện Thoại":r.sdt,"Giới Tính":r.gioiTinh==1?"Nam":"Nữ",Email:r.email,"Địa Chỉ":r.diaChi}))),t=j.book_new();j.book_append_sheet(t,a,"Danh Sách Khách Hàng"),oe(t,"danh_sach_khach_hang.xlsx")};return e.jsxs(O,{style:{textAlign:"center"},children:[e.jsxs(i,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",mb:2,p:2,sx:{backgroundColor:"white",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",borderRadius:"8px",width:"100%"},children:[e.jsxs(x,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(x,{item:!0,xs:12,sm:4,children:e.jsx(u,{fullWidth:!0,margin:"normal",children:e.jsxs(i,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(m,{component:"legend",sx:{fontWeight:"bold",whiteSpace:"nowrap",width:"50%"},children:"Tìm kiếm"}),e.jsx(X,{value:h,onChange:a=>p(a.target.value),variant:"outlined",placeholder:"Nhập tên khách hàng",fullWidth:!0})]})})}),e.jsx(x,{item:!0,xs:12,sm:4,children:e.jsx(u,{fullWidth:!0,margin:"normal",children:e.jsxs(i,{display:"flex",alignItems:"center",children:[e.jsx(m,{component:"legend",sx:{fontWeight:"bold",whiteSpace:"nowrap",width:"30%"},children:"Giới Tính"}),e.jsx(q,{row:!0,value:g,onChange:M,sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexGrow:1,marginLeft:"10px"},children:R.map(a=>e.jsx(J,{value:a.id,control:e.jsx(Q,{}),label:a.name,sx:{marginRight:2}},a.id))})]})})}),e.jsx(x,{item:!0,xs:12,sm:4,children:e.jsx(u,{fullWidth:!0,margin:"normal",children:e.jsxs(i,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(m,{component:"legend",sx:{fontWeight:"bold",whiteSpace:"nowrap",width:"50%"},children:"Hạng Khách Hàng"}),e.jsxs(U,{labelId:"hang-khach-hang-label",id:"hang-khach-hang-select",value:d,onChange:L,displayEmpty:!0,fullWidth:!0,children:[e.jsx(c,{value:"",children:e.jsx("em",{children:"-- Chọn hạng khách hàng --"})}),e.jsx(c,{value:0,children:"Đồng"}),e.jsx(c,{value:1,children:"Bạc"}),e.jsx(c,{value:2,children:"Vàng"}),e.jsx(c,{value:3,children:"Bạch Kim"}),e.jsx(c,{value:4,children:"Kim Cương"})]})]})})})]}),e.jsx(i,{sx:{position:"fixed",top:350,right:16,zIndex:1300},children:e.jsx(H,{color:"primary","aria-label":"add",title:"Thêm khách hàng",sx:{height:"60px",width:"60px",backgroundColor:"#007bff",color:"#fff",boxShadow:"0px 8px 15px rgba(0, 123, 255, 0.3)",transition:"all 0.3s ease","&:hover":{backgroundColor:"#0056b3",boxShadow:"0px 15px 20px rgba(0, 86, 179, 0.4)",transform:"translateY(-3px)"},"&:active":{backgroundColor:"#004080",boxShadow:"0px 5px 10px rgba(0, 64, 128, 0.2)",transform:"translateY(1px)"}},onClick:B,children:e.jsx(ie,{sx:{fontSize:"30px"}})})}),e.jsx(i,{sx:{position:"fixed",top:420,right:16,zIndex:1300},children:e.jsx(H,{color:"primary","aria-label":"export",title:"Xuất danh sách khách hàng",sx:{height:"60px",width:"60px",backgroundColor:"#28a745",color:"#fff",boxShadow:"0px 8px 15px rgba(40, 167, 69, 0.3)",transition:"all 0.3s ease","&:hover":{backgroundColor:"#218838",boxShadow:"0px 15px 20px rgba(33, 136, 56, 0.4)",transform:"translateY(-3px)"},"&:active":{backgroundColor:"#1e7e34",boxShadow:"0px 5px 10px rgba(30, 126, 52, 0.2)",transform:"translateY(1px)"}},onClick:Y,children:e.jsx(ce,{sx:{fontSize:"30px"}})})})]}),e.jsx(ge,{component:Z,children:e.jsxs(de,{children:[e.jsx(xe,{children:e.jsxs(K,{children:[e.jsx(n,{align:"center",children:"STT"}),e.jsx(n,{align:"center",children:"Hình Ảnh"}),e.jsx(n,{align:"center",children:"Mã Khách Hàng"}),e.jsx(n,{align:"center",children:"Tên Khách Hàng"}),e.jsx(n,{align:"center",children:"Hạng Khách Hàng"}),e.jsx(n,{align:"center",children:"Ngày Sinh"}),e.jsx(n,{align:"center",children:"Email"}),e.jsx(n,{align:"center",children:"Số Điện Thoại"}),e.jsx(n,{align:"center",children:"Giới Tính"}),e.jsx(n,{align:"center",children:"Thao Tác"})]})}),e.jsx(pe,{children:w.length>0&&w.map((a,t)=>{const r=v(a.ngaySinh);return F(a.hangKhachHang),e.jsxs(K,{children:[e.jsx(n,{align:"center",children:t+1+(f-1)*5}),e.jsx(n,{align:"center",children:e.jsx(ee,{alt:a.ten,src:a.hinhAnh,sx:{width:100,height:100}})}),e.jsx(n,{align:"center",children:a.ma}),e.jsx(n,{align:"center",children:a.ten}),e.jsx(n,{children:F(a.hangKhachHang)}),e.jsx(n,{align:"center",children:r}),e.jsx(n,{align:"center",children:a.email}),e.jsx(n,{align:"center",children:a.sdt}),e.jsx(n,{align:"center",children:G(a.gioiTinh)}),e.jsx(n,{align:"center",children:e.jsx(ae,{className:"btn btn-link",children:e.jsx(he,{stroke:2,onClick:()=>z(a.id)})})})]},a.id)})})]})}),e.jsx(ue,{rowsPerPageOptions:[5],component:"div",count:E,rowsPerPage:l.size,page:l.page,onPageChange:A,onRowsPerPageChange:_})]})};export{Ke as default};
