import{c as w,r as h,j as e,m as b,ax as G,ay as N,az as S,B as M,f as y,h as H,M as D,n as E,t as R,o as v}from"./index-DkjfH3Nj.js";import{b as C}from"./back-end-vuWvP0DO.js";import{B as f}from"./react-toastify.esm-BvxhtGjR.js";import{N as k}from"./notification-B40vY8uZ.js";import{A as $}from"./Add-BmWZAlNn.js";import{E as I,S as A}from"./sweetalert2.esm.all-WZ1a4pXy.js";import{M as j}from"./MenuItem-B1FZ8Sxq.js";import{D as B}from"./Delete-CGNBZUkl.js";import{D as O}from"./DataGrid-pcOpsUtY.js";import"./toPropertyKey-PLuKRk1e.js";import"./Autocomplete-Cq8bYuq6.js";import"./Close-DQEw0W5Z.js";import"./index-DPnwyd78.js";import"./Checkbox-CJjLKa6W.js";import"./CircularProgress-C_rxJWba.js";import"./TablePagination-De1m2AAw.js";import"./KeyboardArrowRight-BY8qYOjh.js";import"./LastPage-CMxtDi2C.js";import"./TableCell-BUbxn9S2.js";import"./useThemeProps-C91a8WKB.js";const P="man-hinh",z=async({ten:o,doPhanGiai:n,kichThuoc:i,trangThai:d})=>{var m;try{const a=await w.post(`${C}/${P}/add`,{ten:o,doPhanGiai:n,kichThuoc:i,trangThai:d});return(m=a==null?void 0:a.data)==null?void 0:m.data}catch(a){console.log("Error createNewRam",a)}},F=async({page:o,size:n})=>{try{return await w.get(`${C}/${P}/all?page=${o}&limit=${n}`)}catch(i){console.log("Error createNewRam",i)}},L=async({id:o})=>{try{return await w.delete(`${C}/${P}/delete/${o}`)}catch(n){console.log("Error deleteRam",n)}},K=async({id:o,ten:n,doPhanGiai:i,kichThuoc:d,trangThai:m})=>{try{return await w.put(`${C}/${P}/update/${o}`,{id:o,ten:n,doPhanGiai:i,kichThuoc:d,trangThai:m})}catch(a){console.log("Error updateRam",a)}},U={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",border:"2px solid #000",p:5};function V({fetchRams:o}){const[n,i]=h.useState(!1),d=()=>i(!0),m=()=>{x(),i(!1)},[a,r]=h.useState({ten:"",doPhanGiai:"",kichThuoc:"",trangThai:1}),[l,c]=h.useState({ten:"",doPhanGiai:"",kichThuoc:"",trangThai:1}),p=T=>{const{value:t,name:s}=T.target;r({...a,[s]:t}),c({...l,[s]:t?"":"Trường này không được để trống"})},x=()=>{r({ten:"",doPhanGiai:"",kichThuoc:"",trangThai:1}),c({ten:"",doPhanGiai:"",kichThuoc:"",trangThai:1})},g=async()=>{let T=!0;const t={...l};for(const s in a)a[s]||(t[s]="Trường này không được để trống",T=!1);c(t),T&&(await z({ten:a.ten,doPhanGiai:a.doPhanGiai,kichThuoc:a.kichThuoc,trangThai:a.trangThai})?(f.success(k.CREATED),o(),m()):f.error(k.ERROR))};return e.jsxs("div",{children:[e.jsx(b,{endIcon:e.jsx($,{}),onClick:d,children:"Tạo mới"}),e.jsx(G,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:n,onClose:m,closeAfterTransition:!0,slots:{backdrop:N},slotProps:{backdrop:{timeout:500}},children:e.jsx(S,{in:n,children:e.jsxs(M,{sx:U,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"40px",textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"30px"},children:"THÊM MÀN HÌNH"}),e.jsx(y,{label:"Tên Màn Hình",style:{width:"100%"},name:"ten",error:!!l.ten,helperText:l.ten,onChange:p}),e.jsx(y,{label:"Độ Phân Giải",style:{width:"100%"},name:"doPhanGiai",error:!!l.doPhanGiai,helperText:l.doPhanGiai,onChange:p}),e.jsx(y,{label:"Kích thước",style:{width:"100%"},name:"kichThuoc",error:!!l.kichThuoc,helperText:l.kichThuoc,onChange:p})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"end",alignItems:"end",marginTop:"20px",gap:"10px"},children:[e.jsx(b,{className:"btn",onClick:m,children:"Hủy"}),e.jsx(b,{className:"btn",onClick:g,children:"Xác Nhận"})]})]})})})]})}const W={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",border:"2px solid #000",p:5};function X({fetchRams:o,info:n}){const[i,d]=h.useState(!1),m=()=>d(!0),a=()=>{g(),d(!1)},[r,l]=h.useState({ten:"",doPhanGiai:"",kichThuoc:"",trangThai:1}),[c,p]=h.useState({ten:"",doPhanGiai:"",kichThuoc:"",trangThai:1});h.useEffect(()=>{n&&i&&l({ten:n.ten,doPhanGiai:n.doPhanGiai,kichThuoc:n.kichThuoc,trangThai:1})},[n,i]);const x=t=>{const{value:s,name:u}=t.target;l({...r,[u]:s}),p({...c,[u]:s?"":"Trường này không được để trống"})},g=()=>{l({ten:"",doPhanGiai:"",kichThuoc:"",trangThai:1}),p({ten:"",doPhanGiai:"",kichThuoc:"",trangThai:1})},T=async()=>{let t=!0;const s={...c};for(const u in r)r[u]||(s[u]="Trường này không được để trống",t=!1);p(s),t&&(await K({id:n.id,doPhanGiai:r.doPhanGiai,kichThuoc:r.kichThuoc,ten:r.ten,trangThai:r.trangThai})?(f.success(k.CREATED),o(),a()):f.error(k.ERROR))};return e.jsxs("div",{children:[e.jsx(H,{color:"primary",onClick:m,children:e.jsx(I,{})}),e.jsx(G,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:i,onClose:a,closeAfterTransition:!0,slots:{backdrop:N},slotProps:{backdrop:{timeout:500}},children:e.jsx(S,{in:i,children:e.jsxs(M,{sx:W,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"40px",textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"30px"},children:"CHỈNH SỬA"}),e.jsx(y,{label:"Tên Màn Hình",style:{width:"100%"},name:"ten",error:!!c.ten,helperText:c.ten,onChange:x,value:r.ten}),e.jsx(y,{label:"Độ Phân Giải",style:{width:"100%"},name:"doPhanGiai",error:!!c.doPhanGiai,helperText:c.doPhanGiai,onChange:x,value:r.doPhanGiai}),e.jsx(y,{label:"Kích Thước",style:{width:"100%"},name:"kichThuoc",error:!!c.kichThuoc,helperText:c.kichThuoc,onChange:x,value:r.kichThuoc})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"end",alignItems:"end",marginTop:"20px",gap:"10px"},children:[e.jsx(b,{className:"btn",onClick:a,children:"Hủy"}),e.jsx(b,{className:"btn",onClick:T,children:"Xác Nhận"})]})]})})})]})}const pe=()=>{const o=[{field:"index",headerName:"STT",width:70,flex:1},{field:"ma",headerName:"Mã",width:130,flex:1},{field:"ten",headerName:"Tên Màn Hình",width:130,flex:1},{field:"doPhanGiai",headerName:"Độ Phân Giải",flex:1},{field:"kichThuoc",headerName:"Kích Thước",width:130,flex:1},{field:"actions",headerName:"Thao Tác",sortable:!1,width:160,flex:1,renderCell:t=>e.jsxs("div",{children:[e.jsx("div",{style:{display:"inline-block"},children:e.jsx(X,{fetchRams:g,info:t.row})}),e.jsx(H,{color:"error",onClick:()=>T(t.id),children:e.jsx(B,{})})]})}],[n,i]=h.useState([]),[d,m]=h.useState(0),[a,r]=h.useState(1),[l,c]=h.useState(0),[p,x]=h.useState(!1);h.useEffect(()=>{g()},[d]);const g=async()=>{try{x(!0);const t=await F({page:d,size:5});x(!1),t.status===200?(i(t.data.data.map((s,u)=>({...s,index:u+d*5+1}))),c(parseInt(t.data.totalElement)),r(parseInt(t.data.totalPage))):f.error("Error loading data")}catch{f.error("Error loading data")}},T=async t=>{A.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#9c27b0",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async s=>{if(s.isConfirmed){const u=await L({id:t});u&&u.data.code===200?(f.success(k.DELETED),g()):f.error(k.ERROR)}})};return e.jsx("div",{children:e.jsxs(D,{title:"Danh sách Màn Hình",children:[e.jsxs("div",{className:"mb-5 flex",style:{justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(y,{label:"Tìm RAM",style:{width:"300px"}}),e.jsx(b,{className:"btn rounded-lg",children:"Làm mới"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(E,{fullWidth:!0,children:[e.jsx(R,{id:"status",children:"Trạng Thái"}),e.jsxs(v,{labelId:"status",id:"status",label:"Trạng Thái",className:"w-[300px]",children:[e.jsx(j,{value:10,children:"Ten"}),e.jsx(j,{value:20,children:"Twenty"}),e.jsx(j,{value:30,children:"Thirty"})]})]}),e.jsxs(E,{fullWidth:!0,style:{width:"400px"},children:[e.jsx(R,{id:"display",children:"Hiển thị"}),e.jsxs(v,{labelId:"display",id:"display",label:"Hiển thị",children:[e.jsx(j,{value:10,children:"Ten"}),e.jsx(j,{value:20,children:"Twenty"}),e.jsx(j,{value:30,children:"Thirty"})]})]})]}),e.jsx("div",{children:e.jsx(V,{fetchRams:g})})]}),e.jsx("div",{style:{height:400,width:"100%"},children:e.jsx(O,{rows:n,columns:o,initialState:{pagination:{paginationModel:{page:0,pageSize:5}}},pageSizeOptions:[5],onPaginationModelChange:({page:t})=>m(t),rowCount:l,paginationMode:"server",loading:p})})]})})};export{pe as default};
