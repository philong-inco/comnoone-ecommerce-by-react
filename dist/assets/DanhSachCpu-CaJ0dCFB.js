import{r as c,j as e,h as A,aq as E,ar as N,as as R,B as D,f as j,i as S,M as z,d as H,k as B,p as M,m as W,c as O}from"./index-C3AKKGhn.js";import{b as F}from"./back-end-vuWvP0DO.js";import{I as V,u as I,a as $,c as L,f as q}from"./cpu-0VHLpx5O.js";import{B as P}from"./react-toastify.esm-BgZIXYS1.js";import{N as v}from"./notification-B40vY8uZ.js";import{E as K}from"./Edit-BdLQoyQM.js";import{A as G}from"./Add-CIMKSK4g.js";import{M as U}from"./MenuItem-BPROy0V0.js";import{T as J,a as Q,b as Y,c as w,d as Z}from"./TableRow-B_CqS-KR.js";import{T}from"./TableCell-H1HogFdd.js";import{S as X}from"./Switch-DQniZdEO.js";import{T as _}from"./TablePagination-BljFDuGW.js";import"./SwitchBase-BbMjoehg.js";import"./KeyboardArrowRight-CMlb_Nei.js";import"./LastPage-BFOqoU3v.js";const ee={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",border:"2px solid #673AB7",borderRadius:"10px",p:5};function ae({fetchRams:C,info:r}){const[g,x]=c.useState(!1),u=()=>x(!0),t=()=>{y(),x(!1)},[s,i]=c.useState({ten:"",dongCPU:"",nhaSanXuat:"",trangThai:1}),[o,p]=c.useState({ten:"",dongCPU:"",nhaSanXuat:"",trangThai:1});c.useEffect(()=>{r&&g&&i({ten:r.ten,dongCPU:r.dongCPU,nhaSanXuat:r.nhaSanXuat,trangThai:1})},[r,g]);const f=l=>{const{value:a,name:n}=l.target;i({...s,[n]:a}),p({...o,[n]:a?"":"Trường này không được để trống"})},y=()=>{i({ten:"",dongCPU:"",nhaSanXuat:"",trangThai:1}),p({ten:"",dongCPU:"",nhaSanXuat:"",trangThai:1})},h=async()=>{let l=!0;const a={...o};for(const m in s)s[m]||(a[m]="Trường này không được để trống",l=!1);p(a);const n=await V(s.ten,r.id);n||(l=!1,console.log("checkName: ",n),alert("Tên đã tồn tại")),l&&(await I({id:r.id,dongCPU:s.dongCPU,nhaSanXuat:s.nhaSanXuat,ten:s.ten,trangThai:s.trangThai})?(P.success(v.CREATED),C(),t()):P.error(v.ERROR))};return e.jsxs("div",{children:[e.jsx(A,{sx:{color:"#6C6C6C"},onClick:u,children:e.jsx(K,{})}),e.jsx(E,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:g,onClose:t,closeAfterTransition:!0,slots:{backdrop:N},slotProps:{backdrop:{timeout:500}},children:e.jsx(R,{in:g,children:e.jsxs(D,{sx:ee,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"40px",textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"30px"},children:"CHỈNH SỬA"}),e.jsx(j,{label:"Tên CPU",style:{width:"100%"},name:"ten",error:!!o.ten,helperText:o.ten,onChange:f,value:s.ten}),e.jsx(j,{label:"Dòng CPU",style:{width:"100%"},name:"dongCPU",error:!!o.dongCPU,helperText:o.dongCPU,onChange:f,value:s.dongCPU}),e.jsx(j,{label:"Nhà Sản Xuất",style:{width:"100%"},name:"nhaSanXuat",error:!!o.nhaSanXuat,helperText:o.nhaSanXuat,onChange:f,value:s.nhaSanXuat})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{style:{marginTop:"10px",fontStyle:"italic",color:"gray"},children:[e.jsxs("p",{children:["Ngày tạo: ",r.ngayTao]}),e.jsxs("p",{children:["Người tạo: ",r.nguoiTao]}),e.jsxs("p",{children:["Ngày sửa: ",r.ngaySua]}),e.jsxs("p",{children:["Người sửa: ",r.nguoiSua]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"end",alignItems:"end",marginTop:"20px",gap:"10px"},children:[e.jsx(S,{variant:"contained",color:"secondary",onClick:t,children:"Hủy"}),e.jsx(S,{variant:"contained",color:"secondary",onClick:h,children:"Xác Nhận"})]})]})]})})})]})}const ne={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",border:"2px solid #673AB7",borderRadius:"10px",p:5};function te({fetchRams:C}){const[r,g]=c.useState(!1),x=()=>g(!0),u=()=>{f(),g(!1)},[t,s]=c.useState({ten:"",dongCPU:"",nhaSanXuat:"",trangThai:1}),[i,o]=c.useState({ten:"",dongCPU:"",nhaSanXuat:"",trangThai:1}),p=h=>{const{value:l,name:a}=h.target;s({...t,[a]:l}),o({...i,[a]:l?"":"Trường này không được để trống"})},f=()=>{s({ten:"",dongCPU:"",nhaSanXuat:"",trangThai:1}),o({ten:"",dongCPU:"",nhaSanXuat:"",trangThai:1})},y=async()=>{let h=!0;const l={...i};for(const n in t)t[n]||(l[n]="Trường này không được để trống",h=!1);o(l);const a=await $(t.ten);a||(h=!1,console.log("checkName: ",a),alert("Tên đã tồn tại")),h&&(await L({ten:t.ten,dongCPU:t.dongCPU,nhaSanXuat:t.ten,trangThai:1})?(P.success(v.CREATED),C(),u()):P.error(v.ERROR))};return e.jsxs("div",{children:[e.jsx(S,{variant:"contained",color:"secondary",endIcon:e.jsx(G,{}),onClick:x,children:"Tạo mới"}),e.jsx(E,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:r,onClose:u,closeAfterTransition:!0,slots:{backdrop:N},slotProps:{backdrop:{timeout:500}},children:e.jsx(R,{in:r,children:e.jsxs(D,{sx:ne,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"40px",textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"30px"},children:"THÊM CPU"}),e.jsx(j,{label:"Tên CPU",style:{width:"100%"},name:"ten",error:!!i.ten,helperText:i.ten,onChange:p}),e.jsx(j,{label:"Dòng CPU",style:{width:"100%"},name:"dongCPU",error:!!i.dongCPU,helperText:i.dongCPU,onChange:p}),e.jsx(j,{label:"Nhà Sản Xuất",style:{width:"100%"},name:"nhaSanXuat",error:!!i.nhaSanXuat,helperText:i.nhaSanXuat,onChange:p})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"end",alignItems:"end",marginTop:"20px",gap:"10px"},children:[e.jsx(S,{variant:"contained",color:"secondary",onClick:u,children:"Hủy"}),e.jsx(S,{variant:"contained",color:"secondary",onClick:y,children:"Xác Nhận"})]})]})})})]})}const Ce=()=>{const C=[{id:"ma",label:"Mã",minWidth:70},{id:"ten",label:"Tên",minWidth:300},{id:"dongCPU",label:"Dòng CPU",minWidth:120},{id:"nhaSanXuat",label:"Nhà sản xuất",minWidth:120},{id:"trangThai",label:"Trạng thái",minWidth:80},{id:"hanhDong",label:"Hành động",minWidth:170}],[r,g]=c.useState({pageNo:"",pageSize:"",totalPage:"",totalElement:""}),[x,u]=c.useState([]);c.useEffect(()=>{console.log("data: ",x)},[x]);const[t,s]=c.useState({page:"0",size:"5",name:"",trangThai:""});c.useEffect(()=>{console.log("filter: ",t),i()},[t]);const i=async()=>{const a=await q(t);u(a.data.data),g(n=>({...n,pageNo:a.data.pageNo,pageSize:a.data.pageSize,totalPage:a.data.totalPage,totalElement:a.data.totalElement}))},o=a=>{s(n=>({...n,page:0,size:5,name:a.target.value}))},p=a=>{s(n=>({...n,page:0,size:5,trangThai:a.target.value}))},f=(a,n)=>{console.log("newPage: ",n),s(m=>({...m,page:n}))},y=a=>{s(n=>({...n,size:a.target.value}))},h=a=>n=>{n.target.checked?l(a,1):l(a,0)},l=async(a,n)=>{let d=(await O.get(`${F}/cpu/detail/${a}`)).data.data;console.log("temp: ",d);let b={...d,trangThai:n};console.log("temp1: ",b),await I(b),i()};return e.jsx("div",{children:e.jsx(z,{children:e.jsxs(H,{sx:{width:"100%",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"10px"},children:[e.jsxs("div",{children:[e.jsx(j,{sx:{width:"400px"},color:"secondary",onChange:o,id:"outlined-basic",label:"Tìm theo tên",variant:"outlined"}),e.jsxs(B,{sx:{width:"200px",marginLeft:"20px"},children:[e.jsx(M,{id:"demo-simple-select-label",children:"Trạng Thái"}),e.jsxs(W,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:t.trangThai,label:"Trạng thái",onChange:p,children:[e.jsx(U,{value:"",children:"Tất cả"}),e.jsx(U,{value:1,children:"Hoạt động"}),e.jsx(U,{value:0,children:"Không hoạt động"})]})]})]}),e.jsx("div",{children:e.jsx(te,{fetchRams:i})})]}),e.jsx(J,{sx:{maxHeight:440},children:e.jsxs(Q,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(Y,{children:e.jsxs(w,{children:[e.jsx(T,{children:"STT"}),C.map(a=>e.jsx(T,{align:a.align,style:{minWidth:a.minWidth},children:a.label},a.id))]})}),e.jsx(Z,{children:x.map((a,n)=>{const m=t.page*t.size+n+1;return e.jsxs(w,{hover:!0,role:"checkbox",tabIndex:-1,children:[e.jsx(T,{align:"left",children:m}),C.map(d=>{const b=a[d.id];if(d.id==="trangThai")return e.jsx(T,{align:d.align,children:b===1?"Hoạt động":"Đã tắt"},d.id);if(d.id==="hanhDong"){let k=a.trangThai;return e.jsx("div",{style:{display:"flex"},children:e.jsxs(T,{sx:{display:"flex"},align:d.align,children:[e.jsx(ae,{fetchRams:i,info:a}),k===1&&e.jsx(X,{defaultChecked:!0,color:"secondary",onChange:h(a.id)}),k===0&&e.jsx(X,{color:"secondary",onChange:h(a.id)})]},d.id)})}return e.jsx(T,{align:d.align,children:b},d.id)})]},a.code)})})]})}),e.jsx(_,{rowsPerPageOptions:[5,10,25,50,100],component:"div",count:r.totalElement,rowsPerPage:t.size,page:t.page,onPageChange:f,onRowsPerPageChange:y})]})})})};export{Ce as default};
