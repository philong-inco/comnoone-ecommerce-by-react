import{ab as D,r as d,j as e,Z as b,al as L,am as S,Q as N,B as k,N as j,I as M,M as A,J as R,K as E,ad as v}from"./index-ODiMIL8c.js";import{b as C}from"./back-end-vuWvP0DO.js";import{B as y}from"./react-toastify.esm-7DHR6V1D.js";import{N as w}from"./notification-B40vY8uZ.js";import{A as I}from"./Add-6Vrh50Fs.js";import{E as $,S as O}from"./sweetalert2.esm.all-D26c4429.js";import{M as T}from"./MenuItem-9SXJ4cuB.js";import{D as H,a as P}from"./DataGrid-C7msUJw3.js";import"./toPropertyKey-PLuKRk1e.js";import"./Autocomplete-DcWqKeDV.js";import"./Close-BVp8FVaf.js";import"./Checkbox-CZLLfLAq.js";import"./CircularProgress-CYg-8QUw.js";import"./TablePagination-DjnFoDqb.js";import"./KeyboardArrowRight-DRQYp2Cc.js";import"./LastPage-BI26Cmhz.js";import"./TableCell-CvT0UNUt.js";import"./useThemeProps-BfmIH54n.js";const B="ram",z=async({ten:l,dungLuong:s,tocDoBus:a,trangThai:u})=>{var h;try{const n=await D.post(`${C}/${B}/add`,{ten:l,dungLuong:s,tocDoBus:a,trangThai:u});return(h=n==null?void 0:n.data)==null?void 0:h.data}catch(n){console.log("Error createNewRam",n)}},F=async({page:l,size:s})=>{try{return await D.get(`${C}/${B}/all?page=${l}&limit=${s}`)}catch(a){console.log("Error createNewRam",a)}},U=async({id:l})=>{try{return await D.delete(`${C}/${B}/delete/${l}`)}catch(s){console.log("Error deleteRam",s)}},V=async({id:l,ten:s,dungLuong:a,tocDoBus:u,trangThai:h})=>{try{return await D.put(`${C}/${B}/update/${l}`,{id:l,ten:s,dungLuong:a,tocDoBus:u,trangThai:h})}catch(n){console.log("Error updateRam",n)}},W={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",border:"2px solid #000",p:5};function X({fetchRams:l}){const[s,a]=d.useState(!1),u=()=>a(!0),h=()=>{x(),a(!1)},[n,o]=d.useState({ten:"",dungLuong:"",tocDoBus:"",trangThai:1}),[i,c]=d.useState({ten:"",dungLuong:"",tocDoBus:"",trangThai:1}),m=f=>{const{value:t,name:r}=f.target;o({...n,[r]:t}),c({...i,[r]:t?"":"Trường này không được để trống"})},x=()=>{o({ten:"",dungLuong:"",tocDoBus:"",trangThai:1}),c({ten:"",dungLuong:"",tocDoBus:"",trangThai:1})},p=async()=>{let f=!0;const t={...i};for(const r in n)n[r]||(t[r]="Trường này không được để trống",f=!1);c(t),f&&(await z({dungLuong:n.dungLuong,ten:n.ten,tocDoBus:n.tocDoBus,trangThai:n.trangThai})?(y.success(w.CREATED),l(),h()):y.error(w.ERROR))};return e.jsxs("div",{children:[e.jsx(b,{endIcon:e.jsx(I,{}),onClick:u,children:"Tạo mới"}),e.jsx(L,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:s,onClose:h,closeAfterTransition:!0,slots:{backdrop:S},slotProps:{backdrop:{timeout:500}},children:e.jsx(N,{in:s,children:e.jsxs(k,{sx:W,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"40px",textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"30px"},children:"THÊM RAM"}),e.jsx(j,{label:"Tên RAM",style:{width:"100%"},name:"ten",error:!!i.ten,helperText:i.ten,onChange:m}),e.jsx(j,{label:"Dung lượng",style:{width:"100%"},name:"dungLuong",error:!!i.dungLuong,helperText:i.dungLuong,onChange:m}),e.jsx(j,{label:"Tốc độ Bus",style:{width:"100%"},name:"tocDoBus",error:!!i.tocDoBus,helperText:i.tocDoBus,onChange:m})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"end",alignItems:"end",marginTop:"20px",gap:"10px"},children:[e.jsx(b,{className:"btn",onClick:h,children:"Hủy"}),e.jsx(b,{className:"btn",onClick:p,children:"Xác Nhận"})]})]})})})]})}const G={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",border:"2px solid #000",p:5};function J({fetchRams:l,info:s}){const[a,u]=d.useState(!1),h=()=>u(!0),n=()=>{p(),u(!1)},[o,i]=d.useState({ten:"",dungLuong:"",tocDoBus:"",trangThai:1}),[c,m]=d.useState({ten:"",dungLuong:"",tocDoBus:"",trangThai:1});d.useEffect(()=>{s&&a&&i({ten:s.ten,dungLuong:s.dungLuong,tocDoBus:s.tocDoBus,trangThai:1})},[s,a]);const x=t=>{const{value:r,name:g}=t.target;i({...o,[g]:r}),m({...c,[g]:r?"":"Trường này không được để trống"})},p=()=>{i({ten:"",trangThai:1}),m({ten:"",trangThai:1})},f=async()=>{let t=!0;const r={...c};for(const g in o)o[g]||(r[g]="Trường này không được để trống",t=!1);m(r),t&&(await V({id:s.id,dungLuong:o.dungLuong,tocDoBus:o.tocDoBus,ten:o.ten,trangThai:o.trangThai})?(y.success(w.CREATED),l(),n()):y.error(w.ERROR))};return e.jsxs("div",{children:[e.jsx(M,{color:"primary",onClick:h,children:e.jsx($,{})}),e.jsx(L,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:a,onClose:n,closeAfterTransition:!0,slots:{backdrop:S},slotProps:{backdrop:{timeout:500}},children:e.jsx(N,{in:a,children:e.jsxs(k,{sx:G,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"40px",textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"30px"},children:"CHỈNH SỬA"}),e.jsx(j,{label:"Tên RAM",style:{width:"100%"},name:"ten",error:!!c.ten,helperText:c.ten,onChange:x,value:o.ten}),e.jsx(j,{label:"Dung lượng",style:{width:"100%"},name:"dungLuong",error:!!c.dungLuong,helperText:c.dungLuong,onChange:x,value:o.dungLuong}),e.jsx(j,{label:"Tốc độ Bus",style:{width:"100%"},name:"tocDoBus",error:!!c.tocDoBus,helperText:c.tocDoBus,onChange:x,value:o.tocDoBus})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"end",alignItems:"end",marginTop:"20px",gap:"10px"},children:[e.jsx(b,{className:"btn",onClick:n,children:"Hủy"}),e.jsx(b,{className:"btn",onClick:f,children:"Xác Nhận"})]})]})})})]})}const he=()=>{const l=[{field:"index",headerName:"STT",width:70,flex:1},{field:"ma",headerName:"Mã",width:130,flex:1},{field:"ten",headerName:"Tên RAM",width:130,flex:1},{field:"dungLuong",headerName:"Dung Lượng",flex:1},{field:"tocDoBus",headerName:"Tốc độ Bus",width:130,flex:1},{field:"actions",headerName:"Thao Tác",sortable:!1,width:160,flex:1,renderCell:t=>e.jsxs("div",{children:[e.jsx("div",{style:{display:"inline-block"},children:e.jsx(J,{fetchRams:p,info:t.row})}),e.jsx(M,{color:"error",onClick:()=>f(t.id),children:e.jsx(P,{})})]})}],[s,a]=d.useState([]),[u,h]=d.useState(0),[n,o]=d.useState(1),[i,c]=d.useState(0),[m,x]=d.useState(!1);d.useEffect(()=>{p()},[u]);const p=async()=>{try{x(!0);const t=await F({page:u,size:5});x(!1),t.status===200?(a(t.data.data.map((r,g)=>({...r,index:g+u*5+1}))),c(parseInt(t.data.totalElement)),o(parseInt(t.data.totalPage))):y.error("Error loading data")}catch{y.error("Error loading data")}},f=async t=>{O.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#9c27b0",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async r=>{if(r.isConfirmed){const g=await U({id:t});g&&g.data.code===200?(y.success(w.DELETED),p()):y.error(w.ERROR)}})};return e.jsx("div",{children:e.jsxs(A,{title:"Danh sách RAM",children:[e.jsxs("div",{className:"mb-5 flex",style:{justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j,{label:"Tìm RAM",style:{width:"300px"}}),e.jsx(b,{className:"btn rounded-lg",children:"Làm mới"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(R,{fullWidth:!0,children:[e.jsx(E,{id:"status",children:"Trạng Thái"}),e.jsxs(v,{labelId:"status",id:"status",label:"Trạng Thái",className:"w-[300px]",children:[e.jsx(T,{value:10,children:"Ten"}),e.jsx(T,{value:20,children:"Twenty"}),e.jsx(T,{value:30,children:"Thirty"})]})]}),e.jsxs(R,{fullWidth:!0,style:{width:"400px"},children:[e.jsx(E,{id:"display",children:"Hiển thị"}),e.jsxs(v,{labelId:"display",id:"display",label:"Hiển thị",children:[e.jsx(T,{value:10,children:"Ten"}),e.jsx(T,{value:20,children:"Twenty"}),e.jsx(T,{value:30,children:"Thirty"})]})]})]}),e.jsx("div",{children:e.jsx(X,{fetchRams:p})})]}),e.jsx("div",{style:{height:400,width:"100%"},children:e.jsx(H,{rows:s,columns:l,initialState:{pagination:{paginationModel:{page:0,pageSize:5}}},pageSizeOptions:[5],onPaginationModelChange:({page:t})=>h(t),rowCount:i,paginationMode:"server",loading:m})})]})})};export{he as default};
