import{r as c,j as e,h as I,aq as E,ar as L,as as N,B as P,f,i as v,M,d as z,k as H,p as W,m as O,c as F}from"./index-BmIX3_3w.js";import{b as V}from"./back-end-vuWvP0DO.js";import{I as U,u as A,a as $,c as X,f as q}from"./ram-Dz5ZrV0x.js";import{B as D}from"./react-toastify.esm-DM11plAz.js";import{N as B}from"./notification-B40vY8uZ.js";import{E as K}from"./Edit-DoQ4i-eH.js";import{A as G}from"./Add-vpFWHDmH.js";import{M as k}from"./MenuItem-ByEqL40d.js";import{T as J,a as Q,b as Y,c as S,d as Z}from"./TableRow-COUS1y_I.js";import{T as y}from"./TableCell-BAoyJBRv.js";import{S as R}from"./Switch-DlsO41Jn.js";import{T as _}from"./TablePagination-DvJQlFJ5.js";import"./SwitchBase-CzMjO0Un.js";import"./KeyboardArrowRight-ZUvQPM7X.js";import"./LastPage-YRoveXFG.js";const ee={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",border:"2px solid #673AB7",borderRadius:"10px",p:5};function te({fetchRams:j,info:i}){const[h,p]=c.useState(!1),m=()=>p(!0),a=()=>{b(),p(!1)},[s,o]=c.useState({ten:"",dungLuong:"",tocDoBus:"",trangThai:1}),[r,u]=c.useState({ten:"",dungLuong:"",tocDoBus:"",trangThai:1});c.useEffect(()=>{i&&h&&o({ten:i.ten,dungLuong:i.dungLuong,tocDoBus:i.tocDoBus,trangThai:1})},[i,h]);const T=l=>{const{value:t,name:n}=l.target;o({...s,[n]:t}),u({...r,[n]:t?"":"Trường này không được để trống"})},b=()=>{o({ten:"",trangThai:1}),u({ten:"",trangThai:1})},g=async()=>{let l=!0;const t={...r};for(const x in s)s[x]||(t[x]="Trường này không được để trống",l=!1);u(t);const n=await U(s.ten,i.id);n||(l=!1,console.log("checkName: ",n),alert("Tên đã tồn tại")),l&&(await A({id:i.id,dungLuong:s.dungLuong,tocDoBus:s.tocDoBus,ten:s.ten,trangThai:s.trangThai})?(D.success(B.CREATED),j(),a()):D.error(B.ERROR))};return e.jsxs("div",{children:[e.jsx(I,{sx:{color:"#6C6C6C"},onClick:m,children:e.jsx(K,{})}),e.jsx(E,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:h,onClose:a,closeAfterTransition:!0,slots:{backdrop:L},slotProps:{backdrop:{timeout:500}},children:e.jsx(N,{in:h,children:e.jsxs(P,{sx:ee,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"40px",textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"30px"},children:"CHỈNH SỬA"}),e.jsx(f,{label:"Tên RAM",style:{width:"100%"},name:"ten",error:!!r.ten,helperText:r.ten,onChange:T,value:s.ten}),e.jsx(f,{label:"Dung lượng",style:{width:"100%"},name:"dungLuong",error:!!r.dungLuong,helperText:r.dungLuong,onChange:T,value:s.dungLuong}),e.jsx(f,{label:"Tốc độ Bus",style:{width:"100%"},name:"tocDoBus",error:!!r.tocDoBus,helperText:r.tocDoBus,onChange:T,value:s.tocDoBus})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{style:{marginTop:"10px",fontStyle:"italic",color:"gray"},children:[e.jsxs("p",{children:["Ngày tạo: ",i.ngayTao]}),e.jsxs("p",{children:["Người tạo: ",i.nguoiTao]}),e.jsxs("p",{children:["Ngày sửa: ",i.ngaySua]}),e.jsxs("p",{children:["Người sửa: ",i.nguoiSua]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"end",alignItems:"end",marginTop:"20px",gap:"10px"},children:[e.jsx(v,{variant:"contained",color:"secondary",onClick:a,children:"Hủy"}),e.jsx(v,{variant:"contained",color:"secondary",onClick:g,children:"Xác Nhận"})]})]})]})})})]})}const ne={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",border:"2px solid #673AB7",borderRadius:"10px",p:5};function ae({fetchRams:j}){const[i,h]=c.useState(!1),p=()=>h(!0),m=()=>{T(),h(!1)},[a,s]=c.useState({ten:"",dungLuong:"",tocDoBus:"",trangThai:1}),[o,r]=c.useState({ten:"",dungLuong:"",tocDoBus:"",trangThai:1}),u=g=>{const{value:l,name:t}=g.target;s({...a,[t]:l}),r({...o,[t]:l?"":"Trường này không được để trống"})},T=()=>{s({ten:"",dungLuong:"",tocDoBus:"",trangThai:1}),r({ten:"",dungLuong:"",tocDoBus:"",trangThai:1})},b=async()=>{let g=!0;const l={...o};for(const n in a)a[n]||(l[n]="Trường này không được để trống",g=!1);r(l);const t=await $(a.ten);t||(g=!1,console.log("checkName: ",t),alert("Tên đã tồn tại")),g&&(await X({dungLuong:a.dungLuong,ten:a.ten,tocDoBus:a.tocDoBus,trangThai:a.trangThai})?(D.success(B.CREATED),j(),m()):D.error(B.ERROR))};return e.jsxs("div",{children:[e.jsx(v,{variant:"contained",color:"secondary",endIcon:e.jsx(G,{}),onClick:p,children:"Tạo mới"}),e.jsx(E,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:i,onClose:m,closeAfterTransition:!0,slots:{backdrop:L},slotProps:{backdrop:{timeout:500}},children:e.jsx(N,{in:i,children:e.jsxs(P,{sx:ne,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"40px",textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"30px"},children:"THÊM RAM"}),e.jsx(f,{label:"Tên RAM",style:{width:"100%"},name:"ten",error:!!o.ten,helperText:o.ten,onChange:u}),e.jsx(f,{label:"Dung lượng",style:{width:"100%"},name:"dungLuong",error:!!o.dungLuong,helperText:o.dungLuong,onChange:u}),e.jsx(f,{label:"Tốc độ Bus",style:{width:"100%"},name:"tocDoBus",error:!!o.tocDoBus,helperText:o.tocDoBus,onChange:u})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"end",alignItems:"end",marginTop:"20px",gap:"10px"},children:[e.jsx(v,{variant:"contained",color:"secondary",onClick:m,children:"Hủy"}),e.jsx(v,{variant:"contained",color:"secondary",onClick:b,children:"Xác Nhận"})]})]})})})]})}const je=()=>{const j=[{id:"ma",label:"Mã",minWidth:70},{id:"ten",label:"Tên",minWidth:300},{id:"dungLuong",label:"Dung lượng",minWidth:120},{id:"tocDoBus",label:"Tốc độ bus",minWidth:120},{id:"trangThai",label:"Trạng thái",minWidth:80},{id:"hanhDong",label:"Hành động",minWidth:170}],[i,h]=c.useState({pageNo:"",pageSize:"",totalPage:"",totalElement:""}),[p,m]=c.useState([]);c.useEffect(()=>{console.log("data: ",p)},[p]);const[a,s]=c.useState({page:"0",size:"5",name:"",trangThai:""});c.useEffect(()=>{console.log("filter: ",a),o()},[a]);const o=async()=>{const t=await q(a);m(t.data.data),h(n=>({...n,pageNo:t.data.pageNo,pageSize:t.data.pageSize,totalPage:t.data.totalPage,totalElement:t.data.totalElement}))},r=t=>{s(n=>({...n,page:0,size:5,name:t.target.value}))},u=t=>{s(n=>({...n,page:0,size:5,trangThai:t.target.value}))},T=(t,n)=>{console.log("newPage: ",n),s(x=>({...x,page:n}))},b=t=>{s(n=>({...n,size:t.target.value}))},g=t=>n=>{n.target.checked?l(t,1):l(t,0)},l=async(t,n)=>{let d=(await F.get(`${V}/ram/detail/${t}`)).data.data;console.log("temp: ",d);let C={...d,trangThai:n};console.log("temp1: ",C),await A(C),o()};return e.jsx("div",{children:e.jsx(M,{children:e.jsxs(z,{sx:{width:"100%",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"10px"},children:[e.jsxs("div",{children:[e.jsx(f,{sx:{width:"400px"},color:"secondary",onChange:r,id:"outlined-basic",label:"Tìm theo tên",variant:"outlined"}),e.jsxs(H,{sx:{width:"200px",marginLeft:"20px"},children:[e.jsx(W,{id:"demo-simple-select-label",children:"Trạng Thái"}),e.jsxs(O,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:a.trangThai,label:"Trạng thái",onChange:u,children:[e.jsx(k,{value:"",children:"Tất cả"}),e.jsx(k,{value:1,children:"Hoạt động"}),e.jsx(k,{value:0,children:"Không hoạt động"})]})]})]}),e.jsx("div",{children:e.jsx(ae,{fetchRams:o})})]}),e.jsx(J,{sx:{maxHeight:440},children:e.jsxs(Q,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(Y,{children:e.jsxs(S,{children:[e.jsx(y,{children:"STT"}),j.map(t=>e.jsx(y,{align:t.align,style:{minWidth:t.minWidth},children:t.label},t.id))]})}),e.jsx(Z,{children:p.map((t,n)=>{const x=a.page*a.size+n+1;return e.jsxs(S,{hover:!0,role:"checkbox",tabIndex:-1,children:[e.jsx(y,{align:"left",children:x}),j.map(d=>{const C=t[d.id];if(d.id==="trangThai")return e.jsx(y,{align:d.align,children:C===1?"Hoạt động":"Đã tắt"},d.id);if(d.id==="hanhDong"){let w=t.trangThai;return e.jsx("div",{style:{display:"flex"},children:e.jsxs(y,{sx:{display:"flex"},align:d.align,children:[e.jsx(te,{fetchRams:o,info:t}),w===1&&e.jsx(R,{defaultChecked:!0,color:"secondary",onChange:g(t.id)}),w===0&&e.jsx(R,{color:"secondary",onChange:g(t.id)})]},d.id)})}return e.jsx(y,{align:d.align,children:C},d.id)})]},t.code)})})]})}),e.jsx(_,{rowsPerPageOptions:[5,10,25,50,100],component:"div",count:i.totalElement,rowsPerPage:a.size,page:a.page,onPageChange:T,onRowsPerPageChange:b})]})})})};export{je as default};
